{
  "visual": {
    "name": "100PercentStackedColumnChartByAkvelon",
    "guid": "PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1",
    "displayName": "100% Stacked Column Chart by Akvelon 1.2.3",
    "visualClassName": "Visual",
    "version": "1.2.3",
    "description": "100% Stacked Column Chart with rectangle selection support",
    "supportUrl": "http://akvelon.com/feedback",
    "gitHubUrl": ""
  },
  "apiVersion": "1.13.0",
  "author": {
    "name": "Akvelon Inc",
    "email": "pbisupport@akvelon.com"
  },
  "assets": {
    "icon": "assets/icon.png"
  },
  "externalJS": [
    "node_modules/d3/d3.min.js",
    "node_modules/globalize/lib/globalize.js",
    "node_modules/globalize/lib/cultures/globalize.culture.en-US.js",
    "node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js",
    "node_modules/powerbi-visuals-utils-typeutils/lib/index.js",
    "node_modules/powerbi-visuals-utils-svgutils/lib/index.js",
    "node_modules/powerbi-visuals-utils-interactivityutils/lib/index.js",
    "node_modules/powerbi-visuals-utils-tooltiputils/lib/index.js",
    "node_modules/powerbi-visuals-utils-formattingutils/lib/index.js",
    "node_modules/powerbi-visuals-utils-chartutils/lib/index.js",
    "node_modules/powerbi-visuals-utils-colorutils/lib/index.js"
  ],
  "style": "style/visual.less",
  "capabilities": {
    "dataRoles": [
      {
        "displayName": "Axis",
        "name": "Axis",
        "kind": "Grouping"
      },
      {
        "displayName": "Legend",
        "name": "Legend",
        "kind": "Grouping"
      },
      {
        "displayName": "Value",
        "name": "Value",
        "kind": "Measure",
        "requiredTypes": [
          {
            "numeric": true
          },
          {
            "integer": true
          }
        ]
      },
      {
        "displayName": "Color saturation",
        "name": "Gradient",
        "kind": "Measure",
        "requiredTypes": [
          {
            "numeric": true
          },
          {
            "integer": true
          }
        ]
      },
      {
        "displayName": "Column By",
        "name": "ColumnBy",
        "kind": "Grouping"
      },
      {
        "displayName": "Row By",
        "name": "RowBy",
        "kind": "Grouping"
      },
      {
        "displayName": "Tooltips",
        "name": "Tooltips",
        "kind": "Measure"
      }
    ],
    "objects": {
      "selectionSaveSettings": {
        "displayName": "Selection save settigns",
        "displayNameKey": "Visual_SelectionSaveSettings",
        "properties": {
          "selection": {
            "displayName": "Selection",
            "displayNameKey": "Visual_SelectionSaveSettings_Selection",
            "type": {
              "text": true
            }
          }
        }
      },
      "smallMultiple": {
        "displayName": "Small Multiple",
        "properties": {
          "layoutMode": {
            "displayName": "Layout Mode",
            "type": {
              "enumeration": [
                {
                  "displayName": "Flow",
                  "description": "Flow",
                  "value": "flow"
                },
                {
                  "displayName": "Matrix",
                  "description": "Matrix",
                  "value": "matrix"
                }
              ]
            }
          },
          "minUnitWidth": {
            "displayName": "Min Unit Width",
            "type": {
              "numeric": true
            }
          },
          "minUnitHeight": {
            "displayName": "Min Unit Height",
            "type": {
              "numeric": true
            }
          },
          "maxRowWidth": {
            "displayName": "Max Row Width",
            "type": {
              "numeric": true
            }
          },
          "showChartTitle": {
            "displayName": "Show Chart Title",
            "type": {
              "bool": true
            }
          },
          "textColor": {
            "displayName": "Text Color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "fontFamily": {
            "displayName": "Font Family",
            "displayNameKey": "Visual_Legend_FontFamily",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          },
          "fontSize": {
            "displayName": "Text Size",
            "displayNameKey": "Visual_Legend_TextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "fontColor": {
            "displayName": "Font Color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "showSeparators": {
            "displayName": "Show Separators",
            "type": {
              "bool": true
            }
          }
        }
      },
      "dataPoint": {
        "displayName": "Data colors",
        "properties": {
          "fill": {
            "displayName": "Default color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "fillRule": {
            "displayName": "Color saturation",
            "type": {
              "fillRule": {}
            },
            "rule": {
              "inputRole": "Gradient",
              "output": {
                "property": "fill",
                "selector": [
                  "Axis"
                ]
              }
            }
          },
          "showAllDataPoints": {
            "displayName": "Show all",
            "type": {
              "bool": true
            }
          }
        }
      },
      "legend": {
        "displayName": "Legend",
        "displayNameKey": "Visual_Legend",
        "properties": {
          "show": {
            "displayName": "Show",
            "displayNameKey": "Visual_Legend_Show",
            "type": {
              "bool": true
            }
          },
          "position": {
            "displayName": "Position",
            "displayNameKey": "Visual_Legend_LegendPosition",
            "description": "Select the location for the legend",
            "descriptionKey": "Visual_Description_LegendPosition",
            "type": {
              "enumeration": [
                {
                  "value": "Top",
                  "displayName": "Top",
                  "displayNameKey": "Visual_LegendPosition_Top"
                },
                {
                  "value": "Bottom",
                  "displayName": "Bottom",
                  "displayNameKey": "Visual_LegendPosition_Bottom"
                },
                {
                  "value": "Left",
                  "displayName": "Left",
                  "displayNameKey": "Visual_LegendPosition_Left"
                },
                {
                  "value": "Right",
                  "displayName": "Right",
                  "displayNameKey": "Visual_LegendPosition_Right"
                },
                {
                  "value": "TopCenter",
                  "displayName": "Top Center",
                  "displayNameKey": "Visual_LegendPosition_TopCenter"
                },
                {
                  "value": "BottomCenter",
                  "displayName": "Bottom Center",
                  "displayNameKey": "Visual_LegendPosition_BottomCenter"
                },
                {
                  "value": "LeftCenter",
                  "displayName": "Left Center",
                  "displayNameKey": "Visual_LegendPosition_LeftCenter"
                },
                {
                  "value": "RightCenter",
                  "displayName": "Right center",
                  "displayNameKey": "Visual_LegendPosition_RightCenter"
                }
              ]
            }
          },
          "showTitle": {
            "displayName": "Title",
            "displayNameKey": "Visual_Legend_LegendShowTitle",
            "description": "Display a title for legend symbols",
            "descriptionKey": "Visual_Description_LegendShowTitle",
            "type": {
              "bool": true
            }
          },
          "legendName": {
            "displayName": "Legend Name",
            "displayNameKey": "Visual_Legend_LegendName",
            "description": "Legend Name",
            "descriptionKey": "Visual_Description_LegendName",
            "type": {
              "text": true
            }
          },
          "legendNameColor": {
            "displayName": "Color",
            "displayNameKey": "Visual_Legend_LegendNameColor",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "fontFamily": {
            "displayName": "Font Family",
            "displayNameKey": "Visual_Legend_FontFamily",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          },
          "fontSize": {
            "displayName": "Text Size",
            "displayNameKey": "Visual_Legend_TextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          }
        }
      },
      "categoryAxis": {
        "displayName": "X-Axis",
        "properties": {
          "show": {
            "displayName": "Show",
            "type": {
              "bool": true
            }
          },
          "axisType": {
            "displayName": "Type",
            "displayNameKey": "Visual_Axis_Type",
            "type": {
              "enumeration": [
                {
                  "value": "continuous",
                  "displayName": "Continuous",
                  "displayNameKey": "Visual_Axis_Type_Continuous"
                },
                {
                  "value": "categorical",
                  "displayName": "Categorical",
                  "displayNameKey": "Visual_Axis_Type_Categorical"
                }
              ]
            }
          },
          "axisScale": {
            "displayName": "Scale type",
            "displayNameKey": "Visual_Axis_ScaleType",
            "type": {
              "enumeration": [
                {
                  "value": "linear",
                  "displayName": "Linear",
                  "displayNameKey": "Visual_Axis_ScaleType_Linear"
                },
                {
                  "value": "log",
                  "displayName": "Log",
                  "displayNameKey": "Visual_Axis_ScaleType_Log"
                }
              ]
            }
          },
          "rangeType": {
            "displayName": "Axis Range type",
            "type": {
              "enumeration": [
                {
                  "displayName": "Common",
                  "value": "common"
                },
                {
                  "displayName": "Separate",
                  "value": "separate"
                },
                {
                  "displayName": "Custom",
                  "value": "custom"
                }
              ]
            }
          },
          "rangeTypeNoScalar": {
            "displayName": "Axis Range type",
            "type": {
              "enumeration": [
                {
                  "displayName": "Common",
                  "value": "common"
                },
                {
                  "displayName": "Separate",
                  "value": "separate"
                }
              ]
            }
          },
          "start": {
            "displayName": "Start",
            "displayNameKey": "Visual_Axis_Start",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          },
          "end": {
            "displayName": "End",
            "displayNameKey": "Visual_Axis_End",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          },
          "axisColor": {
            "displayName": "Color",
            "displayNameKey": "Visual_Axis_Color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "fontSize": {
            "displayName": "Text size",
            "displayNameKey": "Visual_TextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "fontFamily": {
            "displayName": "Font Family",
            "displayNameKey": "Visual_Axis_FontFamily",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          },
          "precision": {
            "displayName": "Value decimal places",
            "displayNameKey": "Visual_Precision",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          },
          "minCategoryWidth": {
            "displayName": "Minimum category width",
            "displayNameKey": "Visual_Axis_MinCategoryWidth",
            "type": {
              "numeric": true
            }
          },
          "maximumSize": {
            "displayName": "Maximum size",
            "displayNameKey": "Visual_Axis_MaxSize",
            "type": {
              "numeric": true
            }
          },
          "innerPadding": {
            "displayName": "Inner padding",
            "displayNameKey": "Visual_Axis_InnerPadding",
            "type": {
              "numeric": true
            }
          },
          "showTitle": {
            "displayName": "Title",
            "displayNameKey": "Visual_Axis_ShowTitle",
            "type": {
              "bool": true
            }
          },
          "titleStyle": {
            "displayName": "Style",
            "displayNameKey": "Visual_Axis_axisStyle",
            "type": {
              "enumeration": [
                {
                  "displayName": "Show title only",
                  "value": "showTitleOnly"
                },
                {
                  "displayName": "Show unit only",
                  "value": "showUnitOnly"
                },
                {
                  "displayName": "Show both",
                  "value": "showBoth"
                }
              ]
            }
          },
          "axisTitle": {
            "displayName": "Axis title",
            "displayNameKey": "Visual_Axis_AxisTitle",
            "type": {
              "text": true
            }
          },
          "axisTitleColor": {
            "displayName": "Title color",
            "displayNameKey": "Visual_Axis_AxisTitleColor",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "titleFontSize": {
            "displayName": "Text size",
            "displayNameKey": "Visual_Axis_TitleTextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "titleFontFamily": {
            "displayName": "Font Family",
            "displayNameKey": "Visual_Axis_TitleFontFamily",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          }
        }
      },
      "valueAxis": {
        "displayName": "Y-Axis",
        "properties": {
          "show": {
            "displayName": "Show",
            "type": {
              "bool": true
            }
          },
          "position": {
            "displayName": "Position",
            "type": {
              "enumeration": [
                {
                  "value": "left",
                  "displayName": "Left"
                },
                {
                  "value": "right",
                  "displayName": "Right"
                }
              ]
            }
          },
          "rangeType": {
            "displayName": "Axis Range type",
            "type": {
              "enumeration": [
                {
                  "displayName": "Common",
                  "value": "common"
                },
                {
                  "displayName": "Separate",
                  "value": "separate"
                },
                {
                  "displayName": "Custom",
                  "value": "custom"
                }
              ]
            }
          },
          "start": {
            "displayName": "Start",
            "displayNameKey": "Visual_Axis_Start",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          },
          "end": {
            "displayName": "End",
            "displayNameKey": "Visual_Axis_End",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          },
          "axisColor": {
            "displayName": "Color",
            "displayNameKey": "Visual_Axis_Color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "fontSize": {
            "displayName": "Text size",
            "displayNameKey": "Visual_TextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "fontFamily": {
            "displayName": "Font Family",
            "displayNameKey": "Visual_Axis_FontFamily",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          },
          "showTitle": {
            "displayName": "Title",
            "displayNameKey": "Visual_ShowTitle",
            "type": {
              "bool": true
            }
          },
          "titleStyle": {
            "displayName": "Style",
            "displayNameKey": "Visual_Axis_axisStyle",
            "type": {
              "enumeration": [
                {
                  "displayName": "Show title only",
                  "value": "showTitleOnly"
                },
                {
                  "displayName": "Show unit only",
                  "value": "showUnitOnly"
                },
                {
                  "displayName": "Show both",
                  "value": "showBoth"
                }
              ]
            }
          },
          "axisTitle": {
            "displayName": "Axis title",
            "displayNameKey": "Visual_Axis_AxisTitle",
            "type": {
              "text": true
            }
          },
          "axisTitleColor": {
            "displayName": "Title color",
            "displayNameKey": "Visual_Axis_AxisTitleColor",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "titleFontSize": {
            "displayName": "Text size",
            "displayNameKey": "Visual_Axis_TitleTextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "titleFontFamily": {
            "displayName": "Font Family",
            "displayNameKey": "Visual_Axis_TitleFontFamily",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          },
          "showGridlines": {
            "displayName": "Gridlines",
            "displayNameKey": "Visual_Axis_ShowGridlines",
            "type": {
              "bool": true
            }
          },
          "gridlinesColor": {
            "displayName": "Gridlines color",
            "displayNameKey": "Visual_Axis_GridlinesColor",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "strokeWidth": {
            "displayName": "Stroke width",
            "displayNameKey": "Visual_Axis_StrokeWidth",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "lineStyle": {
            "displayName": "Line style",
            "displayNameKey": "Visual_Axis_LineStyle",
            "type": {
              "enumeration": [
                {
                  "displayName": "Dashed",
                  "description": "Dashed",
                  "value": "dashed"
                },
                {
                  "displayName": "Solid",
                  "description": "Solid",
                  "value": "solid"
                },
                {
                  "displayName": "Dotted",
                  "description": "Dotted",
                  "value": "dotted"
                }
              ]
            }
          }
        }
      },
      "categoryLabels": {
        "displayName": "Data labels",
        "displayNameKey": "Visual_CategoryLabels",
        "properties": {
          "show": {
            "displayName": "Show",
            "type": {
              "bool": true
            }
          },
          "color": {
            "displayName": "Color",
            "displayNameKey": "Visual_CategoryLabels_LabelsFill",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "displayUnits": {
            "displayName": "Display units",
            "displayNameKey": "Visual_CategoryLabels_DisplayUnits",
            "type": {
              "formatting": {
                "labelDisplayUnits": true
              }
            }
          },
          "precision": {
            "displayName": "Value decimal places",
            "displayNameKey": "Visual_Precision",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          },
          "orientation": {
            "displayName": "Orientation",
            "type": {
              "enumeration": [
                {
                  "displayName": "Horizontal",
                  "description": "Horizontal",
                  "value": "horizontal"
                },
                {
                  "displayName": "Vertical",
                  "description": "Vertical",
                  "value": "vertical"
                }
              ]
            }
          },
          "labelPosition": {
            "displayName": "Position",
            "displayNameKey": "Visual_CategoryLabels_Position",
            "type": {
              "enumeration": [
                {
                  "displayName": "Auto",
                  "description": "Auto",
                  "value": "auto"
                },
                {
                  "displayName": "Inside End",
                  "description": "Inside End",
                  "value": "end"
                },
                {
                  "displayName": "Inside Center",
                  "description": "Inside Center",
                  "value": "center"
                },
                {
                  "displayName": "Inside Base",
                  "description": "Inside Base",
                  "value": "base"
                }
              ]
            }
          },
          "overflowText": {
            "displayName": "Overflow text",
            "displayNameKey": "Visual_OverflowText",
            "type": {
              "bool": true
            }
          },
          "fontSize": {
            "displayName": "Text Size",
            "displayNameKey": "Visual_TextSize",
            "type": {
              "formatting": {
                "fontSize": true
              }
            }
          },
          "fontFamily": {
            "displayName": "Font family",
            "type": {
              "enumeration": [
                {
                  "displayName": "Arial",
                  "value": "Arial"
                },
                {
                  "displayName": "Arial Black",
                  "value": "\"Arial Black\""
                },
                {
                  "displayName": "Arial Unicode MS",
                  "value": "\"Arial Unicode MS\""
                },
                {
                  "displayName": "Calibri",
                  "value": "Calibri"
                },
                {
                  "displayName": "Cambria",
                  "value": "Cambria"
                },
                {
                  "displayName": "Cambria Math",
                  "value": "\"Cambria Math\""
                },
                {
                  "displayName": "Candara",
                  "value": "Candara"
                },
                {
                  "displayName": "Comic Sans MS",
                  "value": "\"Comic Sans MS\""
                },
                {
                  "displayName": "Consolas",
                  "value": "Consolas"
                },
                {
                  "displayName": "Constantia",
                  "value": "Constantia"
                },
                {
                  "displayName": "Corbel",
                  "value": "Corbel"
                },
                {
                  "displayName": "Courier New",
                  "value": "\"Courier New\""
                },
                {
                  "displayName": "Georgia",
                  "value": "Georgia"
                },
                {
                  "displayName": "Lucida Sans Unicode",
                  "value": "\"Lucida Sans Unicode\""
                },
                {
                  "displayName": "Segoe (Bold)",
                  "value": "\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI",
                  "value": "\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Segoe UI Light",
                  "value": "\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"
                },
                {
                  "displayName": "Symbol",
                  "value": "Symbol"
                },
                {
                  "displayName": "Tahoma",
                  "value": "Tahoma"
                },
                {
                  "displayName": "Times New Roman",
                  "value": "\"Times New Roman\""
                },
                {
                  "displayName": "Trebuchet MS",
                  "value": "\"Trebuchet MS\""
                },
                {
                  "displayName": "Verdana",
                  "value": "Verdana"
                },
                {
                  "displayName": "Wingdings",
                  "value": "Wingdings"
                }
              ]
            }
          },
          "showBackground": {
            "displayName": "Show background",
            "displayNameKey": "Visual_CategoryLabels_ShowBackground",
            "type": {
              "bool": true
            }
          },
          "transparency": {
            "displayName": "Transparency",
            "displayNameKey": "Visual_CategoryLabels_Transparency",
            "description": "Set transparency for background color",
            "type": {
              "numeric": true
            }
          },
          "backgroundColor": {
            "displayName": "Background Color",
            "displayNameKey": "Visual_CategoryLabels_BackgroundColor",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          }
        }
      },
      "constantLine": {
        "displayName": "Constant line",
        "properties": {
          "show": {
            "displayName": "Show",
            "type": {
              "bool": true
            }
          },
          "name": {
            "displayName": "Name",
            "type": {
              "text": true
            }
          },
          "value": {
            "displayName": "Value",
            "type": {
              "numeric": true
            }
          },
          "lineColor": {
            "displayName": "Color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "transparency": {
            "displayName": "Transparency",
            "type": {
              "numeric": true
            }
          },
          "lineStyle": {
            "displayName": "Line style",
            "displayNameKey": "Visual_Axis_LineStyle",
            "type": {
              "enumeration": [
                {
                  "displayName": "Dashed",
                  "description": "Dashed",
                  "value": "dashed"
                },
                {
                  "displayName": "Solid",
                  "description": "Solid",
                  "value": "solid"
                },
                {
                  "displayName": "Dotted",
                  "description": "Dotted",
                  "value": "dotted"
                }
              ]
            }
          },
          "position": {
            "displayName": "Position",
            "type": {
              "enumeration": [
                {
                  "displayName": "Behind",
                  "description": "Behind",
                  "value": "behind"
                },
                {
                  "displayName": "In front",
                  "description": "In front",
                  "value": "front"
                }
              ]
            }
          },
          "dataLabelShow": {
            "displayName": "Data label",
            "type": {
              "bool": true
            }
          },
          "fontColor": {
            "displayName": "Color",
            "type": {
              "fill": {
                "solid": {
                  "color": true
                }
              }
            }
          },
          "text": {
            "displayName": "Text",
            "type": {
              "enumeration": [
                {
                  "displayName": "Value",
                  "description": "Value",
                  "value": "value"
                },
                {
                  "displayName": "Name",
                  "description": "Name",
                  "value": "name"
                },
                {
                  "displayName": "Name and Value",
                  "description": "Name and Value",
                  "value": "nameAndValue"
                }
              ]
            }
          },
          "horizontalPosition": {
            "displayName": "Horizontal Position",
            "type": {
              "enumeration": [
                {
                  "displayName": "Left",
                  "description": "Left",
                  "value": "left"
                },
                {
                  "displayName": "Right",
                  "description": "Right",
                  "value": "right"
                }
              ]
            }
          },
          "verticalPosition": {
            "displayName": "Vertical Position",
            "type": {
              "enumeration": [
                {
                  "displayName": "Top",
                  "description": "Top",
                  "value": "top"
                },
                {
                  "displayName": "Bottom",
                  "description": "Bottom",
                  "value": "bottom"
                }
              ]
            }
          },
          "displayUnits": {
            "displayName": "Display units",
            "type": {
              "formatting": {
                "labelDisplayUnits": true
              }
            }
          },
          "precision": {
            "displayName": "Decimal Places",
            "placeHolderText": "Auto",
            "type": {
              "numeric": true
            }
          }
        }
      }
    },
    "dataViewMappings": [
      {
        "conditions": [
          {
            "Axis": {
              "min": 0
            },
            "Legend": {
              "min": 1,
              "max": 1
            },
            "Value": {
              "max": 1
            },
            "Gradient": {
              "max": 0
            },
            "ColumnBy": {
              "max": 1
            },
            "RowBy": {
              "max": 1
            },
            "Tooltips": {
              "min": 0
            }
          }
        ],
        "categorical": {
          "categories": {
            "select": [
              {
                "for": {
                  "in": "Axis"
                },
                "dataReductionAlgorithm": {
                  "top": {
                    "count": 30000
                  }
                }
              },
              {
                "for": {
                  "in": "ColumnBy"
                }
              },
              {
                "for": {
                  "in": "RowBy"
                }
              }
            ]
          },
          "values": {
            "group": {
              "by": "Legend",
              "select": [
                {
                  "bind": {
                    "to": "Value"
                  }
                },
                {
                  "for": {
                    "in": "Tooltips"
                  }
                }
              ],
              "dataReductionAlgorithm": {
                "top": {
                  "count": 30000
                }
              }
            }
          }
        }
      },
      {
        "conditions": [
          {
            "Axis": {
              "min": 0
            },
            "Legend": {
              "max": 0
            },
            "Value": {
              "min": 2
            },
            "Gradient": {
              "max": 0
            },
            "ColumnBy": {
              "max": 1
            },
            "RowBy": {
              "max": 1
            },
            "Tooltips": {
              "min": 0
            }
          }
        ],
        "categorical": {
          "categories": {
            "select": [
              {
                "for": {
                  "in": "Axis"
                },
                "dataReductionAlgorithm": {
                  "top": {
                    "count": 30000
                  }
                }
              },
              {
                "for": {
                  "in": "ColumnBy"
                }
              },
              {
                "for": {
                  "in": "RowBy"
                }
              }
            ]
          },
          "values": {
            "select": [
              {
                "for": {
                  "in": "Value"
                }
              },
              {
                "for": {
                  "in": "Tooltips"
                }
              }
            ],
            "dataReductionAlgorithm": {
              "top": {
                "count": 30000
              }
            }
          }
        }
      },
      {
        "conditions": [
          {
            "Axis": {
              "min": 0
            },
            "Legend": {
              "max": 0
            },
            "Value": {
              "min": 0,
              "max": 1
            },
            "Gradient": {
              "max": 1
            },
            "ColumnBy": {
              "max": 1
            },
            "RowBy": {
              "max": 1
            },
            "Tooltips": {
              "min": 0
            }
          }
        ],
        "categorical": {
          "categories": {
            "select": [
              {
                "for": {
                  "in": "Axis"
                },
                "dataReductionAlgorithm": {
                  "top": {
                    "count": 30000
                  }
                }
              },
              {
                "for": {
                  "in": "ColumnBy"
                }
              },
              {
                "for": {
                  "in": "RowBy"
                }
              }
            ]
          },
          "values": {
            "select": [
              {
                "for": {
                  "in": "Value"
                }
              },
              {
                "for": {
                  "in": "Tooltips"
                }
              },
              {
                "for": {
                  "in": "Gradient"
                }
              }
            ],
            "dataReductionAlgorithm": {
              "top": {
                "count": 30000
              }
            }
          }
        }
      }
    ],
    "supportsHighlight": true,
    "drilldown": {
      "roles": [
        "Axis"
      ]
    }
  },
  "stringResources": {},
  "content": {
    "js": "!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function r(t){return!isNaN(t)}function a(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}function o(t){return t.length}function l(t){for(var e=1;t*e%1;)e*=10;return e}function s(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(t){return(t+=\"\")===So||t[0]===wo?wo+t:t}function h(t){return(t+=\"\")[0]===wo?t.slice(1):t}function f(t){return c(t)in this._}function d(t){return(t=c(t))in this._&&delete this._[t]}function g(){var t=[];for(var e in this._)t.push(h(e));return t}function p(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(t){return t}function x(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=Mo.length;i>n;++n){var r=Mo[n]+e;if(r in t)return r}}function S(){}function w(){}function M(t){function e(){for(var e,i=n,r=-1,a=i.length;++r<a;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new u;return e.on=function(e,r){var a,o=i.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function C(){lo.event.preventDefault()}function T(){for(var t,e=lo.event;t=e.sourceEvent;)e=t;return e}function P(t){for(var e=new w,n=0,i=arguments.length;++n<i;)e[arguments[n]]=M(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=lo.event;r.target=t,lo.event=r,e[r.type].apply(n,i)}finally{lo.event=a}}},e}function D(t){return To(t,Lo),t}function A(t){return\"function\"==typeof t?t:function(){return Po(t,this)}}function L(t){return\"function\"==typeof t?t:function(){return Do(t,this)}}function E(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function l(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=lo.ns.qualify(t),null==e?t.local?i:n:\"function\"==typeof e?t.local?l:o:t.local?a:r}function F(t){return t.trim().replace(/\\s+/g,\" \")}function k(t){return new RegExp(\"(?:^|\\\\s+)\"+lo.requote(t)+\"(?:\\\\s+|$)\",\"g\")}function N(t){return(t+\"\").trim().split(/^|\\s+/)}function _(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=N(t).map(I);var r=t.length;return\"function\"==typeof e?i:n}function I(t){var e=k(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute(\"class\")||\"\";i?(e.lastIndex=0,e.test(r)||n.setAttribute(\"class\",F(r+\" \"+t))):n.setAttribute(\"class\",F(r.replace(e,\" \")))}}function O(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function a(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:\"function\"==typeof e?a:r}function B(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:\"function\"==typeof e?r:i}function z(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Eo&&e.documentElement.namespaceURI===Eo?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return\"function\"==typeof t?t:(t=lo.ns.qualify(t)).local?n:e}function R(){var t=this.parentNode;t&&t.removeChild(this)}function V(t){return{__data__:t}}function U(t){return function(){return Ao(this,t)}}function W(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function H(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,a=t[n],o=0,l=a.length;l>o;o++)(r=a[o])&&e(r,o,n);return t}function G(t){return To(t,ko),t}function j(t){var e,n;return function(i,r,a){var o,l=t[a].update,s=l.length;for(a!=n&&(n=a,e=0),r>=e&&(e=r+1);!(o=l[e])&&++e<s;);return o}}function q(t,e,n){function i(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function r(){var r=s(e,uo(arguments));i.call(this),this.addEventListener(t,this[o]=r,r.$=n),r._=e}function a(){var e,n=new RegExp(\"^__on([^.]+)\"+lo.requote(t)+\"$\");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var o=\"__on\"+t,l=t.indexOf(\".\"),s=Y;l>0&&(t=t.slice(0,l));var u=No.get(t);return u&&(t=u,s=X),l?e?r:i:e?S:a}function Y(t,e){return function(n){var i=lo.event;lo.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{lo.event=i}}}function X(t,e){var n=Y(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function Q(n){var i=\".dragsuppress-\"+ ++Io,r=\"click\"+i,a=lo.select(e(n)).on(\"touchmove\"+i,C).on(\"dragstart\"+i,C).on(\"selectstart\"+i,C);if(null==_o&&(_o=\"onselectstart\"in n?!1:b(n.style,\"userSelect\")),_o){var o=t(n).style,l=o[_o];o[_o]=\"none\"}return function(t){if(a.on(i,null),_o&&(o[_o]=l),t){var e=function(){a.on(r,null)};a.on(r,function(){C(),e()},!0),setTimeout(e,0)}}}function K(t,n){n.changedTouches&&(n=n.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>Oo){var a=e(t);if(a.scrollX||a.scrollY){i=lo.select(\"body\").append(\"svg\").style({position:\"absolute\",top:0,left:0,margin:0,padding:0,border:\"none\"},\"important\");var o=i[0][0].getScreenCTM();Oo=!(o.f||o.e),i.remove()}}return Oo?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}function $(){return lo.event.changedTouches[0].identifier}function Z(t){return t>0?1:0>t?-1:0}function J(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:-1>t?Ro:Math.acos(t)}function et(t){return t>1?Wo:-1>t?-Wo:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function rt(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ot(){}function lt(t,e,n){return this instanceof lt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):St(\"\"+t,wt,lt):new lt(t,e,n)}function st(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function r(t){return Math.round(255*i(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,new mt(r(t+120),r(t),r(t-120))}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=Mt((t=lo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ut(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ht(n,Math.cos(t*=Ho)*e,Math.sin(t)*e)}function ht(t,e,n){return this instanceof ht?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ut?ct(t.h,t.c,t.l):Mt((t=mt(t)).r,t.g,t.b):new ht(t,e,n)}function ft(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return r=gt(r)*tl,i=gt(i)*el,a=gt(a)*nl,new mt(vt(3.2404542*r-1.5371385*i-.4985314*a),vt(-.969266*r+1.8760108*i+.041556*a),vt(.0556434*r-.2040259*i+1.0572252*a))}function dt(t,e,n){return t>0?new ut(Math.atan2(n,e)*Go,Math.sqrt(e*e+n*n),t):new ut(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function pt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,e,n){return this instanceof mt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):St(\"\"+t,mt,st):new mt(t,e,n)}function yt(t){return new mt(t>>16,t>>8&255,255&t)}function xt(t){return yt(t)+\"\"}function bt(t){return 16>t?\"0\"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function St(t,e,n){var i,r,a,o=0,l=0,s=0;if(i=/([a-z]+)\\((.*)\\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(\",\"),i[1]){case\"hsl\":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case\"rgb\":return e(Tt(r[0]),Tt(r[1]),Tt(r[2]))}return(a=al.get(t))?e(a.r,a.g,a.b):(null==t||\"#\"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o=o>>4|o,l=240&a,l=l>>4|l,s=15&a,s=s<<4|s):7===t.length&&(o=(16711680&a)>>16,l=(65280&a)>>8,s=255&a)),e(o,l,s))}function wt(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),l=o-a,s=(o+a)/2;return l?(r=.5>s?l/(o+a):l/(2-o-a),i=t==o?(e-n)/l+(n>e?6:0):e==o?(n-t)/l+2:(t-e)/l+4,i*=60):(i=NaN,r=s>0&&1>s?0:i),new lt(i,r,s)}function Mt(t,e,n){t=Ct(t),e=Ct(e),n=Ct(n);var i=pt((.4124564*t+.3575761*e+.1804375*n)/tl),r=pt((.2126729*t+.7151522*e+.072175*n)/el),a=pt((.0193339*t+.119192*e+.9503041*n)/nl);return ht(116*r-16,500*(i-r),200*(r-a))}function Ct(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tt(t){var e=parseFloat(t);return\"%\"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Pt(t){return\"function\"==typeof t?t:function(){return t}}function Dt(t){return function(e,n,i){return 2===arguments.length&&\"function\"==typeof n&&(i=n,n=null),At(e,n,t,i)}}function At(t,e,n,i){function r(){var t,e=s.status;if(!e&&Et(s)||e>=200&&300>e||304===e){try{t=n.call(a,s)}catch(i){return void o.error.call(a,i)}o.load.call(a,t)}else o.error.call(a,s)}var a={},o=lo.dispatch(\"beforesend\",\"progress\",\"load\",\"error\"),l={},s=new XMLHttpRequest,u=null;return!this.XDomainRequest||\"withCredentials\"in s||!/^(http(s)?:)?\\/\\//.test(t)||(s=new XDomainRequest),\"onload\"in s?s.onload=s.onerror=r:s.onreadystatechange=function(){s.readyState>3&&r()},s.onprogress=function(t){var e=lo.event;lo.event=t;try{o.progress.call(a,s)}finally{lo.event=e}},a.header=function(t,e){return t=(t+\"\").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+\"\",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+\"\",a):e},a.responseType=function(t){return arguments.length?(u=t,a):u},a.response=function(t){return n=t,a},[\"get\",\"post\"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(uo(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&\"function\"==typeof i&&(r=i,i=null),s.open(n,t,!0),null==e||\"accept\"in l||(l.accept=e+\",*/*\"),s.setRequestHeader)for(var c in l)s.setRequestHeader(c,l[c]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=u&&(s.responseType=u),null!=r&&a.on(\"error\",r).on(\"load\",function(t){r(null,t)}),o.beforesend.call(a,s),s.send(null==i?null:i),a},a.abort=function(){return s.abort(),a},lo.rebind(a,o,\"on\"),null==i?a:a.get(Lt(i))}function Lt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Et(t){var e=t.responseType;return e&&\"text\"!==e?t.response:t.responseText}function Ft(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,a={c:t,t:r,n:null};return ll?ll.n=a:ol=a,ll=a,sl||(ul=clearTimeout(ul),sl=1,cl(kt)),a}function kt(){var t=Nt(),e=_t()-t;e>24?(isFinite(e)&&(clearTimeout(ul),ul=setTimeout(kt,e)),sl=0):(sl=1,cl(kt))}function Nt(){for(var t=Date.now(),e=ol;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function _t(){for(var t,e=ol,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ol=e.n;return ll=t,n}function It(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Ot(t,e){var n=Math.pow(10,3*bo(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Bt(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,a=i&&n?function(t,e){for(var r=t.length,a=[],o=0,l=i[0],s=0;r>0&&l>0&&(s+l+1>e&&(l=Math.max(1,e-s)),a.push(t.substring(r-=l,r+l)),!((s+=l+1)>e));)l=i[o=(o+1)%i.length];return a.reverse().join(n)}:y;return function(t){var n=fl.exec(t),i=n[1]||\" \",o=n[2]||\">\",l=n[3]||\"-\",s=n[4]||\"\",u=n[5],c=+n[6],h=n[7],f=n[8],d=n[9],g=1,p=\"\",v=\"\",m=!1,y=!0;switch(f&&(f=+f.substring(1)),(u||\"0\"===i&&\"=\"===o)&&(u=i=\"0\",o=\"=\"),d){case\"n\":h=!0,d=\"g\";break;case\"%\":g=100,v=\"%\",d=\"f\";break;case\"p\":g=100,v=\"%\",d=\"r\";break;case\"b\":case\"o\":case\"x\":case\"X\":\"#\"===s&&(p=\"0\"+d.toLowerCase());case\"c\":y=!1;case\"d\":m=!0,f=0;break;case\"s\":g=-1,d=\"r\"}\"$\"===s&&(p=r[0],v=r[1]),\"r\"!=d||f||(d=\"g\"),null!=f&&(\"g\"==d?f=Math.max(1,Math.min(21,f)):\"e\"!=d&&\"f\"!=d||(f=Math.max(0,Math.min(20,f)))),d=dl.get(d)||zt;var x=u&&h;return function(t){var n=v;if(m&&t%1)return\"\";var r=0>t||0===t&&0>1/t?(t=-t,\"-\"):\"-\"===l?\"\":l;if(0>g){var s=lo.formatPrefix(t,f);t=s.scale(t),n=s.symbol+v}else t*=g;t=d(t,f);var b,S,w=t.lastIndexOf(\".\");if(0>w){var M=y?t.lastIndexOf(\"e\"):-1;0>M?(b=t,S=\"\"):(b=t.substring(0,M),S=t.substring(M))}else b=t.substring(0,w),S=e+t.substring(w+1);!u&&h&&(b=a(b,1/0));var C=p.length+b.length+S.length+(x?0:r.length),T=c>C?new Array(C=c-C+1).join(i):\"\";return x&&(b=a(T+b,T.length?c-S.length:1/0)),r+=p,t=b+S,(\"<\"===o?r+t+T:\">\"===o?T+r+t:\"^\"===o?T.substring(0,C>>=1)+r+t+T.substring(C):r+(x?t:T+t))+n}}}function zt(t){return t+\"\"}function Rt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Vt(t,e,n){function i(e){var n=t(e),i=a(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new pl(n-1)),1),n}function a(t,n){return e(t=new pl(+t),n),t}function o(t,i,a){var o=r(t),l=[];if(a>1)for(;i>o;)n(o)%a||l.push(new Date(+o)),e(o,1);else for(;i>o;)l.push(new Date(+o)),e(o,1);return l}function l(t,e,n){try{pl=Rt;var i=new Rt;return i._=t,o(i,e,n)}finally{pl=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=o;var s=t.utc=Ut(t);return s.floor=s,s.round=Ut(i),s.ceil=Ut(r),s.offset=Ut(a),s.range=l,t}function Ut(t){return function(e,n){try{pl=Rt;var i=new Rt;return i._=e,t(i,n)._}finally{pl=Date}}}function Wt(t){function e(t){function e(e){for(var n,r,a,o=[],l=-1,s=0;++l<i;)37===t.charCodeAt(l)&&(o.push(t.slice(s,l)),null!=(r=ml[n=t.charAt(++l)])&&(n=t.charAt(++l)),(a=A[n])&&(n=a(e,null==r?\"e\"===n?\" \":\"0\":r)),o.push(n),s=l+1);return o.push(t.slice(s,l)),o.join(\"\")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;\"p\"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&pl!==Rt,o=new(a?Rt:pl);return\"j\"in i?o.setFullYear(i.y,0,i.j):\"W\"in i||\"U\"in i?(\"w\"in i||(i.w=\"W\"in i?1:0),o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,\"W\"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,a,o,l=0,s=e.length,u=n.length;s>l;){if(i>=u)return-1;if(r=e.charCodeAt(l++),37===r){if(o=e.charAt(l++),a=L[o in ml?e.charAt(l++):o],!a||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){w.lastIndex=0;var i=w.exec(e.slice(n));return i?(t.w=M.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){b.lastIndex=0;var i=b.exec(e.slice(n));return i?(t.w=S.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){P.lastIndex=0;var i=P.exec(e.slice(n));return i?(t.m=D.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){C.lastIndex=0;var i=C.exec(e.slice(n));return i?(t.m=T.get(i[0].toLowerCase()),n+i[0].length):-1}function l(t,e,i){return n(t,A.c.toString(),e,i)}function s(t,e,i){return n(t,A.x.toString(),e,i)}function u(t,e,i){return n(t,A.X.toString(),e,i)}function c(t,e,n){var i=x.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var h=t.dateTime,f=t.date,d=t.time,g=t.periods,p=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{pl=Rt;var e=new pl;return e._=t,i(e)}finally{pl=Date}}var i=e(t);return n.parse=function(t){try{pl=Rt;var e=i.parse(t);return e&&e._}finally{pl=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=se;var x=lo.map(),b=Gt(p),S=jt(p),w=Gt(v),M=jt(v),C=Gt(m),T=jt(m),P=Gt(y),D=jt(y);g.forEach(function(t,e){x.set(t.toLowerCase(),e)});var A={a:function(t){return v[t.getDay()]},A:function(t){return p[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(h),d:function(t,e){return Ht(t.getDate(),e,2)},e:function(t,e){return Ht(t.getDate(),e,2)},H:function(t,e){return Ht(t.getHours(),e,2)},I:function(t,e){return Ht(t.getHours()%12||12,e,2)},j:function(t,e){return Ht(1+gl.dayOfYear(t),e,3)},L:function(t,e){return Ht(t.getMilliseconds(),e,3)},m:function(t,e){return Ht(t.getMonth()+1,e,2)},M:function(t,e){return Ht(t.getMinutes(),e,2)},p:function(t){return g[+(t.getHours()>=12)]},S:function(t,e){return Ht(t.getSeconds(),e,2)},U:function(t,e){return Ht(gl.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ht(gl.mondayOfYear(t),e,2)},x:e(f),X:e(d),y:function(t,e){return Ht(t.getFullYear()%100,e,2)},Y:function(t,e){return Ht(t.getFullYear()%1e4,e,4)},Z:oe,\"%\":function(){return\"%\"}},L={a:i,A:r,b:a,B:o,c:l,d:te,e:te,H:ne,I:ne,j:ee,L:ae,m:Jt,M:ie,p:c,S:re,U:Yt,w:qt,W:Xt,x:s,X:u,y:Kt,Y:Qt,Z:$t,\"%\":le};return e}function Ht(t,e,n){var i=0>t?\"-\":\"\",r=(i?-t:t)+\"\",a=r.length;return i+(n>a?new Array(n-a+1).join(e)+r:r)}function Gt(t){return new RegExp(\"^(?:\"+t.map(lo.requote).join(\"|\")+\")\",\"i\")}function jt(t){for(var e=new u,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function qt(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Yt(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Xt(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Qt(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Kt(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+2));return i?(t.y=Zt(+i[0]),n+i[0].length):-1}function $t(t,e,n){return/^[+-]\\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Zt(t){return t+(t>68?1900:2e3)}function Jt(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function te(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ee(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function ne(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ie(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function re(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function ae(t,e,n){yl.lastIndex=0;var i=yl.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function oe(t){var e=t.getTimezoneOffset(),n=e>0?\"-\":\"+\",i=bo(e)/60|0,r=bo(e)%60;return n+Ht(i,\"0\",2)+Ht(r,\"0\",2)}function le(t,e,n){xl.lastIndex=0;var i=xl.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function se(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function ue(){}function ce(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function he(t,e){t&&Ml.hasOwnProperty(t.type)&&Ml[t.type](t,e)}function fe(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function de(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fe(t[n],e,1);e.polygonEnd()}function ge(){function t(t,e){t*=Ho,e=e*Ho/2+Ro/4;var n=t-i,o=n>=0?1:-1,l=o*n,s=Math.cos(e),u=Math.sin(e),c=a*u,h=r*s+c*Math.cos(l),f=c*o*Math.sin(l);Tl.add(Math.atan2(f,h)),i=t,r=s,a=u}var e,n,i,r,a;Pl.point=function(o,l){Pl.point=t,i=(e=o)*Ho,r=Math.cos(l=(n=l)*Ho/2+Ro/4),a=Math.sin(l)},Pl.lineEnd=function(){t(e,n)}}function pe(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function me(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ye(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Se(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function we(t,e){return bo(t[0]-e[0])<Bo&&bo(t[1]-e[1])<Bo}function Me(t,e){t*=Ho;var n=Math.cos(e*=Ho);Ce(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ce(t,e,n){++Dl,Ll+=(t-Ll)/Dl,El+=(e-El)/Dl,Fl+=(n-Fl)/Dl}function Te(){function t(t,r){t*=Ho;var a=Math.cos(r*=Ho),o=a*Math.cos(t),l=a*Math.sin(t),s=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*s-i*l)*u+(u=i*o-e*s)*u+(u=e*l-n*o)*u),e*o+n*l+i*s);Al+=u,kl+=u*(e+(e=o)),Nl+=u*(n+(n=l)),_l+=u*(i+(i=s)),Ce(e,n,i)}var e,n,i;zl.point=function(r,a){r*=Ho;var o=Math.cos(a*=Ho);e=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),zl.point=t,Ce(e,n,i)}}function Pe(){zl.point=Me}function De(){function t(t,e){t*=Ho;var n=Math.cos(e*=Ho),o=n*Math.cos(t),l=n*Math.sin(t),s=Math.sin(e),u=r*s-a*l,c=a*o-i*s,h=i*l-r*o,f=Math.sqrt(u*u+c*c+h*h),d=i*o+r*l+a*s,g=f&&-tt(d)/f,p=Math.atan2(f,d);Il+=g*u,Ol+=g*c,Bl+=g*h,Al+=p,kl+=p*(i+(i=o)),Nl+=p*(r+(r=l)),_l+=p*(a+(a=s)),Ce(i,r,a)}var e,n,i,r,a;zl.point=function(o,l){e=o,n=l,zl.point=t,o*=Ho;var s=Math.cos(l*=Ho);i=s*Math.cos(o),r=s*Math.sin(o),a=Math.sin(l),Ce(i,r,a)},zl.lineEnd=function(){t(e,n),zl.lineEnd=Pe,zl.point=Me}}function Ae(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Le(){return!0}function Ee(t,e,n,i,r){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(we(n,i)){r.lineStart();for(var l=0;e>l;++l)r.point((n=t[l])[0],n[1]);return void r.lineEnd()}var s=new ke(n,t,null,!0),u=new ke(n,null,s,!1);s.o=u,a.push(s),o.push(u),s=new ke(i,t,null,!1),u=new ke(i,null,s,!0),s.o=u,a.push(s),o.push(u)}}),o.sort(e),Fe(a),Fe(o),a.length){for(var l=0,s=n,u=o.length;u>l;++l)o[l].e=s=!s;for(var c,h,f=a[0];;){for(var d=f,g=!0;d.v;)if((d=d.n)===f)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(g)for(var l=0,u=c.length;u>l;++l)r.point((h=c[l])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(g){c=d.p.z;for(var l=c.length-1;l>=0;--l)r.point((h=c[l])[0],h[1])}else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,g=!g}while(!d.v);r.lineEnd()}}}function Fe(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function ke(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Ne(t,e,n,i){return function(r,a){function o(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function l(t,e){var n=r(t,e);v.point(n[0],n[1])}function s(){y.point=l,v.lineStart()}function u(){y.point=o,v.lineEnd()}function c(t,e){p.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function h(){b.lineStart(),p=[]}function f(){c(p[0][0],p[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),i=n.length;if(p.pop(),g.push(p),p=null,i)if(1&e){t=n[0];var r,i=t.length-1,o=-1;if(i>0){for(S||(a.polygonStart(),S=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(_e))}var d,g,p,v=e(a),m=r.invert(i[0],i[1]),y={point:o,lineStart:s,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=h,y.lineEnd=f,d=[],g=[]},polygonEnd:function(){y.point=o,y.lineStart=s,y.lineEnd=u,d=lo.merge(d);var t=Ve(m,g);d.length?(S||(a.polygonStart(),S=!0),Ee(d,Oe,t,n,a)):t&&(S||(a.polygonStart(),S=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),S&&(a.polygonEnd(),S=!1),d=g=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},x=Ie(),b=e(x),S=!1;return y}}function _e(t){return t.length>1}function Ie(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:S,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Oe(t,e){return((t=t.x)[0]<0?t[1]-Wo-Bo:Wo-t[1])-((e=e.x)[0]<0?e[1]-Wo-Bo:Wo-e[1])}function Be(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var l=a>0?Ro:-Ro,s=bo(a-n);bo(s-Ro)<Bo?(t.point(n,i=(i+o)/2>0?Wo:-Wo),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),t.point(a,i),e=0):r!==l&&s>=Ro&&(bo(n-r)<Bo&&(n-=r*Bo),bo(a-l)<Bo&&(a-=l*Bo),i=ze(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),e=0),t.point(n=a,i=o),r=l},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function ze(t,e,n,i){var r,a,o=Math.sin(t-n);return bo(o)>Bo?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}function Re(t,e,n,i){var r;if(null==t)r=n*Wo,i.point(-Ro,r),i.point(0,r),i.point(Ro,r),i.point(Ro,0),i.point(Ro,-r),i.point(0,-r),i.point(-Ro,-r),i.point(-Ro,0),i.point(-Ro,r);else if(bo(t[0]-e[0])>Bo){var a=t[0]<e[0]?Ro:-Ro;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}function Ve(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Tl.reset();for(var l=0,s=e.length;s>l;++l){var u=e[l],c=u.length;if(c)for(var h=u[0],f=h[0],d=h[1]/2+Ro/4,g=Math.sin(d),p=Math.cos(d),v=1;;){v===c&&(v=0),t=u[v];var m=t[0],y=t[1]/2+Ro/4,x=Math.sin(y),b=Math.cos(y),S=m-f,w=S>=0?1:-1,M=w*S,C=M>Ro,T=g*x;if(Tl.add(Math.atan2(T*w*Math.sin(M),p*b+T*Math.cos(M))),a+=C?S+w*Vo:S,C^f>=n^m>=n){var P=me(pe(h),pe(t));be(P);var D=me(r,P);be(D);var A=(C^S>=0?-1:1)*et(D[2]);(i>A||i===A&&(P[0]||P[1]))&&(o+=C^S>=0?1:-1)}if(!v++)break;f=m,g=x,p=b,h=t}}return(-Bo>a||Bo>a&&-Bo>Tl)^1&o}function Ue(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,s,u,c;return{lineStart:function(){u=s=!1,c=1},point:function(h,f){var d,g=[h,f],p=e(h,f),v=o?p?0:r(h,f):p?r(h+(0>h?Ro:-Ro),f):0;if(!n&&(u=s=p)&&t.lineStart(),p!==s&&(d=i(n,g),(we(n,d)||we(g,d))&&(g[0]+=Bo,g[1]+=Bo,p=e(g[0],g[1]))),p!==s)c=0,p?(t.lineStart(),d=i(g,n),t.point(d[0],d[1])):(d=i(n,g),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(l&&n&&o^p){var m;v&a||!(m=i(g,n,!0))||(c=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!p||n&&we(n,g)||t.point(g[0],g[1]),n=g,s=p,a=v},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(u&&s)<<1}}}function i(t,e,n){var i=pe(t),r=pe(e),o=[1,0,0],l=me(i,r),s=ve(l,l),u=l[0],c=s-u*u;if(!c)return!n&&t;var h=a*s/c,f=-a*u/c,d=me(o,l),g=xe(o,h),p=xe(l,f);ye(g,p);var v=d,m=ve(g,v),y=ve(v,v),x=m*m-y*(ve(g,g)-1);if(!(0>x)){var b=Math.sqrt(x),S=xe(v,(-m-b)/y);if(ye(S,g),S=Se(S),!n)return S;var w,M=t[0],C=e[0],T=t[1],P=e[1];M>C&&(w=M,M=C,C=w);var D=C-M,A=bo(D-Ro)<Bo,L=A||Bo>D;if(!A&&T>P&&(w=T,T=P,P=w),L?A?T+P>0^S[1]<(bo(S[0]-M)<Bo?T:P):T<=S[1]&&S[1]<=P:D>Ro^(M<=S[0]&&S[0]<=C)){var E=xe(v,(-m+b)/y);return ye(E,g),[S,Se(E)]}}}function r(e,n){var i=o?t:Ro-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(t),o=a>0,l=bo(a)>Bo,s=pn(t,6*Ho);return Ne(e,n,s,o?[0,-t]:[-Ro,t-Ro])}function We(t,e,n,i){return function(r){var a,o=r.a,l=r.b,s=o.x,u=o.y,c=l.x,h=l.y,f=0,d=1,g=c-s,p=h-u;if(a=t-s,g||!(a>0)){if(a/=g,0>g){if(f>a)return;d>a&&(d=a)}else if(g>0){if(a>d)return;a>f&&(f=a)}if(a=n-s,g||!(0>a)){if(a/=g,0>g){if(a>d)return;a>f&&(f=a)}else if(g>0){if(f>a)return;d>a&&(d=a)}if(a=e-u,p||!(a>0)){if(a/=p,0>p){if(f>a)return;d>a&&(d=a)}else if(p>0){if(a>d)return;a>f&&(f=a)}if(a=i-u,p||!(0>a)){if(a/=p,0>p){if(a>d)return;a>f&&(f=a)}else if(p>0){if(f>a)return;d>a&&(d=a)}return f>0&&(r.a={x:s+f*g,y:u+f*p}),1>d&&(r.b={x:s+d*g,y:u+d*p}),r}}}}}}function He(t,e,n,i){function r(i,r){return bo(i[0]-t)<Bo?r>0?0:3:bo(i[0]-n)<Bo?r>0?2:1:bo(i[1]-e)<Bo?r>0?1:0:r>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(l){function s(t){for(var e=0,n=v.length,i=t[1],r=0;n>r;++r)for(var a,o=1,l=v[r],s=l.length,u=l[0];s>o;++o)a=l[o],u[1]<=i?a[1]>i&&J(u,a,t)>0&&++e:a[1]<=i&&J(u,a,t)<0&&--e,u=a;return 0!==e}function u(a,l,s,u){var c=0,h=0;if(null==a||(c=r(a,s))!==(h=r(l,s))||o(a,l)<0^s>0){do u.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+s+4)%4)!==h)}else u.point(l[0],l[1])}function c(r,a){return r>=t&&n>=r&&a>=e&&i>=a}function h(t,e){c(t,e)&&l.point(t,e)}function f(){L.point=g,v&&v.push(m=[]),C=!0,M=!1,S=w=NaN}function d(){p&&(g(y,x),b&&M&&D.rejoin(),p.push(D.buffer())),L.point=h,M&&l.lineEnd()}function g(t,e){t=Math.max(-Vl,Math.min(Vl,t)),e=Math.max(-Vl,Math.min(Vl,e));var n=c(t,e);if(v&&m.push([t,e]),C)y=t,x=e,b=n,C=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&M)l.point(t,e);else{var i={a:{x:S,y:w},b:{x:t,y:e}};A(i)?(M||(l.lineStart(),l.point(i.a.x,i.a.y)),l.point(i.b.x,i.b.y),n||l.lineEnd(),T=!1):n&&(l.lineStart(),l.point(t,e),T=!1)}S=t,w=e,M=n}var p,v,m,y,x,b,S,w,M,C,T,P=l,D=Ie(),A=We(t,e,n,i),L={point:h,lineStart:f,lineEnd:d,polygonStart:function(){l=D,p=[],v=[],T=!0},polygonEnd:function(){l=P,p=lo.merge(p);var e=s([t,i]),n=T&&e,r=p.length;(n||r)&&(l.polygonStart(),n&&(l.lineStart(),u(null,null,1,l),l.lineEnd()),r&&Ee(p,a,e,u,l),l.polygonEnd()),p=v=m=null}};return L}}function Ge(t){var e=0,n=Ro/3,i=ln(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ro/180,n=t[1]*Ro/180):[e/Ro*180,n/Ro*180]},r}function je(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,et((a-(t*t+n*n)*r*r)/(2*r))]},n}function qe(){function t(t,e){Wl+=r*t-i*e,i=t,r=e}var e,n,i,r;Yl.point=function(a,o){Yl.point=t,e=i=a,n=r=o},Yl.lineEnd=function(){t(e,n)}}function Ye(t,e){Hl>t&&(Hl=t),t>jl&&(jl=t),Gl>e&&(Gl=e),e>ql&&(ql=e)}function Xe(){function t(t,e){o.push(\"M\",t,\",\",e,a)}function e(t,e){o.push(\"M\",t,\",\",e),l.point=n}function n(t,e){o.push(\"L\",t,\",\",e)}function i(){l.point=t}function r(){o.push(\"Z\")}var a=Qe(4.5),o=[],l={point:t,lineStart:function(){l.point=e},lineEnd:i,polygonStart:function(){l.lineEnd=r},polygonEnd:function(){l.lineEnd=i,l.point=t},pointRadius:function(t){return a=Qe(t),l},result:function(){if(o.length){var t=o.join(\"\");return o=[],t}}};return l}function Qe(t){return\"m0,\"+t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+-2*t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+2*t+\"z\"}function Ke(t,e){Ll+=t,El+=e,++Fl}function $e(){function t(t,i){var r=t-e,a=i-n,o=Math.sqrt(r*r+a*a);kl+=o*(e+t)/2,Nl+=o*(n+i)/2,_l+=o,Ke(e=t,n=i)}var e,n;Ql.point=function(i,r){Ql.point=t,Ke(e=i,n=r)}}function Ze(){Ql.point=Ke}function Je(){function t(t,e){var n=t-i,a=e-r,o=Math.sqrt(n*n+a*a);kl+=o*(i+t)/2,Nl+=o*(r+e)/2,_l+=o,o=r*t-i*e,Il+=o*(i+t),Ol+=o*(r+e),Bl+=3*o,Ke(i=t,r=e)}var e,n,i,r;Ql.point=function(a,o){Ql.point=t,Ke(e=i=a,n=r=o)},Ql.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,Vo)}function n(e,n){t.moveTo(e,n),l.point=i}function i(e,n){t.lineTo(e,n)}function r(){l.point=e}function a(){t.closePath()}var o=4.5,l={point:e,lineStart:function(){l.point=n},lineEnd:r,polygonStart:function(){l.lineEnd=a},polygonEnd:function(){l.lineEnd=r,l.point=e},pointRadius:function(t){return o=t,l},result:S};return l}function en(t){function e(t){return(l?i:n)(t)}function n(e){return an(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){x=NaN,C.point=a,e.lineStart()}function a(n,i){var a=pe([n,i]),o=t(n,i);r(x,b,y,S,w,M,x=o[0],b=o[1],y=n,S=a[0],w=a[1],M=a[2],l,e),e.point(x,b)}function o(){C.point=n,e.lineEnd()}function s(){\ni(),C.point=u,C.lineEnd=c}function u(t,e){a(h=t,f=e),d=x,g=b,p=S,v=w,m=M,C.point=a}function c(){r(x,b,y,S,w,M,d,g,h,p,v,m,l,e),C.lineEnd=o,o()}var h,f,d,g,p,v,m,y,x,b,S,w,M,C={point:n,lineStart:i,lineEnd:o,polygonStart:function(){e.polygonStart(),C.lineStart=s},polygonEnd:function(){e.polygonEnd(),C.lineStart=i}};return C}function r(e,n,i,l,s,u,c,h,f,d,g,p,v,m){var y=c-e,x=h-n,b=y*y+x*x;if(b>4*a&&v--){var S=l+d,w=s+g,M=u+p,C=Math.sqrt(S*S+w*w+M*M),T=Math.asin(M/=C),P=bo(bo(M)-1)<Bo||bo(i-f)<Bo?(i+f)/2:Math.atan2(w,S),D=t(P,T),A=D[0],L=D[1],E=A-e,F=L-n,k=x*E-y*F;(k*k/b>a||bo((y*E+x*F)/b-.5)>.3||o>l*d+s*g+u*p)&&(r(e,n,i,l,s,u,A,L,P,S/=C,w/=C,M,v,m),m.point(A,L),r(A,L,P,S,w,M,c,h,f,d,g,p,v,m))}}var a=.5,o=Math.cos(30*Ho),l=16;return e.precision=function(t){return arguments.length?(l=(a=t*t)>0&&16,e):Math.sqrt(a)},e}function nn(t){var e=en(function(e,n){return t([e*Go,n*Go])});return function(t){return sn(e(t))}}function rn(t){this.stream=t}function an(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function on(t){return ln(function(){return t})()}function ln(t){function e(t){return t=l(t[0]*Ho,t[1]*Ho),[t[0]*f+s,u-t[1]*f]}function n(t){return t=l.invert((t[0]-s)/f,(u-t[1])/f),t&&[t[0]*Go,t[1]*Go]}function i(){l=Ae(o=hn(m,x,b),a);var t=a(p,v);return s=d-t[0]*f,u=g+t[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),e}var a,o,l,s,u,c,h=en(function(t,e){return t=a(t,e),[t[0]*f+s,u-t[1]*f]}),f=150,d=480,g=250,p=0,v=0,m=0,x=0,b=0,S=Rl,w=y,M=null,C=null;return e.stream=function(t){return c&&(c.valid=!1),c=sn(S(o,h(w(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(S=null==t?(M=t,Rl):Ue((M=+t)*Ho),r()):M},e.clipExtent=function(t){return arguments.length?(C=t,w=t?He(t[0][0],t[0][1],t[1][0],t[1][1]):y,r()):C},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(d=+t[0],g=+t[1],i()):[d,g]},e.center=function(t){return arguments.length?(p=t[0]%360*Ho,v=t[1]%360*Ho,i()):[p*Go,v*Go]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Ho,x=t[1]%360*Ho,b=t.length>2?t[2]%360*Ho:0,i()):[m*Go,x*Go,b*Go]},lo.rebind(e,h,\"precision\"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function sn(t){return an(t,function(e,n){t.point(e*Ho,n*Ho)})}function un(t,e){return[t,e]}function cn(t,e){return[t>Ro?t-Vo:-Ro>t?t+Vo:t,e]}function hn(t,e,n){return t?e||n?Ae(dn(t),gn(e,n)):dn(t):e||n?gn(e,n):cn}function fn(t){return function(e,n){return e+=t,[e>Ro?e-Vo:-Ro>e?e+Vo:e,n]}}function dn(t){var e=fn(t);return e.invert=fn(-t),e}function gn(t,e){function n(t,e){var n=Math.cos(e),l=Math.cos(t)*n,s=Math.sin(t)*n,u=Math.sin(e),c=u*i+l*r;return[Math.atan2(s*a-c*o,l*i-u*r),et(c*a+s*o)]}var i=Math.cos(t),r=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),l=Math.cos(t)*n,s=Math.sin(t)*n,u=Math.sin(e),c=u*a-s*o;return[Math.atan2(s*a+u*o,l*i+c*r),et(c*i-l*r)]},n}function pn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,a,o,l){var s=o*e;null!=r?(r=vn(n,r),a=vn(n,a),(o>0?a>r:r>a)&&(r+=o*Vo)):(r=t+o*Vo,a=t-.5*s);for(var u,c=r;o>0?c>a:a>c;c-=s)l.point((u=Se([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],u[1])}}function vn(t,e){var n=pe(e);n[0]-=t,be(n);var i=tt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Bo)%(2*Math.PI)}function mn(t,e,n){var i=lo.range(t,e-Bo,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function yn(t,e,n){var i=lo.range(t,e-Bo,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function xn(t){return t.source}function bn(t){return t.target}function Sn(t,e,n,i){var r=Math.cos(e),a=Math.sin(e),o=Math.cos(i),l=Math.sin(i),s=r*Math.cos(t),u=r*Math.sin(t),c=o*Math.cos(n),h=o*Math.sin(n),f=2*Math.asin(Math.sqrt(at(i-e)+r*o*at(n-t))),d=1/Math.sin(f),g=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,i=n*s+e*c,r=n*u+e*h,o=n*a+e*l;return[Math.atan2(r,i)*Go,Math.atan2(o,Math.sqrt(i*i+r*r))*Go]}:function(){return[t*Go,e*Go]};return g.distance=f,g}function wn(){function t(t,r){var a=Math.sin(r*=Ho),o=Math.cos(r),l=bo((t*=Ho)-e),s=Math.cos(l);Kl+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=i*a-n*o*s)*l),n*a+i*o*s),e=t,n=a,i=o}var e,n,i;$l.point=function(r,a){e=r*Ho,n=Math.sin(a*=Ho),i=Math.cos(a),$l.point=t},$l.lineEnd=function(){$l.point=$l.lineEnd=S}}function Mn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),a=t(i*r);return[a*r*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*a,i*o),Math.asin(i&&n*a/i)]},n}function Cn(t,e){function n(t,e){o>0?-Wo+Bo>e&&(e=-Wo+Bo):e>Wo-Bo&&(e=Wo-Bo);var n=o/Math.pow(r(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ro/4+t/2)},a=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),o=i*Math.pow(r(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=Z(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Wo]},n):Pn}function Tn(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return bo(r)<Bo?un:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-Z(r)*Math.sqrt(t*t+n*n)]},n)}function Pn(t,e){return[t,Math.log(Math.tan(Ro/4+e/2))]}function Dn(t){var e,n=on(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var l=Ro*i(),s=r();a([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else e&&(o=null);return o},n.clipExtent(null)}function An(t,e){return[Math.log(Math.tan(Ro/4+e/2)),-t]}function Ln(t){return t[0]}function En(t){return t[1]}function Fn(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&J(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function kn(t,e){return t[0]-e[0]||t[1]-e[1]}function Nn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function _n(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,l=i[0]-a,s=t[1],u=n[1],c=e[1]-s,h=i[1]-u,f=(l*(s-u)-h*(r-a))/(h*o-l*c);return[r+f*o,s+f*c]}function In(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function On(){ii(this),this.edge=this.site=this.circle=null}function Bn(t){var e=us.pop()||new On;return e.site=t,e}function zn(t){Xn(t),os.remove(t),us.push(t),ii(t)}function Rn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,l=[t];zn(t);for(var s=a;s.circle&&bo(n-s.circle.x)<Bo&&bo(i-s.circle.cy)<Bo;)a=s.P,l.unshift(s),zn(s),s=a;l.unshift(s),Xn(s);for(var u=o;u.circle&&bo(n-u.circle.x)<Bo&&bo(i-u.circle.cy)<Bo;)o=u.N,l.push(u),zn(u),u=o;l.push(u),Xn(u);var c,h=l.length;for(c=1;h>c;++c)u=l[c],s=l[c-1],ti(u.edge,s.site,u.site,r);s=l[0],u=l[h-1],u.edge=Zn(s.site,u.site,null,r),Yn(s),Yn(u)}function Vn(t){for(var e,n,i,r,a=t.x,o=t.y,l=os._;l;)if(i=Un(l,o)-a,i>Bo)l=l.L;else{if(r=a-Wn(l,o),!(r>Bo)){i>-Bo?(e=l.P,n=l):r>-Bo?(e=l,n=l.N):e=n=l;break}if(!l.R){e=l;break}l=l.R}var s=Bn(t);if(os.insert(e,s),e||n){if(e===n)return Xn(e),n=Bn(e.site),os.insert(s,n),s.edge=n.edge=Zn(e.site,s.site),Yn(e),void Yn(n);if(!n)return void(s.edge=Zn(e.site,s.site));Xn(e),Xn(n);var u=e.site,c=u.x,h=u.y,f=t.x-c,d=t.y-h,g=n.site,p=g.x-c,v=g.y-h,m=2*(f*v-d*p),y=f*f+d*d,x=p*p+v*v,b={x:(v*y-d*x)/m+c,y:(f*x-p*y)/m+h};ti(n.edge,u,g,b),s.edge=Zn(u,t,null,b),n.edge=Zn(t,g,null,b),Yn(e),Yn(n)}}function Un(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-(1/0);n=o.site;var l=n.x,s=n.y,u=s-e;if(!u)return l;var c=l-i,h=1/a-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-s+u/2+r-a/2)))/h+i:(i+l)/2}function Wn(t,e){var n=t.N;if(n)return Un(n,e);var i=t.site;return i.y===e?i.x:1/0}function Hn(t){this.site=t,this.edges=[]}function Gn(t){for(var e,n,i,r,a,o,l,s,u,c,h=t[0][0],f=t[1][0],d=t[0][1],g=t[1][1],p=as,v=p.length;v--;)if(a=p[v],a&&a.prepare())for(l=a.edges,s=l.length,o=0;s>o;)c=l[o].end(),i=c.x,r=c.y,u=l[++o%s].start(),e=u.x,n=u.y,(bo(i-e)>Bo||bo(r-n)>Bo)&&(l.splice(o,0,new ei(Jn(a.site,c,bo(i-h)<Bo&&g-r>Bo?{x:h,y:bo(e-h)<Bo?n:g}:bo(r-g)<Bo&&f-i>Bo?{x:bo(n-g)<Bo?e:f,y:g}:bo(i-f)<Bo&&r-d>Bo?{x:f,y:bo(e-f)<Bo?n:d}:bo(r-d)<Bo&&i-h>Bo?{x:bo(n-d)<Bo?e:h,y:d}:null),a.site,null)),++s)}function jn(t,e){return e.angle-t.angle}function qn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,l=r.y,s=i.x-o,u=i.y-l,c=a.x-o,h=a.y-l,f=2*(s*h-u*c);if(!(f>=-zo)){var d=s*s+u*u,g=c*c+h*h,p=(h*d-u*g)/f,v=(s*g-c*d)/f,h=v+l,m=cs.pop()||new qn;m.arc=t,m.site=r,m.x=p+o,m.y=h+Math.sqrt(p*p+v*v),m.cy=h,t.circle=m;for(var y=null,x=ss._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}ss.insert(y,m),y||(ls=m)}}}}function Xn(t){var e=t.circle;e&&(e.P||(ls=e.N),ss.remove(e),cs.push(e),ii(e),t.circle=null)}function Qn(t){for(var e,n=rs,i=We(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Kn(e,t)||!i(e)||bo(e.a.x-e.b.x)<Bo&&bo(e.a.y-e.b.y)<Bo)&&(e.a=e.b=null,n.splice(r,1))}function Kn(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],l=e[1][0],s=e[0][1],u=e[1][1],c=t.l,h=t.r,f=c.x,d=c.y,g=h.x,p=h.y,v=(f+g)/2,m=(d+p)/2;if(p===d){if(o>v||v>=l)return;if(f>g){if(a){if(a.y>=u)return}else a={x:v,y:s};n={x:v,y:u}}else{if(a){if(a.y<s)return}else a={x:v,y:u};n={x:v,y:s}}}else if(i=(f-g)/(p-d),r=m-i*v,-1>i||i>1)if(f>g){if(a){if(a.y>=u)return}else a={x:(s-r)/i,y:s};n={x:(u-r)/i,y:u}}else{if(a){if(a.y<s)return}else a={x:(u-r)/i,y:u};n={x:(s-r)/i,y:s}}else if(p>d){if(a){if(a.x>=l)return}else a={x:o,y:i*o+r};n={x:l,y:i*l+r}}else{if(a){if(a.x<o)return}else a={x:l,y:i*l+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function $n(t,e){this.l=t,this.r=e,this.a=this.b=null}function Zn(t,e,n,i){var r=new $n(t,e);return rs.push(r),n&&ti(r,t,e,n),i&&ti(r,e,t,i),as[t.i].edges.push(new ei(r,t,e)),as[e.i].edges.push(new ei(r,e,t)),r}function Jn(t,e,n){var i=new $n(t,null);return i.a=e,i.b=n,rs.push(i),i}function ti(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function ei(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ni(){this._=null}function ii(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ri(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ai(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function oi(t){for(;t.L;)t=t.L;return t}function li(t,e){var n,i,r,a=t.sort(si).pop();for(rs=[],as=new Array(t.length),os=new ni,ss=new ni;;)if(r=ls,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===n&&a.y===i||(as[a.i]=new Hn(a),Vn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;Rn(r.arc)}e&&(Qn(e),Gn(e));var o={cells:as,edges:rs};return os=ss=rs=as=null,o}function si(t,e){return e.y-t.y||e.x-t.x}function ui(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ci(t){return t.x}function hi(t){return t.y}function fi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function di(t,e,n,i,r,a){if(!t(e,n,i,r,a)){var o=.5*(n+r),l=.5*(i+a),s=e.nodes;s[0]&&di(t,s[0],n,i,o,l),s[1]&&di(t,s[1],o,i,r,l),s[2]&&di(t,s[2],n,l,o,a),s[3]&&di(t,s[3],o,l,r,a)}}function gi(t,e,n,i,r,a,o){var l,s=1/0;return function u(t,c,h,f,d){if(!(c>a||h>o||i>f||r>d)){if(g=t.point){var g,p=e-t.x,v=n-t.y,m=p*p+v*v;if(s>m){var y=Math.sqrt(s=m);i=e-y,r=n-y,a=e+y,o=n+y,l=g}}for(var x=t.nodes,b=.5*(c+f),S=.5*(h+d),w=e>=b,M=n>=S,C=M<<1|w,T=C+4;T>C;++C)if(t=x[3&C])switch(3&C){case 0:u(t,c,h,b,S);break;case 1:u(t,b,h,f,S);break;case 2:u(t,c,S,b,d);break;case 3:u(t,b,S,f,d)}}}(t,i,r,a,o),l}function pi(t,e){t=lo.rgb(t),e=lo.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,l=e.b-r;return function(t){return\"#\"+bt(Math.round(n+a*t))+bt(Math.round(i+o*t))+bt(Math.round(r+l*t))}}function vi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=xi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function mi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yi(t,e){var n,i,r,a=fs.lastIndex=ds.lastIndex=0,o=-1,l=[],s=[];for(t+=\"\",e+=\"\";(n=fs.exec(t))&&(i=ds.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),l[o]?l[o]+=r:l[++o]=r),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,s.push({i:o,x:mi(n,i)})),a=ds.lastIndex;return a<e.length&&(r=e.slice(a),l[o]?l[o]+=r:l[++o]=r),l.length<2?s[0]?(e=s[0].x,function(t){return e(t)+\"\"}):function(){return e}:(e=s.length,function(t){for(var n,i=0;e>i;++i)l[(n=s[i]).i]=n.x(t);return l.join(\"\")})}function xi(t,e){for(var n,i=lo.interpolators.length;--i>=0&&!(n=lo.interpolators[i](t,e)););return n}function bi(t,e){var n,i=[],r=[],a=t.length,o=e.length,l=Math.min(t.length,e.length);for(n=0;l>n;++n)i.push(xi(t[n],e[n]));for(;a>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;l>n;++n)r[n]=i[n](t);return r}}function Si(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wi(t){return function(e){return 1-t(1-e)}}function Mi(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ci(t){return t*t}function Ti(t){return t*t*t}function Pi(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Di(t){return function(e){return Math.pow(e,t)}}function Ai(t){return 1-Math.cos(t*Wo)}function Li(t){return Math.pow(2,10*(t-1))}function Ei(t){return 1-Math.sqrt(1-t*t)}function Fi(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Vo*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Vo/e)}}function ki(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Ni(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function _i(t,e){t=lo.hcl(t),e=lo.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,l=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return ct(n+a*t,i+o*t,r+l*t)+\"\"}}function Ii(t,e){t=lo.hsl(t),e=lo.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,l=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return st(n+a*t,i+o*t,r+l*t)+\"\"}}function Oi(t,e){t=lo.lab(t),e=lo.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,l=e.b-r;return function(t){return ft(n+a*t,i+o*t,r+l*t)+\"\"}}function Bi(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function zi(t){var e=[t.a,t.b],n=[t.c,t.d],i=Vi(e),r=Ri(e,n),a=Vi(Ui(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Go,this.translate=[t.e,t.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*Go:0}function Ri(t,e){return t[0]*e[0]+t[1]*e[1]}function Vi(t){var e=Math.sqrt(Ri(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Ui(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Wi(t){return t.length?t.pop()+\",\":\"\"}function Hi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(\"translate(\",null,\",\",null,\")\");i.push({i:r-4,x:mi(t[0],e[0])},{i:r-2,x:mi(t[1],e[1])})}else(e[0]||e[1])&&n.push(\"translate(\"+e+\")\")}function Gi(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(Wi(n)+\"rotate(\",null,\")\")-2,x:mi(t,e)})):e&&n.push(Wi(n)+\"rotate(\"+e+\")\")}function ji(t,e,n,i){t!==e?i.push({i:n.push(Wi(n)+\"skewX(\",null,\")\")-2,x:mi(t,e)}):e&&n.push(Wi(n)+\"skewX(\"+e+\")\")}function qi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(Wi(n)+\"scale(\",null,\",\",null,\")\");i.push({i:r-4,x:mi(t[0],e[0])},{i:r-2,x:mi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Wi(n)+\"scale(\"+e+\")\")}function Yi(t,e){var n=[],i=[];return t=lo.transform(t),e=lo.transform(e),Hi(t.translate,e.translate,n,i),Gi(t.rotate,e.rotate,n,i),ji(t.skew,e.skew,n,i),qi(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,r=-1,a=i.length;++r<a;)n[(e=i[r]).i]=e.x(t);return n.join(\"\")}}function Xi(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Qi(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Ki(t){for(var e=t.source,n=t.target,i=Zi(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function $i(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Zi(t,e){if(t===e)return t;for(var n=$i(t),i=$i(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Ji(t){t.fixed|=2}function tr(t){t.fixed&=-7}function er(t){t.fixed|=4,t.px=t.x,t.py=t.y}function nr(t){t.fixed&=-5}function ir(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,l=o.length,s=-1;++s<l;)a=o[s],null!=a&&(ir(a,e,n),t.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function rr(t,e){return lo.rebind(t,e,\"sort\",\"children\",\"value\"),t.nodes=t,t.links=cr,t}function ar(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function or(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function lr(t){return t.children}function sr(t){return t.value}function ur(t,e){return e.value-t.value}function cr(t){return lo.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function hr(t){return t.x}function fr(t){return t.y}function dr(t,e,n){t.y0=e,t.y=n}function gr(t){return lo.range(t.length)}function pr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function vr(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function mr(t){return t.reduce(yr,0)}function yr(t,e){return t+e[1]}function xr(t,e){return br(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function br(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function Sr(t){return[lo.min(t),lo.max(t)]}function wr(t,e){return t.value-e.value}function Mr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Cr(t,e){t._pack_next=e,e._pack_prev=t}function Tr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Pr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,i,r,a,o,l,s,u,c=1/0,h=-(1/0),f=1/0,d=-(1/0);if(n.forEach(Dr),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(a=n[2],Er(i,r,a),e(a),Mr(i,a),i._pack_prev=a,Mr(a,r),r=i._pack_next,o=3;u>o;o++){Er(i,r,a=n[o]);var g=0,p=1,v=1;for(l=r._pack_next;l!==r;l=l._pack_next,p++)if(Tr(l,a)){g=1;break}if(1==g)for(s=i._pack_prev;s!==l._pack_prev&&!Tr(s,a);s=s._pack_prev,v++);g?(v>p||p==v&&r.r<i.r?Cr(i,r=l):Cr(i=s,r),o--):(Mr(i,a),r=a,e(a))}var m=(c+h)/2,y=(f+d)/2,x=0;for(o=0;u>o;o++)a=n[o],a.x-=m,a.y-=y,x=Math.max(x,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=x,n.forEach(Ar)}}function Dr(t){t._pack_next=t._pack_prev=t}function Ar(t){delete t._pack_next,delete t._pack_prev}function Lr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var a=-1,o=r.length;++a<o;)Lr(r[a],e,n,i)}function Er(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,l=r*r+a*a;o*=o,i*=i;var s=.5+(i-o)/(2*l),u=Math.sqrt(Math.max(0,2*o*(i+l)-(i-=l)*i-o*o))/(2*l);n.x=t.x+s*r+u*a,n.y=t.y+s*a-u*r}else n.x=t.x+i,n.y=t.y}function Fr(t,e){return t.parent==e.parent?1:2}function kr(t){var e=t.children;return e.length?e[0]:t.t}function Nr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function _r(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ir(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Or(t,e,n){return t.a.parent===e.parent?t.a:n}function Br(t){return 1+lo.max(t,function(t){return t.y})}function zr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Rr(t){var e=t.children;return e&&e.length?Rr(e[0]):t}function Vr(t){var e,n=t.children;return n&&(e=n.length)?Vr(n[e-1]):t}function Ur(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Wr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Hr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Gr(t){return t.rangeExtent?t.rangeExtent():Hr(t.range())}function jr(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function qr(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Yr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Cs}function Xr(t,e,n,i){var r=[],a=[],o=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=l;)r.push(n(t[o-1],t[o])),a.push(i(e[o-1],e[o]));return function(e){var n=lo.bisect(t,e,1,l)-1;return a[n](r[n](e))}}function Qr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Xr:jr,s=i?Qi:Xi;return o=r(t,e,s,n),l=r(e,t,s,xi),a}function a(t){return o(t)}var o,l;return a.invert=function(t){return l(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},a.range=function(t){return arguments.length?(e=t,r()):e},a.rangeRound=function(t){return a.range(t).interpolate(Bi)},a.clamp=function(t){return arguments.length?(i=t,r()):i},a.interpolate=function(t){return arguments.length?(n=t,r()):n},a.ticks=function(e){return Jr(t,e)},a.tickFormat=function(e,n){return ta(t,e,n)},a.nice=function(e){return $r(t,e),r()},a.copy=function(){return Qr(t,e,n,i)},r()}function Kr(t,e){return lo.rebind(t,e,\"range\",\"rangeRound\",\"interpolate\",\"clamp\")}function $r(t,e){return qr(t,Yr(Zr(t,e)[2])),qr(t,Yr(Zr(t,e)[2])),t}function Zr(t,e){null==e&&(e=10);var n=Hr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Jr(t,e){return lo.range.apply(lo,Zr(t,e))}function ta(t,e,n){var i=Zr(t,e);if(n){var r=fl.exec(n);if(r.shift(),\"s\"===r[8]){var a=lo.formatPrefix(Math.max(bo(i[0]),bo(i[1])));return r[7]||(r[7]=\".\"+ea(a.scale(i[2]))),r[8]=\"f\",n=lo.format(r.join(\"\")),function(t){return n(a.scale(t))+a.symbol}}r[7]||(r[7]=\".\"+na(r[8],i)),n=r.join(\"\")}else n=\",.\"+ea(i[2])+\"f\";return lo.format(n)}function ea(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function na(t,e){var n=ea(e[2]);return t in Ts?Math.abs(n-ea(Math.max(bo(e[0]),bo(e[1]))))+ +(\"e\"!==t):n-2*(\"%\"===t)}function ia(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(r(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),o):e},o.nice=function(){var e=qr(i.map(r),n?Math:Ds);return t.domain(e),i=e.map(a),o},o.ticks=function(){var t=Hr(i),o=[],l=t[0],s=t[1],u=Math.floor(r(l)),c=Math.ceil(r(s)),h=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var f=1;h>f;f++)o.push(a(u)*f);o.push(a(u))}else for(o.push(a(u));u++<c;)for(var f=h-1;f>0;f--)o.push(a(u)*f);for(u=0;o[u]<l;u++);for(c=o.length;o[c-1]>s;c--);o=o.slice(u,c)}return o},o.tickFormat=function(t,n){if(!arguments.length)return Ps;arguments.length<2?n=Ps:\"function\"!=typeof n&&(n=lo.format(n));var i=Math.max(1,e*t/o.ticks().length);return function(t){var o=t/a(Math.round(r(t)));return e-.5>o*e&&(o*=e),i>=o?n(t):\"\"}},o.copy=function(){return ia(t.copy(),e,n,i)},Kr(o,t)}function ra(t,e,n){function i(e){return t(r(e))}var r=aa(e),a=aa(1/e);return i.invert=function(e){return a(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Jr(n,t)},i.tickFormat=function(t,e){return ta(n,t,e)},i.nice=function(t){return i.domain($r(n,t))},i.exponent=function(o){return arguments.length?(r=aa(e=o),a=aa(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return ra(t.copy(),e,n)},Kr(i,t)}function aa(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function oa(t,e){function n(n){return a[((r.get(n)||(\"range\"===e.t?r.set(n,t.push(n)):NaN))-1)%a.length]}function i(e,n){return lo.range(t.length).map(function(t){return e+n*t})}var r,a,o;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new u;for(var a,o=-1,l=i.length;++o<l;)r.has(a=i[o])||r.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:\"range\",a:arguments},n):a},n.rangePoints=function(r,l){arguments.length<2&&(l=0);var s=r[0],u=r[1],c=t.length<2?(s=(s+u)/2,0):(u-s)/(t.length-1+l);return a=i(s+c*l/2,c),o=0,e={t:\"rangePoints\",a:arguments},n},n.rangeRoundPoints=function(r,l){arguments.length<2&&(l=0);var s=r[0],u=r[1],c=t.length<2?(s=u=Math.round((s+u)/2),0):(u-s)/(t.length-1+l)|0;return a=i(s+Math.round(c*l/2+(u-s-(t.length-1+l)*c)/2),c),o=0,e={t:\"rangeRoundPoints\",a:arguments},n},n.rangeBands=function(r,l,s){arguments.length<2&&(l=0),arguments.length<3&&(s=l);var u=r[1]<r[0],c=r[u-0],h=r[1-u],f=(h-c)/(t.length-l+2*s);return a=i(c+f*s,f),u&&a.reverse(),o=f*(1-l),e={t:\"rangeBands\",a:arguments},n},n.rangeRoundBands=function(r,l,s){arguments.length<2&&(l=0),arguments.length<3&&(s=l);var u=r[1]<r[0],c=r[u-0],h=r[1-u],f=Math.floor((h-c)/(t.length-l+2*s));return a=i(c+Math.round((h-c-(t.length-l)*f)/2),f),u&&a.reverse(),o=Math.round(f*(1-l)),e={t:\"rangeRoundBands\",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Hr(e.a[0])},n.copy=function(){return oa(t,e)},n.domain(t)}function la(t,e){function a(){var n=0,i=e.length;for(l=[];++n<i;)l[n-1]=lo.quantile(t,n/i);return o}function o(t){return isNaN(t=+t)?void 0:e[lo.bisect(l,t)]}var l;return o.domain=function(e){return arguments.length?(t=e.map(i).filter(r).sort(n),a()):t},o.range=function(t){return arguments.length?(e=t,a()):e},o.quantiles=function(){return l},o.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?l[n-1]:t[0],n<l.length?l[n]:t[t.length-1]]},o.copy=function(){return la(t,e)},a()}function sa(t,e,n){function i(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function r(){return a=n.length/(e-t),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/a+t,[e,e+1/a]},i.copy=function(){return sa(t,e,n)},r()}function ua(t,e){function n(n){return n>=n?e[lo.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ua(t,e)},n}function ca(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Jr(t,e)},e.tickFormat=function(e,n){return ta(t,e,n)},e.copy=function(){return ca(t)},e}function ha(){return 0}function fa(t){return t.innerRadius}function da(t){return t.outerRadius}function ga(t){return t.startAngle}function pa(t){return t.endAngle}function va(t){return t&&t.padAngle}function ma(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function ya(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],l=(r?i:-i)/Math.sqrt(a*a+o*o),s=l*o,u=-l*a,c=t[0]+s,h=t[1]+u,f=e[0]+s,d=e[1]+u,g=(c+f)/2,p=(h+d)/2,v=f-c,m=d-h,y=v*v+m*m,x=n-i,b=c*d-f*h,S=(0>m?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),w=(b*m-v*S)/y,M=(-b*v-m*S)/y,C=(b*m+v*S)/y,T=(-b*v+m*S)/y,P=w-g,D=M-p,A=C-g,L=T-p;return P*P+D*D>A*A+L*L&&(w=C,M=T),[[w-s,M-u],[w*n/x,M*n/x]]}function xa(t){function e(e){function o(){u.push(\"M\",a(t(c),l))}for(var s,u=[],c=[],h=-1,f=e.length,d=Pt(n),g=Pt(i);++h<f;)r.call(this,s=e[h],h)?c.push([+d.call(this,s,h),+g.call(this,s,h)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(\"\"):null}var n=Ln,i=En,r=Le,a=ba,o=a.key,l=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(o=\"function\"==typeof t?a=t:(a=Ns.get(t)||ba).key,e):o},e.tension=function(t){return arguments.length?(l=t,e):l},e}function ba(t){return t.length>1?t.join(\"L\"):t+\"Z\"}function Sa(t){return t.join(\"L\")+\"Z\"}function wa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],\",\",i[1]];++e<n;)r.push(\"H\",(i[0]+(i=t[e])[0])/2,\"V\",i[1]);return n>1&&r.push(\"H\",i[0]),r.join(\"\")}function Ma(t){for(var e=0,n=t.length,i=t[0],r=[i[0],\",\",i[1]];++e<n;)r.push(\"V\",(i=t[e])[1],\"H\",i[0]);return r.join(\"\")}function Ca(t){for(var e=0,n=t.length,i=t[0],r=[i[0],\",\",i[1]];++e<n;)r.push(\"H\",(i=t[e])[0],\"V\",i[1]);return r.join(\"\")}function Ta(t,e){return t.length<4?ba(t):t[1]+Aa(t.slice(1,-1),La(t,e))}function Pa(t,e){return t.length<3?Sa(t):t[0]+Aa((t.push(t[0]),t),La([t[t.length-2]].concat(t,[t[1]]),e))}function Da(t,e){return t.length<3?ba(t):t[0]+Aa(t,La(t,e))}function Aa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ba(t);var n=t.length!=e.length,i=\"\",r=t[0],a=t[1],o=e[0],l=o,s=1;if(n&&(i+=\"Q\"+(a[0]-2*o[0]/3)+\",\"+(a[1]-2*o[1]/3)+\",\"+a[0]+\",\"+a[1],r=t[1],s=2),e.length>1){l=e[1],a=t[s],s++,i+=\"C\"+(r[0]+o[0])+\",\"+(r[1]+o[1])+\",\"+(a[0]-l[0])+\",\"+(a[1]-l[1])+\",\"+a[0]+\",\"+a[1];for(var u=2;u<e.length;u++,s++)a=t[s],l=e[u],i+=\"S\"+(a[0]-l[0])+\",\"+(a[1]-l[1])+\",\"+a[0]+\",\"+a[1]}if(n){var c=t[s];i+=\"Q\"+(a[0]+2*l[0]/3)+\",\"+(a[1]+2*l[1]/3)+\",\"+c[0]+\",\"+c[1]}return i}function La(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],l=1,s=t.length;++l<s;)n=a,a=o,o=t[l],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Ea(t){if(t.length<3)return ba(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],l=[a,a,a,i[1]],s=[r,\",\",a,\"L\",_a(Os,o),\",\",_a(Os,l)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),l.shift(),l.push(i[1]),Ia(s,o,l);return t.pop(),s.push(\"L\",i),s.join(\"\")}function Fa(t){if(t.length<4)return ba(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(_a(Os,a)+\",\"+_a(Os,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ia(n,a,o);return n.join(\"\")}function ka(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],l=[];++i<4;)n=t[i%r],o.push(n[0]),l.push(n[1]);for(e=[_a(Os,o),\",\",_a(Os,l)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),l.shift(),l.push(n[1]),Ia(e,o,l);return e.join(\"\")}function Na(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],l=t[n][0]-a,s=t[n][1]-o,u=-1;++u<=n;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(a+r*l),i[1]=e*i[1]+(1-e)*(o+r*s);return Ea(t)}function _a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ia(t,e,n){t.push(\"C\",_a(_s,e),\",\",_a(_s,n),\",\",_a(Is,e),\",\",_a(Is,n),\",\",_a(Os,e),\",\",_a(Os,n))}function Oa(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ba(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=Oa(r,a);++e<n;)i[e]=(o+(o=Oa(r=a,a=t[e+1])))/2;return i[e]=o,i}function za(t){for(var e,n,i,r,a=[],o=Ba(t),l=-1,s=t.length-1;++l<s;)e=Oa(t[l],t[l+1]),bo(e)<Bo?o[l]=o[l+1]=0:(n=o[l]/e,i=o[l+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),o[l]=r*n,o[l+1]=r*i));for(l=-1;++l<=s;)r=(t[Math.min(s,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l])),a.push([r||0,o[l]*r||0]);return a}function Ra(t){return t.length<3?ba(t):t[0]+Aa(t,za(t))}function Va(t){for(var e,n,i,r=-1,a=t.length;++r<a;)e=t[r],n=e[0],i=e[1]-Wo,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Ua(t){function e(e){function s(){p.push(\"M\",l(t(m),h),c,u(t(v.reverse()),h),\"Z\")}for(var f,d,g,p=[],v=[],m=[],y=-1,x=e.length,b=Pt(n),S=Pt(r),w=n===i?function(){\nreturn d}:Pt(i),M=r===a?function(){return g}:Pt(a);++y<x;)o.call(this,f=e[y],y)?(v.push([d=+b.call(this,f,y),g=+S.call(this,f,y)]),m.push([+w.call(this,f,y),+M.call(this,f,y)])):v.length&&(s(),v=[],m=[]);return v.length&&s(),p.length?p.join(\"\"):null}var n=Ln,i=Ln,r=0,a=En,o=Le,l=ba,s=l.key,u=l,c=\"L\",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=a=t,e):a},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(s=\"function\"==typeof t?l=t:(l=Ns.get(t)||ba).key,u=l.reverse||l,c=l.closed?\"M\":\"L\",e):s},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Wa(t){return t.radius}function Ha(t){return[t.x,t.y]}function Ga(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Wo;return[n*Math.cos(i),n*Math.sin(i)]}}function ja(){return 64}function qa(){return\"circle\"}function Ya(t){var e=Math.sqrt(t/Ro);return\"M0,\"+e+\"A\"+e+\",\"+e+\" 0 1,1 0,\"+-e+\"A\"+e+\",\"+e+\" 0 1,1 0,\"+e+\"Z\"}function Xa(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function Qa(t,e,n){return To(t,Hs),t.namespace=e,t.id=n,t}function Ka(t,e,n,i){var r=t.id,a=t.namespace;return H(t,\"function\"==typeof n?function(t,o,l){t[a][r].tween.set(e,i(n.call(t,t.__data__,o,l)))}:(n=i(n),function(t){t[a][r].tween.set(e,n)}))}function $a(t){return null==t&&(t=\"\"),function(){this.textContent=t}}function Za(t){return null==t?\"__transition__\":\"__transition_\"+t+\"__\"}function Ja(t,e,n,i,r){function a(t){var e=p.delay;return c.t=e+s,t>=e?o(t-e):void(c.c=o)}function o(n){var r=g.active,a=g[r];a&&(a.timer.c=null,a.timer.t=NaN,--g.count,delete g[r],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in g)if(i>+o){var u=g[o];u.timer.c=null,u.timer.t=NaN,--g.count,delete g[o]}c.c=l,Ft(function(){return c.c&&l(n||1)&&(c.c=null,c.t=NaN),1},0,s),g.active=i,p.event&&p.event.start.call(t,t.__data__,e),d=[],p.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&d.push(i)}),f=p.ease,h=p.duration}function l(r){for(var a=r/h,o=f(a),l=d.length;l>0;)d[--l].call(t,o);return a>=1?(p.event&&p.event.end.call(t,t.__data__,e),--g.count?delete g[i]:delete t[n],1):void 0}var s,c,h,f,d,g=t[n]||(t[n]={active:0,count:0}),p=g[i];p||(s=r.time,c=Ft(a,0,s),p=g[i]={tween:new u,time:s,timer:c,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++g.count)}function to(t,e,n){t.attr(\"transform\",function(t){var i=e(t);return\"translate(\"+(isFinite(i)?i:n(t))+\",0)\"})}function eo(t,e,n){t.attr(\"transform\",function(t){var i=e(t);return\"translate(0,\"+(isFinite(i)?i:n(t))+\")\"})}function no(t){return t.toISOString()}function io(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,a=lo.bisect(Zs,r);return a==Zs.length?[e.year,Zr(t.map(function(t){return t/31536e6}),n)[2]]:a?e[r/Zs[a-1]<Zs[a]/r?a-1:a]:[eu,Zr(t,n)[2]]}return i.invert=function(e){return ro(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(ro)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ro(+n+1),e).length}var a=i.domain(),o=Hr(a),l=null==t?r(o,10):\"number\"==typeof t&&r(o,t);return l&&(t=l[0],e=l[1]),i.domain(qr(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ro(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ro(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Hr(i.domain()),a=null==t?r(n,10):\"number\"==typeof t?r(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],ro(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return io(t.copy(),e,n)},Kr(i,t)}function ro(t){return new Date(t)}function ao(t){return JSON.parse(t.responseText)}function oo(t){var e=co.createRange();return e.selectNode(co.body),e.createContextualFragment(t.responseText)}var lo={version:\"3.5.17\"},so=[].slice,uo=function(t){return so.call(t)},co=this.document;if(co)try{uo(co.documentElement.childNodes)[0].nodeType}catch(ho){uo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),co)try{co.createElement(\"DIV\").style.setProperty(\"opacity\",0,\"\")}catch(fo){var go=this.Element.prototype,po=go.setAttribute,vo=go.setAttributeNS,mo=this.CSSStyleDeclaration.prototype,yo=mo.setProperty;go.setAttribute=function(t,e){po.call(this,t,e+\"\")},go.setAttributeNS=function(t,e,n){vo.call(this,t,e,n+\"\")},mo.setProperty=function(t,e,n){yo.call(this,t,e+\"\",n)}}lo.ascending=n,lo.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},lo.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},lo.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},lo.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},lo.sum=function(t,e){var n,i=0,a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)r(n=+t[o])&&(i+=n);else for(;++o<a;)r(n=+e.call(t,t[o],o))&&(i+=n);return i},lo.mean=function(t,e){var n,a=0,o=t.length,l=-1,s=o;if(1===arguments.length)for(;++l<o;)r(n=i(t[l]))?a+=n:--s;else for(;++l<o;)r(n=i(e.call(t,t[l],l)))?a+=n:--s;return s?a/s:void 0},lo.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},lo.median=function(t,e){var a,o=[],l=t.length,s=-1;if(1===arguments.length)for(;++s<l;)r(a=i(t[s]))&&o.push(a);else for(;++s<l;)r(a=i(e.call(t,t[s],s)))&&o.push(a);return o.length?lo.quantile(o.sort(n),.5):void 0},lo.variance=function(t,e){var n,a,o=t.length,l=0,s=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)r(n=i(t[u]))&&(a=n-l,l+=a/++c,s+=a*(n-l));else for(;++u<o;)r(n=i(e.call(t,t[u],u)))&&(a=n-l,l+=a/++c,s+=a*(n-l));return c>1?s/(c-1):void 0},lo.deviation=function(){var t=lo.variance.apply(this,arguments);return t?Math.sqrt(t):t};var xo=a(n);lo.bisectLeft=xo.left,lo.bisect=lo.bisectRight=xo.right,lo.bisector=function(t){return a(1===t.length?function(e,i){return n(t(e),i)}:t)},lo.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,2>a&&(e=0));for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},lo.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},lo.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],a=new Array(0>i?0:i);i>n;)a[n]=[e=r,r=t[++n]];return a},lo.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=lo.min(t,o),i=new Array(n);++e<n;)for(var r,a=-1,l=i[e]=new Array(r);++a<r;)l[a]=t[a][e];return i},lo.zip=function(){return lo.transpose(arguments)},lo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},lo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},lo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},lo.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--o]=i[e];return n};var bo=Math.abs;lo.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error(\"infinite range\");var i,r=[],a=l(bo(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},lo.map=function(t,e){var n=new u;if(t instanceof u)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var So=\"__proto__\",wo=\"\\x00\";s(u,{has:f,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:d,keys:g,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:h(e),value:this._[e]});return t},size:p,empty:v,forEach:function(t){for(var e in this._)t.call(this,h(e),this._[e])}}),lo.nest=function(){function t(e,o,l){if(l>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var s,c,h,f,d=-1,g=o.length,p=a[l++],v=new u;++d<g;)(f=v.get(s=p(c=o[d])))?f.push(c):v.set(s,[c]);return e?(c=e(),h=function(n,i){c.set(n,t(e,i,l))}):(c={},h=function(n,i){c[n]=t(e,i,l)}),v.forEach(h),c}function e(t,n){if(n>=a.length)return t;var i=[],r=o[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(lo.map,n,0),0)},r.key=function(t){return a.push(t),r},r.sortKeys=function(t){return o[a.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},lo.set=function(t){var e=new m;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},s(m,{has:f,add:function(t){return this._[c(t+=\"\")]=!0,t},remove:d,values:g,size:p,empty:v,forEach:function(t){for(var e in this._)t.call(this,h(e))}}),lo.behavior={},lo.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=x(t,e,e[n]);return t};var Mo=[\"webkit\",\"ms\",\"moz\",\"Moz\",\"o\",\"O\"];lo.dispatch=function(){for(var t=new w,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=M(t);return t},w.prototype.on=function(t,e){var n=t.indexOf(\".\"),i=\"\";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},lo.event=null,lo.requote=function(t){return t.replace(Co,\"\\\\$&\")};var Co=/[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g,To={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Po=function(t,e){return e.querySelector(t)},Do=function(t,e){return e.querySelectorAll(t)},Ao=function(t,e){var n=t.matches||t[b(t,\"matchesSelector\")];return(Ao=function(t,e){return n.call(t,e)})(t,e)};\"function\"==typeof Sizzle&&(Po=function(t,e){return Sizzle(t,e)[0]||null},Do=Sizzle,Ao=Sizzle.matchesSelector),lo.selection=function(){return lo.select(co.documentElement)};var Lo=lo.selection.prototype=[];Lo.select=function(t){var e,n,i,r,a=[];t=A(t);for(var o=-1,l=this.length;++o<l;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var s=-1,u=i.length;++s<u;)(r=i[s])?(e.push(n=t.call(r,r.__data__,s,o)),n&&\"__data__\"in r&&(n.__data__=r.__data__)):e.push(null)}return D(a)},Lo.selectAll=function(t){var e,n,i=[];t=L(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],l=-1,s=o.length;++l<s;)(n=o[l])&&(i.push(e=uo(t.call(n,n.__data__,l,r))),e.parentNode=n);return D(i)};var Eo=\"http://www.w3.org/1999/xhtml\",Fo={svg:\"http://www.w3.org/2000/svg\",xhtml:Eo,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};lo.ns={prefix:Fo,qualify:function(t){var e=t.indexOf(\":\"),n=t;return e>=0&&\"xmlns\"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Fo.hasOwnProperty(n)?{space:Fo[n],local:t}:t}},Lo.attr=function(t,e){if(arguments.length<2){if(\"string\"==typeof t){var n=this.node();return t=lo.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Lo.classed=function(t,e){if(arguments.length<2){if(\"string\"==typeof t){var n=this.node(),i=(t=N(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute(\"class\");++r<i;)if(!k(t[r]).test(e))return!1;return!0}for(e in t)this.each(_(e,t[e]));return this}return this.each(_(t,e))},Lo.style=function(t,n,i){var r=arguments.length;if(3>r){if(\"string\"!=typeof t){2>r&&(n=\"\");for(i in t)this.each(O(i,t[i],n));return this}if(2>r){var a=this.node();return e(a).getComputedStyle(a,null).getPropertyValue(t)}i=\"\"}return this.each(O(t,n,i))},Lo.property=function(t,e){if(arguments.length<2){if(\"string\"==typeof t)return this.node()[t];for(e in t)this.each(B(e,t[e]));return this}return this.each(B(t,e))},Lo.text=function(t){return arguments.length?this.each(\"function\"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?\"\":e}:null==t?function(){this.textContent=\"\"}:function(){this.textContent=t}):this.node().textContent},Lo.html=function(t){return arguments.length?this.each(\"function\"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?\"\":e}:null==t?function(){this.innerHTML=\"\"}:function(){this.innerHTML=t}):this.node().innerHTML},Lo.append=function(t){return t=z(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Lo.insert=function(t,e){return t=z(t),e=A(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Lo.remove=function(){return this.each(R)},Lo.data=function(t,e){function n(t,n){var i,r,a,o=t.length,h=n.length,f=Math.min(o,h),d=new Array(h),g=new Array(h),p=new Array(o);if(e){var v,m=new u,y=new Array(o);for(i=-1;++i<o;)(r=t[i])&&(m.has(v=e.call(r,r.__data__,i))?p[i]=r:m.set(v,r),y[i]=v);for(i=-1;++i<h;)(r=m.get(v=e.call(n,a=n[i],i)))?r!==!0&&(d[i]=r,r.__data__=a):g[i]=V(a),m.set(v,!0);for(i=-1;++i<o;)i in y&&m.get(y[i])!==!0&&(p[i]=t[i])}else{for(i=-1;++i<f;)r=t[i],a=n[i],r?(r.__data__=a,d[i]=r):g[i]=V(a);for(;h>i;++i)g[i]=V(n[i]);for(;o>i;++i)p[i]=t[i]}g.update=d,g.parentNode=d.parentNode=p.parentNode=t.parentNode,l.push(g),s.push(d),c.push(p)}var i,r,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(t[a]=r.__data__);return t}var l=G([]),s=D([]),c=D([]);if(\"function\"==typeof t)for(;++a<o;)n(i=this[a],t.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],t);return s.enter=function(){return l},s.exit=function(){return c},s},Lo.datum=function(t){return arguments.length?this.property(\"__data__\",t):this.property(\"__data__\")},Lo.filter=function(t){var e,n,i,r=[];\"function\"!=typeof t&&(t=U(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=0,s=n.length;s>l;l++)(i=n[l])&&t.call(i,i.__data__,l,a)&&e.push(i)}return D(r)},Lo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Lo.sort=function(t){t=W.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Lo.each=function(t){return H(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Lo.call=function(t){var e=uo(arguments);return t.apply(e[0]=this,e),this},Lo.empty=function(){return!this.node()},Lo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},Lo.size=function(){var t=0;return H(this,function(){++t}),t};var ko=[];lo.selection.enter=G,lo.selection.enter.prototype=ko,ko.append=Lo.append,ko.empty=Lo.empty,ko.node=Lo.node,ko.call=Lo.call,ko.size=Lo.size,ko.select=function(t){for(var e,n,i,r,a,o=[],l=-1,s=this.length;++l<s;){i=(r=this[l]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;++u<c;)(a=r[u])?(e.push(i[u]=n=t.call(r.parentNode,a.__data__,u,l)),n.__data__=a.__data__):e.push(null)}return D(o)},ko.insert=function(t,e){return arguments.length<2&&(e=j(this)),Lo.insert.call(this,t,e)},lo.select=function(e){var n;return\"string\"==typeof e?(n=[Po(e,co)],n.parentNode=co.documentElement):(n=[e],n.parentNode=t(e)),D([n])},lo.selectAll=function(t){var e;return\"string\"==typeof t?(e=uo(Do(t,co)),e.parentNode=co.documentElement):(e=uo(t),e.parentNode=null),D([e])},Lo.on=function(t,e,n){var i=arguments.length;if(3>i){if(\"string\"!=typeof t){2>i&&(e=!1);for(n in t)this.each(q(n,t[n],e));return this}if(2>i)return(i=this.node()[\"__on\"+t])&&i._;n=!1}return this.each(q(t,e,n))};var No=lo.map({mouseenter:\"mouseover\",mouseleave:\"mouseout\"});co&&No.forEach(function(t){\"on\"+t in co&&No.remove(t)});var _o,Io=0;lo.mouse=function(t){return K(t,T())};var Oo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;lo.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=T().changedTouches),e)for(var i,r=0,a=e.length;a>r;++r)if((i=e[r]).identifier===n)return K(t,i)},lo.behavior.drag=function(){function t(){this.on(\"mousedown.drag\",a).on(\"touchstart.drag\",o)}function n(t,e,n,a,o){return function(){function l(){var t,n,i=e(f,p);i&&(t=i[0]-x[0],n=i[1]-x[1],g|=t|n,x=i,d({type:\"drag\",x:i[0]+u[0],y:i[1]+u[1],dx:t,dy:n}))}function s(){e(f,p)&&(m.on(a+v,null).on(o+v,null),y(g),d({type:\"dragend\"}))}var u,c=this,h=lo.event.target.correspondingElement||lo.event.target,f=c.parentNode,d=i.of(c,arguments),g=0,p=t(),v=\".drag\"+(null==p?\"\":\"-\"+p),m=lo.select(n(h)).on(a+v,l).on(o+v,s),y=Q(h),x=e(f,p);r?(u=r.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],d({type:\"dragstart\"})}}var i=P(t,\"drag\",\"dragstart\",\"dragend\"),r=null,a=n(S,lo.mouse,e,\"mousemove\",\"mouseup\"),o=n($,lo.touch,y,\"touchmove\",\"touchend\");return t.origin=function(e){return arguments.length?(r=e,t):r},lo.rebind(t,i,\"on\")},lo.touches=function(t,e){return arguments.length<2&&(e=T().touches),e?uo(e).map(function(e){var n=K(t,e);return n.identifier=e.identifier,n}):[]};var Bo=1e-6,zo=Bo*Bo,Ro=Math.PI,Vo=2*Ro,Uo=Vo-Bo,Wo=Ro/2,Ho=Ro/180,Go=180/Ro,jo=Math.SQRT2,qo=2,Yo=4;lo.interpolateZoom=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],l=e[0],s=e[1],u=e[2],c=l-r,h=s-a,f=c*c+h*h;if(zo>f)i=Math.log(u/o)/jo,n=function(t){return[r+t*c,a+t*h,o*Math.exp(jo*t*i)]};else{var d=Math.sqrt(f),g=(u*u-o*o+Yo*f)/(2*o*qo*d),p=(u*u-o*o-Yo*f)/(2*u*qo*d),v=Math.log(Math.sqrt(g*g+1)-g),m=Math.log(Math.sqrt(p*p+1)-p);i=(m-v)/jo,n=function(t){var e=t*i,n=it(v),l=o/(qo*d)*(n*rt(jo*e+v)-nt(v));return[r+l*c,a+l*h,o*n/it(jo*e+v)]}}return n.duration=1e3*i,n},lo.behavior.zoom=function(){function t(t){t.on(F,h).on(Qo+\".zoom\",d).on(\"dblclick.zoom\",g).on(_,f)}function n(t){return[(t[0]-T.x)/T.k,(t[1]-T.y)/T.k]}function i(t){return[t[0]*T.k+T.x,t[1]*T.k+T.y]}function r(t){T.k=Math.max(A[0],Math.min(A[1],t))}function a(t,e){e=i(e),T.x+=t[0]-e[0],T.y+=t[1]-e[1]}function o(e,n,i,o){e.__chart__={x:T.x,y:T.y,k:T.k},r(Math.pow(2,o)),a(v=n,i),e=lo.select(e),L>0&&(e=e.transition().duration(L)),e.call(t.event)}function l(){S&&S.domain(b.range().map(function(t){return(t-T.x)/T.k}).map(b.invert)),M&&M.domain(w.range().map(function(t){return(t-T.y)/T.k}).map(w.invert))}function s(t){E++||t({type:\"zoomstart\"})}function u(t){l(),t({type:\"zoom\",scale:T.k,translate:[T.x,T.y]})}function c(t){--E||(t({type:\"zoomend\"}),v=null)}function h(){function t(){l=1,a(lo.mouse(r),f),u(o)}function i(){h.on(k,null).on(N,null),d(l),c(o)}var r=this,o=I.of(r,arguments),l=0,h=lo.select(e(r)).on(k,t).on(N,i),f=n(lo.mouse(r)),d=Q(r);Ws.call(r),s(o)}function f(){function t(){var t=lo.touches(g);return d=T.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var e=lo.event.target;lo.select(e).on(b,i).on(S,l),w.push(e);for(var n=lo.event.changedTouches,r=0,a=n.length;a>r;++r)v[n[r].identifier]=null;var s=t(),u=Date.now();if(1===s.length){if(500>u-x){var c=s[0];o(g,c,v[c.identifier],Math.floor(Math.log(T.k)/Math.LN2)+1),C()}x=u}else if(s.length>1){var c=s[0],h=s[1],f=c[0]-h[0],d=c[1]-h[1];m=f*f+d*d}}function i(){var t,e,n,i,o=lo.touches(g);Ws.call(g);for(var l=0,s=o.length;s>l;++l,i=null)if(n=o[l],i=v[n.identifier]){if(e)break;t=n,e=i}if(i){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(h*d)}x=null,a(t,e),u(p)}function l(){if(lo.event.touches.length){for(var e=lo.event.changedTouches,n=0,i=e.length;i>n;++n)delete v[e[n].identifier];for(var r in v)return void t()}lo.selectAll(w).on(y,null),M.on(F,h).on(_,f),P(),c(p)}var d,g=this,p=I.of(g,arguments),v={},m=0,y=\".zoom-\"+lo.event.changedTouches[0].identifier,b=\"touchmove\"+y,S=\"touchend\"+y,w=[],M=lo.select(g),P=Q(g);e(),s(p),M.on(F,null).on(_,e)}function d(){var t=I.of(this,arguments);y?clearTimeout(y):(Ws.call(this),p=n(v=m||lo.mouse(this)),s(t)),y=setTimeout(function(){y=null,c(t)},50),C(),r(Math.pow(2,.002*Xo())*T.k),a(v,p),u(t)}function g(){var t=lo.mouse(this),e=Math.log(T.k)/Math.LN2;o(this,t,n(t),lo.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var p,v,m,y,x,b,S,w,M,T={x:0,y:0,k:1},D=[960,500],A=Ko,L=250,E=0,F=\"mousedown.zoom\",k=\"mousemove.zoom\",N=\"mouseup.zoom\",_=\"touchstart.zoom\",I=P(t,\"zoomstart\",\"zoom\",\"zoomend\");return Qo||(Qo=\"onwheel\"in co?(Xo=function(){return-lo.event.deltaY*(lo.event.deltaMode?120:1)},\"wheel\"):\"onmousewheel\"in co?(Xo=function(){return lo.event.wheelDelta},\"mousewheel\"):(Xo=function(){return-lo.event.detail},\"MozMousePixelScroll\")),t.event=function(t){t.each(function(){var t=I.of(this,arguments),e=T;Vs?lo.select(this).transition().each(\"start.zoom\",function(){T=this.__chart__||{x:0,y:0,k:1},s(t)}).tween(\"zoom:zoom\",function(){var n=D[0],i=D[1],r=v?v[0]:n/2,a=v?v[1]:i/2,o=lo.interpolateZoom([(r-T.x)/T.k,(a-T.y)/T.k,n/T.k],[(r-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var i=o(e),l=n/i[2];this.__chart__=T={x:r-i[0]*l,y:a-i[1]*l,k:l},u(t)}}).each(\"interrupt.zoom\",function(){c(t)}).each(\"end.zoom\",function(){c(t)}):(this.__chart__=T,s(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(T={x:+e[0],y:+e[1],k:T.k},l(),t):[T.x,T.y]},t.scale=function(e){return arguments.length?(T={x:T.x,y:T.y,k:null},r(+e),l(),t):T.k},t.scaleExtent=function(e){return arguments.length?(A=null==e?Ko:[+e[0],+e[1]],t):A},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(D=e&&[+e[0],+e[1]],t):D},t.duration=function(e){return arguments.length?(L=+e,t):L},t.x=function(e){return arguments.length?(S=e,b=e.copy(),T={x:0,y:0,k:1},t):S},t.y=function(e){return arguments.length?(M=e,w=e.copy(),T={x:0,y:0,k:1},t):M},lo.rebind(t,I,\"on\")};var Xo,Qo,Ko=[0,1/0];lo.color=ot,ot.prototype.toString=function(){return this.rgb()+\"\"},lo.hsl=lt;var $o=lt.prototype=new ot;$o.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},$o.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},$o.rgb=function(){return st(this.h,this.s,this.l)},lo.hcl=ut;var Zo=ut.prototype=new ot;Zo.brighter=function(t){return new ut(this.h,this.c,Math.min(100,this.l+Jo*(arguments.length?t:1)))},Zo.darker=function(t){return new ut(this.h,this.c,Math.max(0,this.l-Jo*(arguments.length?t:1)))},Zo.rgb=function(){return ct(this.h,this.c,this.l).rgb()},lo.lab=ht;var Jo=18,tl=.95047,el=1,nl=1.08883,il=ht.prototype=new ot;il.brighter=function(t){return new ht(Math.min(100,this.l+Jo*(arguments.length?t:1)),this.a,this.b)},il.darker=function(t){return new ht(Math.max(0,this.l-Jo*(arguments.length?t:1)),this.a,this.b)},il.rgb=function(){return ft(this.l,this.a,this.b)},lo.rgb=mt;var rl=mt.prototype=new ot;rl.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new mt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new mt(r,r,r)},rl.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},rl.hsl=function(){return wt(this.r,this.g,this.b)},rl.toString=function(){return\"#\"+bt(this.r)+bt(this.g)+bt(this.b)};var al=lo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});al.forEach(function(t,e){al.set(t,yt(e))}),lo.functor=Pt,lo.xhr=Dt(y),lo.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=At(t,e,null==n?i:r(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?i:r(t)):n},o}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return l.test(t)?'\"'+t.replace(/\\\"/g,'\"\"')+'\"':t}var l=new RegExp('[\"'+t+\"\\n]\"),s=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function(\"d\",\"return {\"+t.map(function(t,e){return JSON.stringify(t)+\": d[\"+e+\"]\"}).join(\",\")+\"}\");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=u)return o;if(r)return r=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/\"\"/g,'\"')}for(;u>c;){var i=t.charCodeAt(c++),l=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++l);else if(i!==s)continue;return t.slice(e,c-l)}return t.slice(e)}for(var i,r,a={},o={},l=[],u=t.length,c=0,h=0;(i=n())!==o;){for(var f=[];i!==a&&i!==o;)f.push(i),i=n();e&&null==(f=e(f,h++))||l.push(f)}return l},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new m,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join(\"\\n\")},n.formatRows=function(t){return t.map(a).join(\"\\n\")},n},lo.csv=lo.dsv(\",\",\"text/csv\"),lo.tsv=lo.dsv(\"\t\",\"text/tab-separated-values\");var ol,ll,sl,ul,cl=this[b(this,\"requestAnimationFrame\")]||function(t){setTimeout(t,17)};lo.timer=function(){Ft.apply(this,arguments)},lo.timer.flush=function(){Nt(),_t()},lo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var hl=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"].map(Ot);lo.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=lo.round(t,It(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),hl[8+n/3]};var fl=/(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i,dl=lo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=lo.round(t,It(t,e))).toFixed(Math.max(0,Math.min(20,It(t*(1+1e-15),e))))}}),gl=lo.time={},pl=Date;Rt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vl.setUTCDate.apply(this._,arguments)},setDay:function(){vl.setUTCDay.apply(this._,arguments)},setFullYear:function(){vl.setUTCFullYear.apply(this._,arguments)},setHours:function(){vl.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vl.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vl.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vl.setUTCMonth.apply(this._,arguments)},setSeconds:function(){vl.setUTCSeconds.apply(this._,arguments)},setTime:function(){vl.setTime.apply(this._,arguments)}};var vl=Date.prototype;gl.year=Vt(function(t){return t=gl.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),gl.years=gl.year.range,gl.years.utc=gl.year.utc.range,gl.day=Vt(function(t){var e=new pl(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),gl.days=gl.day.range,gl.days.utc=gl.day.utc.range,gl.dayOfYear=function(t){var e=gl.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},[\"sunday\",\"monday\",\"tuesday\",\"wednesday\",\"thursday\",\"friday\",\"saturday\"].forEach(function(t,e){e=7-e;var n=gl[t]=Vt(function(t){return(t=gl.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=gl.year(t).getDay();return Math.floor((gl.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});gl[t+\"s\"]=n.range,gl[t+\"s\"].utc=n.utc.range,gl[t+\"OfYear\"]=function(t){var n=gl.year(t).getDay();return Math.floor((gl.dayOfYear(t)+(n+e)%7)/7)}}),gl.week=gl.sunday,gl.weeks=gl.sunday.range,gl.weeks.utc=gl.sunday.utc.range,gl.weekOfYear=gl.sundayOfYear;var ml={\"-\":\"\",_:\" \",0:\"0\"},yl=/^\\s*\\d+/,xl=/^%/;lo.locale=function(t){return{numberFormat:Bt(t),timeFormat:Wt(t)}};var bl=lo.locale({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"],dateTime:\"%a %b %e %X %Y\",date:\"%m/%d/%Y\",time:\"%H:%M:%S\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],\nshortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});lo.format=bl.numberFormat,lo.geo={},ue.prototype={s:0,t:0,add:function(t){ce(t,this.t,Sl),ce(Sl.s,this.s,this),this.s?this.t+=Sl.t:this.s=Sl.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Sl=new ue;lo.geo.stream=function(t,e){t&&wl.hasOwnProperty(t.type)?wl[t.type](t,e):he(t,e)};var wl={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)he(n[i].geometry,e)}},Ml={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fe(n[i],e,0)},Polygon:function(t,e){de(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)de(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)he(n[i],e)}};lo.geo.area=function(t){return Cl=0,lo.geo.stream(t,Pl),Cl};var Cl,Tl=new ue,Pl={sphere:function(){Cl+=4*Ro},point:S,lineStart:S,lineEnd:S,polygonStart:function(){Tl.reset(),Pl.lineStart=ge},polygonEnd:function(){var t=2*Tl;Cl+=0>t?4*Ro+t:t,Pl.lineStart=Pl.lineEnd=Pl.point=S}};lo.geo.bounds=function(){function t(t,e){x.push(b=[c=t,f=t]),h>e&&(h=e),e>d&&(d=e)}function e(e,n){var i=pe([e*Ho,n*Ho]);if(m){var r=me(m,i),a=[r[1],-r[0],0],o=me(a,r);be(o),o=Se(o);var s=e-g,u=s>0?1:-1,p=o[0]*Go*u,v=bo(s)>180;if(v^(p>u*g&&u*e>p)){var y=o[1]*Go;y>d&&(d=y)}else if(p=(p+360)%360-180,v^(p>u*g&&u*e>p)){var y=-o[1]*Go;h>y&&(h=y)}else h>n&&(h=n),n>d&&(d=n);v?g>e?l(c,e)>l(c,f)&&(f=e):l(e,f)>l(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>g?l(c,e)>l(c,f)&&(f=e):l(e,f)>l(c,f)&&(c=e)}else t(e,n);m=i,g=e}function n(){S.point=e}function i(){b[0]=c,b[1]=f,S.point=t,m=null}function r(t,n){if(m){var i=t-g;y+=bo(i)>180?i+(i>0?360:-360):i}else p=t,v=n;Pl.point(t,n),e(t,n)}function a(){Pl.lineStart()}function o(){r(p,v),Pl.lineEnd(),bo(y)>Bo&&(c=-(f=180)),b[0]=c,b[1]=f,m=null}function l(t,e){return(e-=t)<0?e+360:e}function s(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,f,d,g,p,v,m,y,x,b,S={point:t,lineStart:n,lineEnd:i,polygonStart:function(){S.point=r,S.lineStart=a,S.lineEnd=o,y=0,Pl.polygonStart()},polygonEnd:function(){Pl.polygonEnd(),S.point=t,S.lineStart=n,S.lineEnd=i,0>Tl?(c=-(f=180),h=-(d=90)):y>Bo?d=90:-Bo>y&&(h=-90),b[0]=c,b[1]=f}};return function(t){d=f=-(c=h=1/0),x=[],lo.geo.stream(t,S);var e=x.length;if(e){x.sort(s);for(var n,i=1,r=x[0],a=[r];e>i;++i)n=x[i],u(n[0],r)||u(n[1],r)?(l(r[0],n[1])>l(r[0],r[1])&&(r[1]=n[1]),l(n[0],r[1])>l(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,g=-(1/0),e=a.length-1,i=0,r=a[e];e>=i;r=n,++i)n=a[i],(o=l(r[1],n[0]))>g&&(g=o,c=n[0],f=r[1])}return x=b=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,d]]}}(),lo.geo.centroid=function(t){Dl=Al=Ll=El=Fl=kl=Nl=_l=Il=Ol=Bl=0,lo.geo.stream(t,zl);var e=Il,n=Ol,i=Bl,r=e*e+n*n+i*i;return zo>r&&(e=kl,n=Nl,i=_l,Bo>Al&&(e=Ll,n=El,i=Fl),r=e*e+n*n+i*i,zo>r)?[NaN,NaN]:[Math.atan2(n,e)*Go,et(i/Math.sqrt(r))*Go]};var Dl,Al,Ll,El,Fl,kl,Nl,_l,Il,Ol,Bl,zl={sphere:S,point:Me,lineStart:Te,lineEnd:Pe,polygonStart:function(){zl.lineStart=De},polygonEnd:function(){zl.lineStart=Te}},Rl=Ne(Le,Be,Re,[-Ro,-Ro/2]),Vl=1e9;lo.geo.clipExtent=function(){var t,e,n,i,r,a,o={stream:function(t){return r&&(r.valid=!1),r=a(t),r.valid=!0,r},extent:function(l){return arguments.length?(a=He(t=+l[0][0],e=+l[0][1],n=+l[1][0],i=+l[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,i]]}};return o.extent([[0,0],[960,500]])},(lo.geo.conicEqualArea=function(){return Ge(je)}).raw=je,lo.geo.albers=function(){return lo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},lo.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(i(a,o),e)||r(a,o),e}var e,n,i,r,a=lo.geo.albers(),o=lo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=lo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?l:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),i=l.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),l.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),l.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var u=a.scale(),c=+e[0],h=+e[1];return n=a.translate(e).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(s).point,i=o.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Bo,h+.12*u+Bo],[c-.214*u-Bo,h+.234*u-Bo]]).stream(s).point,r=l.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Bo,h+.166*u+Bo],[c-.115*u-Bo,h+.234*u-Bo]]).stream(s).point,t},t.scale(1070)};var Ul,Wl,Hl,Gl,jl,ql,Yl={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Wl=0,Yl.lineStart=qe},polygonEnd:function(){Yl.lineStart=Yl.lineEnd=Yl.point=S,Ul+=bo(Wl/2)}},Xl={point:Ye,lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S},Ql={point:Ke,lineStart:$e,lineEnd:Ze,polygonStart:function(){Ql.lineStart=Je},polygonEnd:function(){Ql.point=Ke,Ql.lineStart=$e,Ql.lineEnd=Ze}};lo.geo.path=function(){function t(t){return t&&(\"function\"==typeof l&&a.pointRadius(+l.apply(this,arguments)),o&&o.valid||(o=r(a)),lo.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,i,r,a,o,l=4.5;return t.area=function(t){return Ul=0,lo.geo.stream(t,r(Yl)),Ul},t.centroid=function(t){return Ll=El=Fl=kl=Nl=_l=Il=Ol=Bl=0,lo.geo.stream(t,r(Ql)),Bl?[Il/Bl,Ol/Bl]:_l?[kl/_l,Nl/_l]:Fl?[Ll/Fl,El/Fl]:[NaN,NaN]},t.bounds=function(t){return jl=ql=-(Hl=Gl=1/0),lo.geo.stream(t,r(Xl)),[[Hl,Gl],[jl,ql]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||nn(t):y,e()):n},t.context=function(t){return arguments.length?(a=null==(i=t)?new Xe:new tn(t),\"function\"!=typeof l&&a.pointRadius(l),e()):i},t.pointRadius=function(e){return arguments.length?(l=\"function\"==typeof e?e:(a.pointRadius(+e),+e),t):l},t.projection(lo.geo.albersUsa()).context(null)},lo.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var i in t)n[i]=t[i];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},lo.geo.projection=on,lo.geo.projectionMutator=ln,(lo.geo.equirectangular=function(){return on(un)}).raw=un.invert=un,lo.geo.rotation=function(t){function e(e){return e=t(e[0]*Ho,e[1]*Ho),e[0]*=Go,e[1]*=Go,e}return t=hn(t[0]%360*Ho,t[1]*Ho,t.length>2?t[2]*Ho:0),e.invert=function(e){return e=t.invert(e[0]*Ho,e[1]*Ho),e[0]*=Go,e[1]*=Go,e},e},cn.invert=un,lo.geo.circle=function(){function t(){var t=\"function\"==typeof i?i.apply(this,arguments):i,e=hn(-t[0]*Ho,-t[1]*Ho,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Go,t[1]*=Go}}),{type:\"Polygon\",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=pn((e=+i)*Ho,r*Ho),t):e},t.precision=function(i){return arguments.length?(n=pn(e*Ho,(r=+i)*Ho),t):r},t.angle(90)},lo.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ho,r=t[1]*Ho,a=e[1]*Ho,o=Math.sin(i),l=Math.cos(i),s=Math.sin(r),u=Math.cos(r),c=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=u*c-s*h*l)*n),s*c+u*h*l)},lo.geo.graticule=function(){function t(){return{type:\"MultiLineString\",coordinates:e()}}function e(){return lo.range(Math.ceil(a/v)*v,r,v).map(f).concat(lo.range(Math.ceil(u/m)*m,s,m).map(d)).concat(lo.range(Math.ceil(i/g)*g,n,g).filter(function(t){return bo(t%v)>Bo}).map(c)).concat(lo.range(Math.ceil(l/p)*p,o,p).filter(function(t){return bo(t%m)>Bo}).map(h))}var n,i,r,a,o,l,s,u,c,h,f,d,g=10,p=g,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:\"LineString\",coordinates:t}})},t.outline=function(){return{type:\"Polygon\",coordinates:[f(a).concat(d(s).slice(1),f(r).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],u=+e[0][1],s=+e[1][1],a>r&&(e=a,a=r,r=e),u>s&&(e=u,u=s,s=e),t.precision(y)):[[a,u],[r,s]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],l=+e[0][1],o=+e[1][1],i>n&&(e=i,i=n,n=e),l>o&&(e=l,l=o,o=e),t.precision(y)):[[i,l],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(g=+e[0],p=+e[1],t):[g,p]},t.precision=function(e){return arguments.length?(y=+e,c=mn(l,o,90),h=yn(i,n,y),f=mn(u,s,90),d=yn(a,r,y),t):y},t.majorExtent([[-180,-90+Bo],[180,90-Bo]]).minorExtent([[-180,-80-Bo],[180,80+Bo]])},lo.geo.greatArc=function(){function t(){return{type:\"LineString\",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=xn,r=bn;return t.distance=function(){return lo.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e=\"function\"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n=\"function\"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},lo.geo.interpolate=function(t,e){return Sn(t[0]*Ho,t[1]*Ho,e[0]*Ho,e[1]*Ho)},lo.geo.length=function(t){return Kl=0,lo.geo.stream(t,$l),Kl};var Kl,$l={sphere:S,point:S,lineStart:wn,lineEnd:S,polygonStart:S,polygonEnd:S},Zl=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(lo.geo.azimuthalEqualArea=function(){return on(Zl)}).raw=Zl;var Jl=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(lo.geo.azimuthalEquidistant=function(){return on(Jl)}).raw=Jl,(lo.geo.conicConformal=function(){return Ge(Cn)}).raw=Cn,(lo.geo.conicEquidistant=function(){return Ge(Tn)}).raw=Tn;var ts=Mn(function(t){return 1/t},Math.atan);(lo.geo.gnomonic=function(){return on(ts)}).raw=ts,Pn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Wo]},(lo.geo.mercator=function(){return Dn(Pn)}).raw=Pn;var es=Mn(function(){return 1},Math.asin);(lo.geo.orthographic=function(){return on(es)}).raw=es;var ns=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(lo.geo.stereographic=function(){return on(ns)}).raw=ns,An.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Wo]},(lo.geo.transverseMercator=function(){var t=Dn(An),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=An,lo.geom={},lo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=Pt(n),a=Pt(i),o=t.length,l=[],s=[];for(e=0;o>e;e++)l.push([+r.call(this,t[e],e),+a.call(this,t[e],e),e]);for(l.sort(kn),e=0;o>e;e++)s.push([l[e][0],-l[e][1]]);var u=Fn(l),c=Fn(s),h=c[0]===u[0],f=c[c.length-1]===u[u.length-1],d=[];for(e=u.length-1;e>=0;--e)d.push(t[l[u[e]][2]]);for(e=+h;e<c.length-f;++e)d.push(t[l[c[e]][2]]);return d}var n=Ln,i=En;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},lo.geom.polygon=function(t){return To(t,is),t};var is=lo.geom.polygon.prototype=[];is.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},is.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,l=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=l,l=this[i],n=e[0]*l[1]-l[0]*e[1],a+=(e[0]+l[0])*n,o+=(e[1]+l[1])*n;return[a*t,o*t]},is.clip=function(t){for(var e,n,i,r,a,o,l=In(t),s=-1,u=this.length-In(this),c=this[u-1];++s<u;){for(e=t.slice(),t.length=0,r=this[s],a=e[(i=e.length-l)-1],n=-1;++n<i;)o=e[n],Nn(o,c,r)?(Nn(a,c,r)||t.push(_n(a,o,c,r)),t.push(o)):Nn(a,c,r)&&t.push(_n(a,o,c,r)),a=o;l&&t.push(t[0]),c=r}return t};var rs,as,os,ls,ss,us=[],cs=[];Hn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(jn),e.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=oi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ri(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ai(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(ai(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ri(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?oi(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ri(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ai(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ri(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,ai(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ri(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,ai(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},lo.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=l[0][0],r=l[0][1],a=l[1][0],o=l[1][1];return li(n(t),l).cells.forEach(function(n,l){var s=n.edges,u=n.site,c=e[l]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=i&&u.x<=a&&u.y>=r&&u.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[];c.point=t[l]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/Bo)*Bo,y:Math.round(o(t,e)/Bo)*Bo,i:e}})}var i=Ln,r=En,a=i,o=r,l=hs;return t?e(t):(e.links=function(t){return li(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return li(n(t)).cells.forEach(function(n,i){for(var r,a,o=n.site,l=n.edges.sort(jn),s=-1,u=l.length,c=l[u-1].edge,h=c.l===o?c.r:c.l;++s<u;)r=c,a=h,c=l[s].edge,h=c.l===o?c.r:c.l,i<a.i&&i<h.i&&ui(o,a,h)<0&&e.push([t[i],t[a.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(a=Pt(i=t),e):i},e.y=function(t){return arguments.length?(o=Pt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(l=null==t?hs:t,e):l===hs?null:l},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):l===hs?null:l&&l[1]},e)};var hs=[[-1e6,-1e6],[1e6,1e6]];lo.geom.delaunay=function(t){return lo.geom.voronoi().triangles(t)},lo.geom.quadtree=function(t,e,n,i,r){function a(t){function a(t,e,n,i,r,a,o,l){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var s=t.x,c=t.y;if(null!=s)if(bo(s-n)+bo(c-i)<.01)u(t,e,n,i,r,a,o,l);else{var h=t.point;t.x=t.y=t.point=null,u(t,h,s,c,r,a,o,l),u(t,e,n,i,r,a,o,l)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,a,o,l)}function u(t,e,n,i,r,o,l,s){var u=.5*(r+l),c=.5*(o+s),h=n>=u,f=i>=c,d=f<<1|h;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=fi()),h?r=u:l=u,f?o=c:s=c,a(t,e,n,i,r,o,l,s)}var c,h,f,d,g,p,v,m,y,x=Pt(l),b=Pt(s);if(null!=e)p=e,v=n,m=i,y=r;else if(m=y=-(p=v=1/0),h=[],f=[],g=t.length,o)for(d=0;g>d;++d)c=t[d],c.x<p&&(p=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),h.push(c.x),f.push(c.y);else for(d=0;g>d;++d){var S=+x(c=t[d],d),w=+b(c,d);p>S&&(p=S),v>w&&(v=w),S>m&&(m=S),w>y&&(y=w),h.push(S),f.push(w)}var M=m-p,C=y-v;M>C?y=v+M:m=p+C;var T=fi();if(T.add=function(t){a(T,t,+x(t,++d),+b(t,d),p,v,m,y)},T.visit=function(t){di(t,T,p,v,m,y)},T.find=function(t){return gi(T,t[0],t[1],p,v,m,y)},d=-1,null==e){for(;++d<g;)a(T,t[d],h[d],f[d],p,v,m,y);--d}else t.forEach(T.add);return h=f=t=c=null,T}var o,l=Ln,s=En;return(o=arguments.length)?(l=ci,s=hi,3===o&&(r=n,i=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(l=t,a):l},a.y=function(t){return arguments.length?(s=t,a):s},a.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a):null==e?null:[[e,n],[i,r]]},a.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),a):null==e?null:[i-e,r-n]},a)},lo.interpolateRgb=pi,lo.interpolateObject=vi,lo.interpolateNumber=mi,lo.interpolateString=yi;var fs=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,ds=new RegExp(fs.source,\"g\");lo.interpolate=xi,lo.interpolators=[function(t,e){var n=typeof e;return(\"string\"===n?al.has(e.toLowerCase())||/^(#|rgb\\(|hsl\\()/i.test(e)?pi:yi:e instanceof ot?pi:Array.isArray(e)?bi:\"object\"===n&&isNaN(e)?vi:mi)(t,e)}],lo.interpolateArray=bi;var gs=function(){return y},ps=lo.map({linear:gs,poly:Di,quad:function(){return Ci},cubic:function(){return Ti},sin:function(){return Ai},exp:function(){return Li},circle:function(){return Ei},elastic:Fi,back:ki,bounce:function(){return Ni}}),vs=lo.map({\"in\":y,out:wi,\"in-out\":Mi,\"out-in\":function(t){return Mi(wi(t))}});lo.ease=function(t){var e=t.indexOf(\"-\"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):\"in\";return n=ps.get(n)||gs,i=vs.get(i)||y,Si(i(n.apply(null,so.call(arguments,1))))},lo.interpolateHcl=_i,lo.interpolateHsl=Ii,lo.interpolateLab=Oi,lo.interpolateRound=Bi,lo.transform=function(t){var e=co.createElementNS(lo.ns.prefix.svg,\"g\");return(lo.transform=function(t){if(null!=t){e.setAttribute(\"transform\",t);var n=e.transform.baseVal.consolidate()}return new zi(n?n.matrix:ms)})(t)},zi.prototype.toString=function(){return\"translate(\"+this.translate+\")rotate(\"+this.rotate+\")skewX(\"+this.skew+\")scale(\"+this.scale+\")\"};var ms={a:1,b:0,c:0,d:1,e:0,f:0};lo.interpolateTransform=Yi,lo.layout={},lo.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Ki(t[n]));return e}},lo.layout.chord=function(){function t(){var t,u,h,f,d,g={},p=[],v=lo.range(a),m=[];for(n=[],i=[],t=0,f=-1;++f<a;){for(u=0,d=-1;++d<a;)u+=r[f][d];p.push(u),m.push(lo.range(a)),t+=u}for(o&&v.sort(function(t,e){return o(p[t],p[e])}),l&&m.forEach(function(t,e){t.sort(function(t,n){return l(r[e][t],r[e][n])})}),t=(Vo-c*a)/t,u=0,f=-1;++f<a;){for(h=u,d=-1;++d<a;){var y=v[f],x=m[y][d],b=r[y][x],S=u,w=u+=b*t;g[y+\"-\"+x]={index:y,subindex:x,startAngle:S,endAngle:w,value:b}}i[y]={index:y,startAngle:h,endAngle:u,value:p[y]},u+=c}for(f=-1;++f<a;)for(d=f-1;++d<a;){var M=g[f+\"-\"+d],C=g[d+\"-\"+f];(M.value||C.value)&&n.push(M.value<C.value?{source:C,target:M}:{source:M,target:C})}s&&e()}function e(){n.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,a,o,l,s,u={},c=0;return u.matrix=function(t){return arguments.length?(a=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(o=t,n=i=null,u):o},u.sortSubgroups=function(t){return arguments.length?(l=t,n=null,u):l},u.sortChords=function(t){return arguments.length?(s=t,n&&e(),u):s},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},lo.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,l=r-n,s=a*a+o*o;if(s>l*l/m){if(p>s){var u=e.charge/s;t.px-=a*u,t.py-=o*u}return!0}if(e.point&&s&&p>s){var u=e.pointCharge/s;t.px-=a*u,t.py-=o*u}}return!e.charge}}function e(t){t.px=lo.event.x,t.py=lo.event.y,s.resume()}var n,i,r,a,o,l,s={},u=lo.dispatch(\"start\",\"tick\",\"end\"),c=[1,1],h=.9,f=ys,d=xs,g=-30,p=bs,v=.1,m=.64,x=[],b=[];return s.tick=function(){if((r*=.99)<.005)return n=null,u.end({type:\"end\",alpha:r=0}),!0;var e,i,s,f,d,p,m,y,S,w=x.length,M=b.length;for(i=0;M>i;++i)s=b[i],f=s.source,d=s.target,y=d.x-f.x,S=d.y-f.y,(p=y*y+S*S)&&(p=r*o[i]*((p=Math.sqrt(p))-a[i])/p,y*=p,S*=p,d.x-=y*(m=f.weight+d.weight?f.weight/(f.weight+d.weight):.5),d.y-=S*m,f.x+=y*(m=1-m),f.y+=S*m);if((m=r*v)&&(y=c[0]/2,S=c[1]/2,i=-1,m))for(;++i<w;)s=x[i],s.x+=(y-s.x)*m,s.y+=(S-s.y)*m;if(g)for(ir(e=lo.geom.quadtree(x),r,l),i=-1;++i<w;)(s=x[i]).fixed||e.visit(t(s));for(i=-1;++i<w;)s=x[i],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*h,s.y-=(s.py-(s.py=s.y))*h);u.tick({type:\"tick\",alpha:r})},s.nodes=function(t){return arguments.length?(x=t,s):x},s.links=function(t){return arguments.length?(b=t,s):b},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(f=\"function\"==typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(d=\"function\"==typeof t?t:+t,s):d},s.friction=function(t){return arguments.length?(h=+t,s):h},s.charge=function(t){return arguments.length?(g=\"function\"==typeof t?t:+t,s):g},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(n.c=null,n.t=NaN,n=null,u.end({type:\"end\",alpha:r=0})):t>0&&(u.start({type:\"start\",alpha:r=t}),n=Ft(s.tick)),s):r},s.start=function(){function t(t,i){if(!n){for(n=new Array(r),s=0;r>s;++s)n[s]=[];for(s=0;u>s;++s){var a=b[s];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,l=n[e],s=-1,c=l.length;++s<c;)if(!isNaN(o=l[s][t]))return o;return Math.random()*i}var e,n,i,r=x.length,u=b.length,h=c[0],p=c[1];for(e=0;r>e;++e)(i=x[e]).index=e,i.weight=0;for(e=0;u>e;++e)i=b[e],\"number\"==typeof i.source&&(i.source=x[i.source]),\"number\"==typeof i.target&&(i.target=x[i.target]),++i.source.weight,++i.target.weight;for(e=0;r>e;++e)i=x[e],isNaN(i.x)&&(i.x=t(\"x\",h)),isNaN(i.y)&&(i.y=t(\"y\",p)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(a=[],\"function\"==typeof f)for(e=0;u>e;++e)a[e]=+f.call(this,b[e],e);else for(e=0;u>e;++e)a[e]=f;if(o=[],\"function\"==typeof d)for(e=0;u>e;++e)o[e]=+d.call(this,b[e],e);else for(e=0;u>e;++e)o[e]=d;if(l=[],\"function\"==typeof g)for(e=0;r>e;++e)l[e]=+g.call(this,x[e],e);else for(e=0;r>e;++e)l[e]=g;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return i||(i=lo.behavior.drag().origin(y).on(\"dragstart.force\",Ji).on(\"drag.force\",e).on(\"dragend.force\",tr)),arguments.length?void this.on(\"mouseover.force\",er).on(\"mouseout.force\",nr).call(i):i},lo.rebind(s,u,\"on\")};var ys=20,xs=1,bs=1/0;lo.layout.hierarchy=function(){function t(r){var a,o=[r],l=[];for(r.depth=0;null!=(a=o.pop());)if(l.push(a),(u=n.call(t,a,a.depth))&&(s=u.length)){for(var s,u,c;--s>=0;)o.push(c=u[s]),c.parent=a,c.depth=a.depth+1;i&&(a.value=0),a.children=u}else i&&(a.value=+i.call(t,a,a.depth)||0),delete a.children;return or(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),l}var e=ur,n=lr,i=sr;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(ar(e,function(t){t.children&&(t.value=0)}),or(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},lo.layout.partition=function(){function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,l,s,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(l=a[u],n,s=l.value*i,r),n+=s}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,e(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=lo.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},rr(n,i)},lo.layout.pie=function(){function t(o){var l,s=o.length,u=o.map(function(n,i){return+e.call(t,n,i)}),c=+(\"function\"==typeof i?i.apply(this,arguments):i),h=(\"function\"==typeof r?r.apply(this,arguments):r)-c,f=Math.min(Math.abs(h)/s,+(\"function\"==typeof a?a.apply(this,arguments):a)),d=f*(0>h?-1:1),g=lo.sum(u),p=g?(h-s*d)/g:0,v=lo.range(s),m=[];return null!=n&&v.sort(n===Ss?function(t,e){return u[e]-u[t]}:function(t,e){return n(o[t],o[e])}),v.forEach(function(t){m[t]={data:o[t],value:l=u[t],startAngle:c,endAngle:c+=l*p+d,padAngle:f}}),m}var e=Number,n=Ss,i=0,r=Vo,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var Ss={};lo.layout.stack=function(){function t(l,s){if(!(f=l.length))return l;var u=l.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),h=n.call(t,c,s);u=lo.permute(u,h),c=lo.permute(c,h);var f,d,g,p,v=i.call(t,c,s),m=u[0].length;for(g=0;m>g;++g)for(r.call(t,u[0][g],p=v[g],c[0][g][1]),d=1;f>d;++d)r.call(t,u[d][g],p+=c[d-1][g][1],c[d][g][1]);return l}var e=y,n=gr,i=pr,r=dr,a=hr,o=fr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n=\"function\"==typeof e?e:ws.get(e)||gr,t):n},t.offset=function(e){return arguments.length?(i=\"function\"==typeof e?e:Ms.get(e)||pr,t):i},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var ws=lo.map({\"inside-out\":function(t){var e,n,i=t.length,r=t.map(vr),a=t.map(mr),o=lo.range(i).sort(function(t,e){return r[t]-r[e]}),l=0,s=0,u=[],c=[];for(e=0;i>e;++e)n=o[e],s>l?(l+=a[n],u.push(n)):(s+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return lo.range(t.length).reverse()},\"default\":gr}),Ms=lo.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],l=0,s=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>l&&(l=i),o.push(i)}for(n=0;a>n;++n)s[n]=(l-o[n])/2;return s},wiggle:function(t){var e,n,i,r,a,o,l,s,u,c=t.length,h=t[0],f=h.length,d=[];for(d[0]=s=u=0,n=1;f>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,a=0,l=h[n][0]-h[n-1][0];c>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*l);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/l;a+=o*t[e][n][1]}d[n]=s-=r?a/r*l:0,u>s&&(u=s)}for(n=0;f>n;++n)d[n]-=u;return d},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,l=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)l[n]=0;return l},zero:pr});lo.layout.histogram=function(){function t(t,a){for(var o,l,s=[],u=t.map(n,this),c=i.call(this,u,a),h=r.call(this,c,u,a),a=-1,f=u.length,d=h.length-1,g=e?1:1/f;++a<d;)o=s[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(d>0)for(a=-1;++a<f;)l=u[a],l>=c[0]&&l<=c[1]&&(o=s[lo.bisect(h,l,1,d)-1],o.y+=g,o.push(t[a]));return s}var e=!0,n=Number,i=Sr,r=xr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=Pt(e),t):i},t.bins=function(e){return arguments.length?(r=\"number\"==typeof e?function(t){return br(t,e)}:Pt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},lo.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),l=o[0],s=r[0],u=r[1],c=null==e?Math.sqrt:\"function\"==typeof e?e:function(){return e};if(l.x=l.y=0,or(l,function(t){t.r=+c(t.value)}),or(l,Pr),i){var h=i*(e?1:Math.max(2*l.r/s,2*l.r/u))/2;or(l,function(t){t.r+=h}),or(l,Pr),or(l,function(t){t.r-=h})}return Lr(l,s/2,u/2,e?1:1/Math.max(2*l.r/s,2*l.r/u)),o}var e,n=lo.layout.hierarchy().sort(wr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||\"function\"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},rr(t,n)},lo.layout.tree=function(){function t(t,r){var c=o.call(this,t,r),h=c[0],f=e(h);if(or(f,n),f.parent.m=-f.z,ar(f,i),u)ar(h,a);else{var d=h,g=h,p=h;ar(h,function(t){t.x<d.x&&(d=t),t.x>g.x&&(g=t),t.depth>p.depth&&(p=t)});var v=l(d,g)/2-d.x,m=s[0]/(g.x+l(g,d)/2+v),y=s[1]/(p.depth||1);ar(h,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,l=a.length;l>o;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){Ir(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+l(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+l(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,a=t,o=e,s=r.parent.children[0],u=r.m,c=a.m,h=o.m,f=s.m;o=Nr(o),r=kr(r),o&&r;)s=kr(s),a=Nr(a),a.a=t,i=o.z+h-r.z-u+l(o._,r._),i>0&&(_r(Or(o,t,n),t,i),u+=i,c+=i),h+=o.m,u+=r.m,f+=s.m,c+=a.m;o&&!Nr(a)&&(a.t=o,a.m+=h-c),r&&!kr(s)&&(s.t=r,s.m+=u-f,n=t)}return n}function a(t){t.x*=s[0],t.y=t.depth*s[1]}var o=lo.layout.hierarchy().sort(null).value(null),l=Fr,s=[1,1],u=null;return t.separation=function(e){return arguments.length?(l=e,t):l},t.size=function(e){return arguments.length?(u=null==(s=e)?a:null,t):u?null:s},t.nodeSize=function(e){return arguments.length?(u=null==(s=e)?null:a,t):u?s:null},rr(t,o)},lo.layout.cluster=function(){function t(t,a){var o,l=e.call(this,t,a),s=l[0],u=0;or(s,function(t){var e=t.children;e&&e.length?(t.x=zr(e),t.y=Br(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var c=Rr(s),h=Vr(s),f=c.x-n(c,h)/2,d=h.x+n(h,c)/2;return or(s,r?function(t){t.x=(t.x-s.x)*i[0],t.y=(s.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(d-f)*i[0],t.y=(1-(s.y?t.y/s.y:1))*i[1]}),l}var e=lo.layout.hierarchy().sort(null).value(null),n=Fr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},rr(t,e)},lo.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var a=n.children;if(a&&a.length){var o,l,s,u=h(n),c=[],f=a.slice(),g=1/0,p=\"slice\"===d?u.dx:\"dice\"===d?u.dy:\"slice-dice\"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(f,u.dx*u.dy/n.value),c.area=0;(s=f.length)>0;)c.push(o=f[s-1]),c.area+=o.area,\"squarify\"!==d||(l=i(c,p))<=g?(f.pop(),g=l):(c.area-=c.pop().area,r(c,p,u,!1),p=Math.min(u.dx,u.dy),c.length=c.area=0,g=1/0);c.length&&(r(c,p,u,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,o=h(e),l=i.slice(),s=[];for(t(l,o.dx*o.dy/e.value),s.area=0;a=l.pop();)s.push(a),s.area+=a.area,null!=a.z&&(r(s,a.z?o.dx:o.dy,o,!l.length),s.length=s.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,l=t.length;++o<l;)(n=t[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*g/i,i/(e*a*g)):1/0}function r(t,e,n,i){var r,a=-1,o=t.length,l=n.x,u=n.y,c=e?s(t.area/e):0;\nif(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<o;)r=t[a],r.x=l,r.y=u,r.dy=c,l+=r.dx=Math.min(n.x+n.dx-l,c?s(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<o;)r=t[a],r.x=l,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?s(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(i){var r=o||l(i),a=r[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&l.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=r),r}var o,l=lo.layout.hierarchy(),s=Math.round,u=[1,1],c=null,h=Ur,f=!1,d=\"squarify\",g=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(u=t,a):u},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?Ur(e):Wr(e,\"number\"==typeof n?[n,n,n,n]:n)}function n(e){return Wr(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?Ur:\"function\"==(i=typeof t)?e:\"number\"===i?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(s=t?Math.round:Number,a):s!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(g=t,a):g},a.mode=function(t){return arguments.length?(d=t+\"\",a):d},rr(a,l)},lo.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=lo.random.normal.apply(lo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=lo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},lo.scale={};var Cs={floor:y,ceil:y};lo.scale.linear=function(){return Qr([0,1],[0,1],xi,!1)};var Ts={s:1,g:1,p:1,r:1,e:1};lo.scale.log=function(){return ia(lo.scale.linear().domain([0,1]),10,!0,[1,10])};var Ps=lo.format(\".0e\"),Ds={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};lo.scale.pow=function(){return ra(lo.scale.linear(),1,[0,1])},lo.scale.sqrt=function(){return lo.scale.pow().exponent(.5)},lo.scale.ordinal=function(){return oa([],{t:\"range\",a:[[]]})},lo.scale.category10=function(){return lo.scale.ordinal().range(As)},lo.scale.category20=function(){return lo.scale.ordinal().range(Ls)},lo.scale.category20b=function(){return lo.scale.ordinal().range(Es)},lo.scale.category20c=function(){return lo.scale.ordinal().range(Fs)};var As=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xt),Ls=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xt),Es=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xt),Fs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xt);lo.scale.quantile=function(){return la([],[])},lo.scale.quantize=function(){return sa(0,1,[0,1])},lo.scale.threshold=function(){return ua([.5],[0,1])},lo.scale.identity=function(){return ca([0,1])},lo.svg={},lo.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+i.apply(this,arguments)),c=o.apply(this,arguments)-Wo,h=l.apply(this,arguments)-Wo,f=Math.abs(h-c),d=c>h?0:1;if(t>u&&(g=u,u=t,t=g),f>=Uo)return e(u,d)+(t?e(t,1-d):\"\")+\"Z\";var g,p,v,m,y,x,b,S,w,M,C,T,P=0,D=0,A=[];if((m=(+s.apply(this,arguments)||0)/2)&&(v=a===ks?Math.sqrt(t*t+u*u):+a.apply(this,arguments),d||(D*=-1),u&&(D=et(v/u*Math.sin(m))),t&&(P=et(v/t*Math.sin(m)))),u){y=u*Math.cos(c+D),x=u*Math.sin(c+D),b=u*Math.cos(h-D),S=u*Math.sin(h-D);var L=Math.abs(h-c-2*D)<=Ro?0:1;if(D&&ma(y,x,b,S)===d^L){var E=(c+h)/2;y=u*Math.cos(E),x=u*Math.sin(E),b=S=null}}else y=x=0;if(t){w=t*Math.cos(h-P),M=t*Math.sin(h-P),C=t*Math.cos(c+P),T=t*Math.sin(c+P);var F=Math.abs(c-h+2*P)<=Ro?0:1;if(P&&ma(w,M,C,T)===1-d^F){var k=(c+h)/2;w=t*Math.cos(k),M=t*Math.sin(k),C=T=null}}else w=M=0;if(f>Bo&&(g=Math.min(Math.abs(u-t)/2,+r.apply(this,arguments)))>.001){p=u>t^d?0:1;var N=g,_=g;if(Ro>f){var I=null==C?[w,M]:null==b?[y,x]:_n([y,x],[C,T],[b,S],[w,M]),O=y-I[0],B=x-I[1],z=b-I[0],R=S-I[1],V=1/Math.sin(Math.acos((O*z+B*R)/(Math.sqrt(O*O+B*B)*Math.sqrt(z*z+R*R)))/2),U=Math.sqrt(I[0]*I[0]+I[1]*I[1]);_=Math.min(g,(t-U)/(V-1)),N=Math.min(g,(u-U)/(V+1))}if(null!=b){var W=ya(null==C?[w,M]:[C,T],[y,x],u,N,d),H=ya([b,S],[w,M],u,N,d);g===N?A.push(\"M\",W[0],\"A\",N,\",\",N,\" 0 0,\",p,\" \",W[1],\"A\",u,\",\",u,\" 0 \",1-d^ma(W[1][0],W[1][1],H[1][0],H[1][1]),\",\",d,\" \",H[1],\"A\",N,\",\",N,\" 0 0,\",p,\" \",H[0]):A.push(\"M\",W[0],\"A\",N,\",\",N,\" 0 1,\",p,\" \",H[0])}else A.push(\"M\",y,\",\",x);if(null!=C){var G=ya([y,x],[C,T],t,-_,d),j=ya([w,M],null==b?[y,x]:[b,S],t,-_,d);g===_?A.push(\"L\",j[0],\"A\",_,\",\",_,\" 0 0,\",p,\" \",j[1],\"A\",t,\",\",t,\" 0 \",d^ma(j[1][0],j[1][1],G[1][0],G[1][1]),\",\",1-d,\" \",G[1],\"A\",_,\",\",_,\" 0 0,\",p,\" \",G[0]):A.push(\"L\",j[0],\"A\",_,\",\",_,\" 0 0,\",p,\" \",G[0])}else A.push(\"L\",w,\",\",M)}else A.push(\"M\",y,\",\",x),null!=b&&A.push(\"A\",u,\",\",u,\" 0 \",L,\",\",d,\" \",b,\",\",S),A.push(\"L\",w,\",\",M),null!=C&&A.push(\"A\",t,\",\",t,\" 0 \",F,\",\",1-d,\" \",C,\",\",T);return A.push(\"Z\"),A.join(\"\")}function e(t,e){return\"M0,\"+t+\"A\"+t+\",\"+t+\" 0 1,\"+e+\" 0,\"+-t+\"A\"+t+\",\"+t+\" 0 1,\"+e+\" 0,\"+t}var n=fa,i=da,r=ha,a=ks,o=ga,l=pa,s=va;return t.innerRadius=function(e){return arguments.length?(n=Pt(e),t):n},t.outerRadius=function(e){return arguments.length?(i=Pt(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=Pt(e),t):r},t.padRadius=function(e){return arguments.length?(a=e==ks?ks:Pt(e),t):a},t.startAngle=function(e){return arguments.length?(o=Pt(e),t):o},t.endAngle=function(e){return arguments.length?(l=Pt(e),t):l},t.padAngle=function(e){return arguments.length?(s=Pt(e),t):s},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +l.apply(this,arguments))/2-Wo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var ks=\"auto\";lo.svg.line=function(){return xa(y)};var Ns=lo.map({linear:ba,\"linear-closed\":Sa,step:wa,\"step-before\":Ma,\"step-after\":Ca,basis:Ea,\"basis-open\":Fa,\"basis-closed\":ka,bundle:Na,cardinal:Da,\"cardinal-open\":Ta,\"cardinal-closed\":Pa,monotone:Ra});Ns.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var _s=[0,2/3,1/3,0],Is=[0,1/3,2/3,0],Os=[0,1/6,2/3,1/6];lo.svg.line.radial=function(){var t=xa(Va);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ma.reverse=Ca,Ca.reverse=Ma,lo.svg.area=function(){return Ua(y)},lo.svg.area.radial=function(){var t=Ua(Va);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},lo.svg.chord=function(){function t(t,l){var s=e(this,a,t,l),u=e(this,o,t,l);return\"M\"+s.p0+i(s.r,s.p1,s.a1-s.a0)+(n(s,u)?r(s.r,s.p1,s.r,s.p0):r(s.r,s.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,s.r,s.p0))+\"Z\"}function e(t,e,n,i){var r=e.call(t,n,i),a=l.call(t,r,i),o=s.call(t,r,i)-Wo,c=u.call(t,r,i)-Wo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return\"A\"+t+\",\"+t+\" 0 \"+ +(n>Ro)+\",1 \"+e}function r(t,e,n,i){return\"Q 0,0 \"+i}var a=xn,o=bn,l=Wa,s=ga,u=pa;return t.radius=function(e){return arguments.length?(l=Pt(e),t):l},t.source=function(e){return arguments.length?(a=Pt(e),t):a},t.target=function(e){return arguments.length?(o=Pt(e),t):o},t.startAngle=function(e){return arguments.length?(s=Pt(e),t):s},t.endAngle=function(e){return arguments.length?(u=Pt(e),t):u},t},lo.svg.diagonal=function(){function t(t,r){var a=e.call(this,t,r),o=n.call(this,t,r),l=(a.y+o.y)/2,s=[a,{x:a.x,y:l},{x:o.x,y:l},o];return s=s.map(i),\"M\"+s[0]+\"C\"+s[1]+\" \"+s[2]+\" \"+s[3]}var e=xn,n=bn,i=Ha;return t.source=function(n){return arguments.length?(e=Pt(n),t):e},t.target=function(e){return arguments.length?(n=Pt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},lo.svg.diagonal.radial=function(){var t=lo.svg.diagonal(),e=Ha,n=t.projection;return t.projection=function(t){return arguments.length?n(Ga(e=t)):e},t},lo.svg.symbol=function(){function t(t,i){return(Bs.get(e.call(this,t,i))||Ya)(n.call(this,t,i))}var e=qa,n=ja;return t.type=function(n){return arguments.length?(e=Pt(n),t):e},t.size=function(e){return arguments.length?(n=Pt(e),t):n},t};var Bs=lo.map({circle:Ya,cross:function(t){var e=Math.sqrt(t/5)/2;return\"M\"+-3*e+\",\"+-e+\"H\"+-e+\"V\"+-3*e+\"H\"+e+\"V\"+-e+\"H\"+3*e+\"V\"+e+\"H\"+e+\"V\"+3*e+\"H\"+-e+\"V\"+e+\"H\"+-3*e+\"Z\"},diamond:function(t){var e=Math.sqrt(t/(2*Rs)),n=e*Rs;return\"M0,\"+-e+\"L\"+n+\",0 0,\"+e+\" \"+-n+\",0Z\"},square:function(t){var e=Math.sqrt(t)/2;return\"M\"+-e+\",\"+-e+\"L\"+e+\",\"+-e+\" \"+e+\",\"+e+\" \"+-e+\",\"+e+\"Z\"},\"triangle-down\":function(t){var e=Math.sqrt(t/zs),n=e*zs/2;return\"M0,\"+n+\"L\"+e+\",\"+-n+\" \"+-e+\",\"+-n+\"Z\"},\"triangle-up\":function(t){var e=Math.sqrt(t/zs),n=e*zs/2;return\"M0,\"+-n+\"L\"+e+\",\"+n+\" \"+-e+\",\"+n+\"Z\"}});lo.svg.symbolTypes=Bs.keys();var zs=Math.sqrt(3),Rs=Math.tan(30*Ho);Lo.transition=function(t){for(var e,n,i=Vs||++Gs,r=Za(t),a=[],o=Us||{time:Date.now(),ease:Pi,delay:0,duration:250},l=-1,s=this.length;++l<s;){a.push(e=[]);for(var u=this[l],c=-1,h=u.length;++c<h;)(n=u[c])&&Ja(n,c,r,i,o),e.push(n)}return Qa(a,r,i)},Lo.interrupt=function(t){return this.each(null==t?Ws:Xa(Za(t)))};var Vs,Us,Ws=Xa(Za()),Hs=[],Gs=0;Hs.call=Lo.call,Hs.empty=Lo.empty,Hs.node=Lo.node,Hs.size=Lo.size,lo.transition=function(t,e){return t&&t.transition?Vs?t.transition(e):t:lo.selection().transition(t)},lo.transition.prototype=Hs,Hs.select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=A(t);for(var l=-1,s=this.length;++l<s;){o.push(e=[]);for(var u=this[l],c=-1,h=u.length;++c<h;)(i=u[c])&&(n=t.call(i,i.__data__,c,l))?(\"__data__\"in i&&(n.__data__=i.__data__),Ja(n,c,a,r,i[a][r]),e.push(n)):e.push(null)}return Qa(o,a,r)},Hs.selectAll=function(t){var e,n,i,r,a,o=this.id,l=this.namespace,s=[];t=L(t);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],f=-1,d=h.length;++f<d;)if(i=h[f]){a=i[l][o],n=t.call(i,i.__data__,f,u),s.push(e=[]);for(var g=-1,p=n.length;++g<p;)(r=n[g])&&Ja(r,g,l,o,a),e.push(r)}return Qa(s,l,o)},Hs.filter=function(t){var e,n,i,r=[];\"function\"!=typeof t&&(t=U(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]);for(var n=this[a],l=0,s=n.length;s>l;l++)(i=n[l])&&t.call(i,i.__data__,l,a)&&e.push(i)}return Qa(r,this.namespace,this.id)},Hs.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):H(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Hs.attr=function(t,e){function n(){this.removeAttribute(l)}function i(){this.removeAttributeNS(l.space,l.local)}function r(t){return null==t?n:(t+=\"\",function(){var e,n=this.getAttribute(l);return n!==t&&(e=o(n,t),function(t){this.setAttribute(l,e(t))})})}function a(t){return null==t?i:(t+=\"\",function(){var e,n=this.getAttributeNS(l.space,l.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(l.space,l.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o=\"transform\"==t?Yi:xi,l=lo.ns.qualify(t);return Ka(this,\"attr.\"+t,e,l.local?a:r)},Hs.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=lo.ns.qualify(t);return this.tween(\"attr.\"+t,r.local?i:n)},Hs.style=function(t,n,i){function r(){this.style.removeProperty(t)}function a(n){return null==n?r:(n+=\"\",function(){var r,a=e(this).getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(r=xi(a,n),function(e){this.style.setProperty(t,r(e),i)})})}var o=arguments.length;if(3>o){if(\"string\"!=typeof t){2>o&&(n=\"\");for(i in t)this.style(i,t[i],n);return this}i=\"\"}return Ka(this,\"style.\"+t,n,a)},Hs.styleTween=function(t,n,i){function r(r,a){var o=n.call(this,r,a,e(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),i)}}return arguments.length<3&&(i=\"\"),this.tween(\"style.\"+t,r)},Hs.text=function(t){return Ka(this,\"text\",t,$a)},Hs.remove=function(){var t=this.namespace;return this.each(\"end.transition\",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Hs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:(\"function\"!=typeof t&&(t=lo.ease.apply(lo,arguments)),H(this,function(i){i[n][e].ease=t}))},Hs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:H(this,\"function\"==typeof t?function(i,r,a){i[n][e].delay=+t.call(i,i.__data__,r,a)}:(t=+t,function(i){i[n][e].delay=t}))},Hs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:H(this,\"function\"==typeof t?function(i,r,a){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,a))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Hs.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Us,a=Vs;try{Vs=n,H(this,function(e,r,a){Us=e[i][n],t.call(e,e.__data__,r,a)})}finally{Us=r,Vs=a}}else H(this,function(r){var a=r[i][n];(a.event||(a.event=lo.dispatch(\"start\",\"end\",\"interrupt\"))).on(t,e)});return this},Hs.transition=function(){for(var t,e,n,i,r=this.id,a=++Gs,o=this.namespace,l=[],s=0,u=this.length;u>s;s++){l.push(t=[]);for(var e=this[s],c=0,h=e.length;h>c;c++)(n=e[c])&&(i=n[o][r],Ja(n,c,o,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Qa(l,o,a)},lo.svg.axis=function(){function t(t){t.each(function(){var t,u=lo.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==s?h.ticks?h.ticks.apply(h,l):h.domain():s,d=null==e?h.tickFormat?h.tickFormat.apply(h,l):y:e,g=u.selectAll(\".tick\").data(f,h),p=g.enter().insert(\"g\",\".domain\").attr(\"class\",\"tick\").style(\"opacity\",Bo),v=lo.transition(g.exit()).style(\"opacity\",Bo).remove(),m=lo.transition(g.order()).style(\"opacity\",1),x=Math.max(r,0)+o,b=Gr(h),S=u.selectAll(\".domain\").data([0]),w=(S.enter().append(\"path\").attr(\"class\",\"domain\"),lo.transition(S));p.append(\"line\"),p.append(\"text\");var M,C,T,P,D=p.select(\"line\"),A=m.select(\"line\"),L=g.select(\"text\").text(d),E=p.select(\"text\"),F=m.select(\"text\"),k=\"top\"===i||\"left\"===i?-1:1;if(\"bottom\"===i||\"top\"===i?(t=to,M=\"x\",T=\"y\",C=\"x2\",P=\"y2\",L.attr(\"dy\",0>k?\"0em\":\".71em\").style(\"text-anchor\",\"middle\"),w.attr(\"d\",\"M\"+b[0]+\",\"+k*a+\"V0H\"+b[1]+\"V\"+k*a)):(t=eo,M=\"y\",T=\"x\",C=\"y2\",P=\"x2\",L.attr(\"dy\",\".32em\").style(\"text-anchor\",0>k?\"end\":\"start\"),w.attr(\"d\",\"M\"+k*a+\",\"+b[0]+\"H0V\"+b[1]+\"H\"+k*a)),D.attr(P,k*r),E.attr(T,k*x),A.attr(C,0).attr(P,k*r),F.attr(M,0).attr(T,k*x),h.rangeBand){var N=h,_=N.rangeBand()/2;c=h=function(t){return N(t)+_}}else c.rangeBand?c=h:v.call(t,h,c);p.call(t,c,h),m.call(t,h,h)})}var e,n=lo.scale.linear(),i=js,r=6,a=6,o=3,l=[10],s=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in qs?e+\"\":js,t):i},t.ticks=function(){return arguments.length?(l=uo(arguments),t):l},t.tickValues=function(e){return arguments.length?(s=e,t):s},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,a=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var js=\"bottom\",qs={top:1,right:1,bottom:1,left:1};lo.svg.brush=function(){function t(e){e.each(function(){var e=lo.select(this).style(\"pointer-events\",\"all\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\").on(\"mousedown.brush\",a).on(\"touchstart.brush\",a),o=e.selectAll(\".background\").data([0]);o.enter().append(\"rect\").attr(\"class\",\"background\").style(\"visibility\",\"hidden\").style(\"cursor\",\"crosshair\"),e.selectAll(\".extent\").data([0]).enter().append(\"rect\").attr(\"class\",\"extent\").style(\"cursor\",\"move\");var l=e.selectAll(\".resize\").data(p,y);l.exit().remove(),l.enter().append(\"g\").attr(\"class\",function(t){return\"resize \"+t}).style(\"cursor\",function(t){return Ys[t]}).append(\"rect\").attr(\"x\",function(t){return/[ew]$/.test(t)?-3:null}).attr(\"y\",function(t){return/^[ns]/.test(t)?-3:null}).attr(\"width\",6).attr(\"height\",6).style(\"visibility\",\"hidden\"),l.style(\"display\",t.empty()?\"none\":null);var s,h=lo.transition(e),f=lo.transition(o);u&&(s=Gr(u),f.attr(\"x\",s[0]).attr(\"width\",s[1]-s[0]),i(h)),c&&(s=Gr(c),f.attr(\"y\",s[0]).attr(\"height\",s[1]-s[0]),r(h)),n(h)})}function n(t){t.selectAll(\".resize\").attr(\"transform\",function(t){return\"translate(\"+h[+/e$/.test(t)]+\",\"+f[+/^s/.test(t)]+\")\"})}function i(t){t.select(\".extent\").attr(\"x\",h[0]),t.selectAll(\".extent,.n>rect,.s>rect\").attr(\"width\",h[1]-h[0])}function r(t){t.select(\".extent\").attr(\"y\",f[0]),t.selectAll(\".extent,.e>rect,.w>rect\").attr(\"height\",f[1]-f[0])}function a(){function a(){32==lo.event.keyCode&&(L||(x=null,F[0]-=h[1],F[1]-=f[1],L=2),C())}function p(){32==lo.event.keyCode&&2==L&&(F[0]+=h[1],F[1]+=f[1],L=0,C())}function v(){var t=lo.mouse(S),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),L||(lo.event.altKey?(x||(x=[(h[0]+h[1])/2,(f[0]+f[1])/2]),F[0]=h[+(t[0]<x[0])],F[1]=f[+(t[1]<x[1])]):x=null),D&&m(t,u,0)&&(i(T),e=!0),A&&m(t,c,1)&&(r(T),e=!0),e&&(n(T),M({type:\"brush\",mode:L?\"move\":\"resize\"}))}function m(t,e,n){var i,r,a=Gr(e),s=a[0],u=a[1],c=F[n],p=n?f:h,v=p[1]-p[0];return L&&(s-=c,u-=v+c),i=(n?g:d)?Math.max(s,Math.min(u,t[n])):t[n],L?r=(i+=c)+v:(x&&(c=Math.max(s,Math.min(u,2*x[n]-i))),i>c?(r=i,i=c):r=c),p[0]!=i||p[1]!=r?(n?l=null:o=null,p[0]=i,p[1]=r,!0):void 0}function y(){v(),T.style(\"pointer-events\",\"all\").selectAll(\".resize\").style(\"display\",t.empty()?\"none\":null),lo.select(\"body\").style(\"cursor\",null),k.on(\"mousemove.brush\",null).on(\"mouseup.brush\",null).on(\"touchmove.brush\",null).on(\"touchend.brush\",null).on(\"keydown.brush\",null).on(\"keyup.brush\",null),E(),M({type:\"brushend\"})}var x,b,S=this,w=lo.select(lo.event.target),M=s.of(S,arguments),T=lo.select(S),P=w.datum(),D=!/^(n|s)$/.test(P)&&u,A=!/^(e|w)$/.test(P)&&c,L=w.classed(\"extent\"),E=Q(S),F=lo.mouse(S),k=lo.select(e(S)).on(\"keydown.brush\",a).on(\"keyup.brush\",p);if(lo.event.changedTouches?k.on(\"touchmove.brush\",v).on(\"touchend.brush\",y):k.on(\"mousemove.brush\",v).on(\"mouseup.brush\",y),T.interrupt().selectAll(\"*\").interrupt(),L)F[0]=h[0]-F[0],F[1]=f[0]-F[1];else if(P){var N=+/w$/.test(P),_=+/^n/.test(P);b=[h[1-N]-F[0],f[1-_]-F[1]],F[0]=h[N],F[1]=f[_]}else lo.event.altKey&&(x=F.slice());T.style(\"pointer-events\",\"none\").selectAll(\".resize\").style(\"display\",null),lo.select(\"body\").style(\"cursor\",w.style(\"cursor\")),M({type:\"brushstart\"}),v()}var o,l,s=P(t,\"brushstart\",\"brush\",\"brushend\"),u=null,c=null,h=[0,0],f=[0,0],d=!0,g=!0,p=Xs[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:h,y:f,i:o,j:l},n=this.__chart__||e;this.__chart__=e,Vs?lo.select(this).transition().each(\"start.brush\",function(){o=n.i,l=n.j,h=n.x,f=n.y,t({type:\"brushstart\"})}).tween(\"brush:brush\",function(){var n=bi(h,e.x),i=bi(f,e.y);return o=l=null,function(r){h=e.x=n(r),f=e.y=i(r),t({type:\"brush\",mode:\"resize\"})}}).each(\"end.brush\",function(){o=e.i,l=e.j,t({type:\"brush\",mode:\"resize\"}),t({type:\"brushend\"})}):(t({type:\"brushstart\"}),t({type:\"brush\",mode:\"resize\"}),t({type:\"brushend\"}))})},t.x=function(e){return arguments.length?(u=e,p=Xs[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,p=Xs[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(d=!!e[0],g=!!e[1]):u?d=!!e:c&&(g=!!e),t):u&&c?[d,g]:u?d:c?g:null},t.extent=function(e){var n,i,r,a,s;return arguments.length?(u&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),o=[n,i],u.invert&&(n=u(n),i=u(i)),n>i&&(s=n,n=i,i=s),n==h[0]&&i==h[1]||(h=[n,i])),c&&(r=e[0],a=e[1],u&&(r=r[1],a=a[1]),l=[r,a],c.invert&&(r=c(r),a=c(a)),r>a&&(s=r,r=a,a=s),r==f[0]&&a==f[1]||(f=[r,a])),t):(u&&(o?(n=o[0],i=o[1]):(n=h[0],i=h[1],u.invert&&(n=u.invert(n),i=u.invert(i)),n>i&&(s=n,n=i,i=s))),c&&(l?(r=l[0],a=l[1]):(r=f[0],a=f[1],c.invert&&(r=c.invert(r),a=c.invert(a)),r>a&&(s=r,r=a,a=s))),u&&c?[[n,r],[i,a]]:u?[n,i]:c&&[r,a])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],o=l=null),t},t.empty=function(){return!!u&&h[0]==h[1]||!!c&&f[0]==f[1]},lo.rebind(t,s,\"on\")};var Ys={n:\"ns-resize\",e:\"ew-resize\",s:\"ns-resize\",w:\"ew-resize\",nw:\"nwse-resize\",ne:\"nesw-resize\",se:\"nwse-resize\",sw:\"nesw-resize\"},Xs=[[\"n\",\"e\",\"s\",\"w\",\"nw\",\"ne\",\"se\",\"sw\"],[\"e\",\"w\"],[\"n\",\"s\"],[]],Qs=gl.format=bl.timeFormat,Ks=Qs.utc,$s=Ks(\"%Y-%m-%dT%H:%M:%S.%LZ\");Qs.iso=Date.prototype.toISOString&&+new Date(\"2000-01-01T00:00:00.000Z\")?no:$s,no.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},no.toString=$s.toString,gl.second=Vt(function(t){return new pl(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),gl.seconds=gl.second.range,gl.seconds.utc=gl.second.utc.range,gl.minute=Vt(function(t){return new pl(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),gl.minutes=gl.minute.range,gl.minutes.utc=gl.minute.utc.range,gl.hour=Vt(function(t){var e=t.getTimezoneOffset()/60;return new pl(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),gl.hours=gl.hour.range,gl.hours.utc=gl.hour.utc.range,gl.month=Vt(function(t){return t=gl.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),gl.months=gl.month.range,gl.months.utc=gl.month.utc.range;var Zs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Js=[[gl.second,1],[gl.second,5],[gl.second,15],[gl.second,30],[gl.minute,1],[gl.minute,5],[gl.minute,15],[gl.minute,30],[gl.hour,1],[gl.hour,3],[gl.hour,6],[gl.hour,12],[gl.day,1],[gl.day,2],[gl.week,1],[gl.month,1],[gl.month,3],[gl.year,1]],tu=Qs.multi([[\".%L\",function(t){return t.getMilliseconds()}],[\":%S\",function(t){return t.getSeconds()}],[\"%I:%M\",function(t){return t.getMinutes()}],[\"%I %p\",function(t){return t.getHours()}],[\"%a %d\",function(t){return t.getDay()&&1!=t.getDate()}],[\"%b %d\",function(t){return 1!=t.getDate()}],[\"%B\",function(t){return t.getMonth()}],[\"%Y\",Le]]),eu={range:function(t,e,n){return lo.range(Math.ceil(t/n)*n,+e,n).map(ro)},floor:y,ceil:y};Js.year=gl.year,gl.scale=function(){return io(lo.scale.linear(),Js,tu)};var nu=Js.map(function(t){return[t[0].utc,t[1]]}),iu=Ks.multi([[\".%L\",function(t){return t.getUTCMilliseconds()}],[\":%S\",function(t){return t.getUTCSeconds()}],[\"%I:%M\",function(t){return t.getUTCMinutes()}],[\"%I %p\",function(t){return t.getUTCHours()}],[\"%a %d\",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[\"%b %d\",function(t){return 1!=t.getUTCDate()}],[\"%B\",function(t){return t.getUTCMonth()}],[\"%Y\",Le]]);nu.year=gl.year.utc,gl.scale.utc=function(){return io(lo.scale.linear(),nu,iu)},lo.text=Dt(function(t){return t.responseText}),lo.json=function(t,e){return At(t,\"application/json\",ao,e)},lo.html=function(t,e){return At(t,\"text/html\",oo,e)},lo.xml=Dt(function(t){return t.responseXML}),\"function\"==typeof define&&define.amd?(this.d3=lo,define(lo)):\"object\"==typeof module&&module.exports?module.exports=lo:this.d3=lo}(),function(t,e){var n,i,r,a,o,l,s,u,c,h,f,d,g,p,v,m,y,x,b,S,w,M,C;n=function(t){return new n.prototype.init(t)},\"undefined\"!=typeof require&&\"undefined\"!=typeof exports&&\"undefined\"!=typeof module?module.exports=n:t.Globalize=n,n.cultures={},n.prototype={constructor:n,init:function(t){return this.cultures=n.cultures,this.cultureSelector=t,this}},n.prototype.init.prototype=n.prototype,n.cultures[\"default\"]={name:\"en\",englishName:\"English\",nativeName:\"English\",isRTL:!1,language:\"en\",numberFormat:{pattern:[\"-n\"],decimals:2,\",\":\",\",\".\":\".\",groupSizes:[3],\"+\":\"+\",\"-\":\"-\",percent:{pattern:[\"-n %\",\"n %\"],decimals:2,groupSizes:[3],\",\":\",\",\".\":\".\",symbol:\"%\"},currency:{pattern:[\"($n)\",\"$n\"],decimals:2,groupSizes:[3],\",\":\",\",\".\":\".\",symbol:\"$\"}},calendars:{standard:{name:\"Gregorian_USEnglish\",\"/\":\"/\",\":\":\":\",firstDay:0,days:{names:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],namesAbbr:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],namesShort:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]},months:{names:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\",\"\"],namesAbbr:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\",\"\"]},AM:[\"AM\",\"am\",\"AM\"],PM:[\"PM\",\"pm\",\"PM\"],eras:[{name:\"A.D.\",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:\"M/d/yyyy\",D:\"dddd, MMMM dd, yyyy\",t:\"h:mm tt\",T:\"h:mm:ss tt\",f:\"dddd, MMMM dd, yyyy h:mm tt\",F:\"dddd, MMMM dd, yyyy h:mm:ss tt\",M:\"MMMM dd\",Y:\"yyyy MMMM\",S:\"yyyy'-'MM'-'dd'T'HH':'mm':'ss\"}}},messages:{}},n.cultures[\"default\"].calendar=n.cultures[\"default\"].calendars.standard,n.cultures.en=n.cultures[\"default\"],n.cultureSelector=\"en\",i=/^0x[a-f0-9]+$/i,r=/^[+-]?infinity$/i,a=/^[+-]?\\d*\\.?\\d*(e[+-]?\\d+)?$/,o=/^\\s+|\\s+$/g,l=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},s=function(t,e){return t.substr(t.length-e.length)===e},u=function(t){var n,i,r,a,o,l,s=arguments[0]||{},d=1,g=arguments.length,t=!1;for(\"boolean\"==typeof s&&(t=s,s=arguments[1]||{},d=2),\"object\"==typeof s||h(s)||(s={});g>d;d++)if(null!=(n=arguments[d]))for(i in n)r=s[i],a=n[i],s!==a&&(t&&a&&(f(a)||(o=c(a)))?(o?(o=!1,l=r&&c(r)?r:[]):l=r&&f(r)?r:{},s[i]=u(t,l,a)):a!==e&&(s[i]=a));return s},c=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},h=function(t){return\"[object Function]\"===Object.prototype.toString.call(t)},f=function(t){return\"[object Object]\"===Object.prototype.toString.call(t)},d=function(t,e){return 0===t.indexOf(e)},g=function(t){return(t+\"\").replace(o,\"\")},p=function(t,e,n){var i;for(i=t.length;e>i;i+=1)t=n?\"0\"+t:t+\"0\";return t},v=function(t,e){for(var n=0,i=!1,r=0,a=t.length;a>r;r++){var o=t.charAt(r);switch(o){case\"'\":i?e.push(\"'\"):n++,i=!1;break;case\"\\\\\":i&&e.push(\"\\\\\"),i=!i;break;default:e.push(o),i=!1}}return n},m=function(t,e){e=e||\"F\";var n,i=t.patterns,r=e.length;if(1===r){if(n=i[e],!n)throw\"Invalid date format string '\"+e+\"'.\";e=n}else 2===r&&\"%\"===e.charAt(0)&&(e=e.charAt(1));return e},y=function(t,e,n){function i(t,e){var n,i=t+\"\";return e>1&&i.length<e?(n=M[e-2]+i,n.substr(n.length-e,e)):n=i}function r(){return g||p?g:(g=C.test(e),p=!0,g)}function a(t,e){if(x)return x[e];switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate()}}var o=n.calendar,l=o.convert;if(!e||!e.length||\"i\"===e){var s;if(n&&n.name.length)if(l)s=y(t,o.patterns.F,n);else{var u=new Date(t.getTime()),c=S(t,o.eras);u.setFullYear(w(t,o,c)),s=u.toLocaleString()}else s=t.toString();return s}var h=o.eras,f=\"s\"===e;e=m(o,e),s=[];var d,g,p,x,M=[\"0\",\"00\",\"000\"],C=/([^d]|^)(d|dd)([^d]|$)/g,T=0,P=b();for(!f&&l&&(x=l.fromGregorian(t));;){var D=P.lastIndex,A=P.exec(e),L=e.slice(D,A?A.index:e.length);if(T+=v(L,s),!A)break;if(T%2)s.push(A[0]);else{var E=A[0],F=E.length;switch(E){case\"ddd\":case\"dddd\":var k=3===F?o.days.namesAbbr:o.days.names;s.push(k[t.getDay()]);break;case\"d\":case\"dd\":g=!0,s.push(i(a(t,2),F));break;case\"MMM\":case\"MMMM\":var N=a(t,1);s.push(o.monthsGenitive&&r()?o.monthsGenitive[3===F?\"namesAbbr\":\"names\"][N]:o.months[3===F?\"namesAbbr\":\"names\"][N]);break;case\"M\":case\"MM\":s.push(i(a(t,1)+1,F));break;case\"y\":case\"yy\":case\"yyyy\":N=x?x[0]:w(t,o,S(t,h),f),4>F&&(N%=100),s.push(i(N,F));break;case\"h\":case\"hh\":d=t.getHours()%12,0===d&&(d=12),s.push(i(d,F));break;case\"H\":case\"HH\":s.push(i(t.getHours(),F));break;case\"m\":case\"mm\":s.push(i(t.getMinutes(),F));break;case\"s\":case\"ss\":s.push(i(t.getSeconds(),F));break;case\"t\":case\"tt\":N=t.getHours()<12?o.AM?o.AM[0]:\" \":o.PM?o.PM[0]:\" \",s.push(1===F?N.charAt(0):N);break;case\"f\":case\"ff\":case\"fff\":s.push(i(t.getMilliseconds(),3).substr(0,F));break;case\"z\":case\"zz\":d=t.getTimezoneOffset()/60,s.push((0>=d?\"+\":\"-\")+i(Math.floor(Math.abs(d)),F));break;case\"zzz\":d=t.getTimezoneOffset()/60,s.push((0>=d?\"+\":\"-\")+i(Math.floor(Math.abs(d)),2)+\":\"+i(Math.abs(t.getTimezoneOffset()%60),2));break;case\"g\":case\"gg\":o.eras&&s.push(o.eras[S(t,h)].name);break;case\"/\":s.push(o[\"/\"]);break;default:throw\"Invalid date format pattern '\"+E+\"'.\"}}}return s.join(\"\")},function(){var t;t=function(t,e,n){var i=n.groupSizes,r=i[0],a=1,o=Math.pow(10,e),l=Math.round(t*o)/o;isFinite(l)||(l=t),t=l;var s=t+\"\",u=\"\",c=s.split(/e/i),h=c.length>1?parseInt(c[1],10):0;s=c[0],c=s.split(\".\"),s=c[0],u=c.length>1?c[1]:\"\";h>0?(u=p(u,h,!1),s+=u.slice(0,h),u=u.substr(h)):0>h&&(h=-h,s=p(s,h+1),u=s.slice(-h,s.length)+u,s=s.slice(0,-h)),u=e>0?n[\".\"]+(u.length>e?u.slice(0,e):p(u,e)):\"\";for(var f=s.length-1,d=n[\",\"],g=\"\";f>=0;){if(0===r||r>f)return s.slice(0,f+1)+(g.length?d+g+u:u);g=s.slice(f-r+1,f+1)+(g.length?d+g:\"\"),f-=r,a<i.length&&(r=i[a],a++)}return s.slice(0,f+1)+d+g+u},x=function(e,n,i){if(!n||\"i\"===n)return i.name.length?e.toLocaleString():e.toString();n=n||\"D\";var r,a=i.numberFormat,o=Math.abs(e),l=-1;n.length>1&&(l=parseInt(n.slice(1),10));var s,u=n.charAt(0).toUpperCase();switch(u){case\"D\":r=\"n\",-1!==l&&(o=p(\"\"+o,l,!0)),0>e&&(o=-o);break;case\"N\":s=a;case\"C\":s=s||a.currency;case\"P\":s=s||a.percent,r=0>e?s.pattern[0]:s.pattern[1]||\"n\",-1===l&&(l=s.decimals),o=t(o*(\"P\"===u?100:1),l,s);break;default:throw\"Bad number format specifier: \"+u}for(var c=/n|\\$|-|%/g,h=\"\";;){var f=c.lastIndex,d=c.exec(r);if(h+=r.slice(f,d?d.index:r.length),!d)break;switch(d[0]){case\"n\":h+=o;break;case\"$\":h+=a.currency.symbol;break;case\"-\":/[1-9]/.test(o)&&(h+=a[\"-\"]);break;case\"%\":h+=a.percent.symbol}}return h}}(),b=function(){return/\\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},S=function(t,e){if(!e)return 0;for(var n,i=t.getTime(),r=0,a=e.length;a>r;r++)if(n=e[r].start,null===n||i>=n)return r;return 0},w=function(t,e,n,i){var r=t.getFullYear();return!i&&e.eras&&(r-=e.eras[n].offset),r},function(){var t,e,n,i,r,a,o;t=function(t,e){var n=new Date,i=S(n);if(100>e){var r=t.twoDigitYearMax;r=\"string\"==typeof r?(new Date).getFullYear()%100+parseInt(r,10):r;var a=w(n,t,i);e+=a-a%100,e>r&&(e-=100)}return e},e=function(t,e,n){var i,r=t.days,s=t._upperDays;return s||(t._upperDays=s=[o(r.names),o(r.namesAbbr),o(r.namesShort)]),e=a(e),n?(i=l(s[1],e),-1===i&&(i=l(s[2],e))):i=l(s[0],e),i},n=function(t,e,n){var i=t.months,r=t.monthsGenitive||t.months,s=t._upperMonths,u=t._upperMonthsGen;s||(t._upperMonths=s=[o(i.names),o(i.namesAbbr)],t._upperMonthsGen=u=[o(r.names),o(r.namesAbbr)]),e=a(e);var c=l(n?s[1]:s[0],e);return 0>c&&(c=l(n?u[1]:u[0],e)),c},i=function(t,e){var n=t._parseRegExp;if(n){var i=n[e];if(i)return i}else t._parseRegExp=n={};for(var r,a=m(t,e).replace(/([\\^\\$\\.\\*\\+\\?\\|\\[\\]\\(\\)\\{\\}])/g,\"\\\\\\\\$1\"),o=[\"^\"],l=[],s=0,u=0,c=b();null!==(r=c.exec(a));){var h=a.slice(s,r.index);if(s=c.lastIndex,u+=v(h,o),u%2)o.push(r[0]);else{var f,d=r[0],g=d.length;switch(d){case\"dddd\":case\"ddd\":case\"MMMM\":case\"MMM\":case\"gg\":case\"g\":f=\"(\\\\D+)\";break;case\"tt\":case\"t\":f=\"(\\\\D*)\";break;case\"yyyy\":case\"fff\":case\"ff\":case\"f\":f=\"(\\\\d{\"+g+\"})\";break;case\"dd\":case\"d\":case\"MM\":case\"M\":case\"yy\":case\"y\":case\"HH\":case\"H\":case\"hh\":case\"h\":case\"mm\":case\"m\":case\"ss\":case\"s\":f=\"(\\\\d\\\\d?)\";break;case\"zzz\":f=\"([+-]?\\\\d\\\\d?:\\\\d{2})\";break;case\"zz\":case\"z\":f=\"([+-]?\\\\d\\\\d?)\";break;case\"/\":f=\"(\\\\\"+t[\"/\"]+\")\";break;default:throw\"Invalid date format pattern '\"+d+\"'.\"}f&&o.push(f),l.push(r[0])}}v(a.slice(s),o),o.push(\"$\");var p=o.join(\"\").replace(/\\s+/g,\"\\\\s+\"),y={regExp:p,groups:l};return n[e]=y},r=function(t,e,n){return e>t||t>n},a=function(t){return t.split(\" \").join(\" \").toUpperCase()},o=function(t){for(var e=[],n=0,i=t.length;i>n;n++)e[n]=a(t[n]);\nreturn e},M=function(a,o,l){a=g(a);var s=l.calendar,u=i(s,o),c=new RegExp(u.regExp).exec(a);if(null===c)return null;for(var h,f=u.groups,p=null,v=null,m=null,y=null,x=null,b=0,S=0,w=0,M=0,C=null,T=!1,P=0,D=f.length;D>P;P++){var A=c[P+1];if(A){var L=f[P],E=L.length,F=parseInt(A,10);switch(L){case\"dd\":case\"d\":if(y=F,r(y,1,31))return null;break;case\"MMM\":case\"MMMM\":if(m=n(s,A,3===E),r(m,0,11))return null;break;case\"M\":case\"MM\":if(m=F-1,r(m,0,11))return null;break;case\"y\":case\"yy\":case\"yyyy\":if(v=4>E?t(s,F):F,r(v,0,9999))return null;break;case\"h\":case\"hh\":if(b=F,12===b&&(b=0),r(b,0,11))return null;break;case\"H\":case\"HH\":if(b=F,r(b,0,23))return null;break;case\"m\":case\"mm\":if(S=F,r(S,0,59))return null;break;case\"s\":case\"ss\":if(w=F,r(w,0,59))return null;break;case\"tt\":case\"t\":if(T=s.PM&&(A===s.PM[0]||A===s.PM[1]||A===s.PM[2]),!T&&(!s.AM||A!==s.AM[0]&&A!==s.AM[1]&&A!==s.AM[2]))return null;break;case\"f\":case\"ff\":case\"fff\":if(M=F*Math.pow(10,3-E),r(M,0,999))return null;break;case\"ddd\":case\"dddd\":if(x=e(s,A,3===E),r(x,0,6))return null;break;case\"zzz\":var k=A.split(/:/);if(2!==k.length)return null;if(h=parseInt(k[0],10),r(h,-12,13))return null;var N=parseInt(k[1],10);if(r(N,0,59))return null;C=60*h+(d(A,\"-\")?-N:N);break;case\"z\":case\"zz\":if(h=F,r(h,-12,13))return null;C=60*h;break;case\"g\":case\"gg\":var _=A;if(!_||!s.eras)return null;_=g(_.toLowerCase());for(var I=0,O=s.eras.length;O>I;I++)if(_===s.eras[I].name.toLowerCase()){p=I;break}if(null===p)return null}}}var B,z=new Date,R=s.convert;if(B=R?R.fromGregorian(z)[0]:z.getFullYear(),null===v?v=B:s.eras&&(v+=s.eras[p||0].offset),null===m&&(m=0),null===y&&(y=1),R){if(z=R.toGregorian(v,m,y),null===z)return null}else{if(z.setFullYear(v,m,y),z.getDate()!==y)return null;if(null!==x&&z.getDay()!==x)return null}if(T&&12>b&&(b+=12),z.setHours(b,S,w,M),null!==C){var V=z.getMinutes()-(C+z.getTimezoneOffset());z.setHours(z.getHours()+parseInt(V/60,10),V%60)}return z}}(),C=function(t,e,n){var i,r=e[\"-\"],a=e[\"+\"];switch(n){case\"n -\":r=\" \"+r,a=\" \"+a;case\"n-\":s(t,r)?i=[\"-\",t.substr(0,t.length-r.length)]:s(t,a)&&(i=[\"+\",t.substr(0,t.length-a.length)]);break;case\"- n\":r+=\" \",a+=\" \";case\"-n\":d(t,r)?i=[\"-\",t.substr(r.length)]:d(t,a)&&(i=[\"+\",t.substr(a.length)]);break;case\"(n)\":d(t,\"(\")&&s(t,\")\")&&(i=[\"-\",t.substr(1,t.length-2)])}return i||[\"\",t]},n.prototype.findClosestCulture=function(t){return n.findClosestCulture.call(this,t)},n.prototype.format=function(t,e,i){return n.format.call(this,t,e,i)},n.prototype.localize=function(t,e){return n.localize.call(this,t,e)},n.prototype.parseInt=function(t,e,i){return n.parseInt.call(this,t,e,i)},n.prototype.parseFloat=function(t,e,i){return n.parseFloat.call(this,t,e,i)},n.prototype.culture=function(t){return n.culture.call(this,t)},n.addCultureInfo=function(t,e,n){var i={},r=!1;\"string\"!=typeof t?(n=t,t=this.culture().name,i=this.cultures[t]):\"string\"!=typeof e?(n=e,r=null==this.cultures[t],i=this.cultures[t]||this.cultures[\"default\"]):(r=!0,i=this.cultures[e]),this.cultures[t]=u(!0,{},i,n),r&&(this.cultures[t].calendar=this.cultures[t].calendars.standard)},n.findClosestCulture=function(t){var e;if(!t)return this.cultures[this.cultureSelector]||this.cultures[\"default\"];if(\"string\"==typeof t&&(t=t.split(\",\")),c(t)){var n,i,r=this.cultures,a=t,o=a.length,l=[];for(i=0;o>i;i++){t=g(a[i]);var s,u=t.split(\";\");n=g(u[0]),1===u.length?s=1:(t=g(u[1]),0===t.indexOf(\"q=\")?(t=t.substr(2),s=parseFloat(t),s=isNaN(s)?0:s):s=1),l.push({lang:n,pri:s})}for(l.sort(function(t,e){return t.pri<e.pri?1:-1}),i=0;o>i;i++)if(n=l[i].lang,e=r[n])return e;for(i=0;o>i;i++)for(n=l[i].lang;;){var h=n.lastIndexOf(\"-\");if(-1===h)break;if(n=n.substr(0,h),e=r[n])return e}for(i=0;o>i;i++){n=l[i].lang;for(var f in r){var d=r[f];if(d.language==n)return d}}}else if(\"object\"==typeof t)return t;return e||null},n.format=function(t,e,n){return culture=this.findClosestCulture(n),t instanceof Date?t=y(t,e,culture):\"number\"==typeof t&&(t=x(t,e,culture)),t},n.localize=function(t,e){return this.findClosestCulture(e).messages[t]||this.cultures[\"default\"].messages.key},n.parseDate=function(t,e,n){n=this.findClosestCulture(n);var i,r,a;if(e){if(\"string\"==typeof e&&(e=[e]),e.length)for(var o=0,l=e.length;l>o;o++){var s=e[o];if(s&&(i=M(t,s,n)))break}}else{a=n.calendar.patterns;for(r in a)if(i=M(t,a[r],n))break}return i||null},n.parseInt=function(t,e,i){return Math.floor(n.parseFloat(t,e,i))},n.parseFloat=function(t,e,n){\"number\"!=typeof e&&(n=e,e=10);var o=this.findClosestCulture(n),l=NaN,s=o.numberFormat;if(t.indexOf(o.numberFormat.currency.symbol)>-1&&(t=t.replace(o.numberFormat.currency.symbol,\"\"),t=t.replace(o.numberFormat.currency[\".\"],o.numberFormat[\".\"])),t=g(t),r.test(t))l=parseFloat(t);else if(!e&&i.test(t))l=parseInt(t,16);else{var u=C(t,s,s.pattern[0]),c=u[0],h=u[1];\"\"===c&&\"-n\"!==s.pattern[0]&&(u=C(t,s,\"-n\"),c=u[0],h=u[1]),c=c||\"+\";var f,d,p=h.indexOf(\"e\");0>p&&(p=h.indexOf(\"E\")),0>p?(d=h,f=null):(d=h.substr(0,p),f=h.substr(p+1));var v,m,y=s[\".\"],x=d.indexOf(y);0>x?(v=d,m=null):(v=d.substr(0,x),m=d.substr(x+y.length));var b=s[\",\"];v=v.split(b).join(\"\");var S=b.replace(/\\u00A0/g,\" \");b!==S&&(v=v.split(S).join(\"\"));var w=c+v;if(null!==m&&(w+=\".\"+m),null!==f){var M=C(f,s,\"-n\");w+=\"e\"+(M[0]||\"+\")+M[1]}a.test(w)&&(l=parseFloat(w))}return l},n.culture=function(t){return\"undefined\"!=typeof t&&(this.cultureSelector=t),this.findClosestCulture(t)||this.culture[\"default\"]}}(this),function(t,e){var n;n=\"undefined\"!=typeof require&&\"undefined\"!=typeof exports&&\"undefined\"!=typeof module?require(\"globalize\"):t.Globalize,n.addCultureInfo(\"en-US\",\"default\",{englishName:\"English (United States)\"})}(this);var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,i){void 0===t&&(t=[]);var r=t;return n(r),e&&(r.identityFields=e),i&&(r.source=i),r}function n(t,e){t.grouped=e?function(){return e}:function(){return i(t)}}function i(t){for(var e,n=[],i=0,r=t.length;r>i;i++){var a=t[i];if(!e||e.identity!==a.identity){if(e={values:[]},a.identity){e.identity=a.identity;var o=a.source;void 0!==o.groupName?e.name=o.groupName:o.displayName&&(e.name=o.displayName)}n.push(e)}e.values.push(a)}return n}t.createValueColumns=e,t.setGrouped=n,t.groupValues=i}(e=t.DataViewTransform||(t.DataViewTransform={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){if(!t||!t.length)return-1;var n=t[0];if(n.values&&n.values.length>0)for(var r=0,a=n.values.length;a>r;++r){var o=n.values[r];if(o&&o.source&&i(o.source,e))return r}return-1}function n(t,e){if(t&&t.length)for(var n=0,r=t.length;r>n;n++)if(i(t[n].source,e))return n;return-1}function i(t,e){var n=t.roles;return n&&n[e]}function r(t,e){return null!=t&&null!=t.metadata&&t.metadata.columns&&t.metadata.columns.some(function(t){return t.roles&&void 0!==t.roles[e]})}function a(t,e){return t&&t.source&&t.source.roles&&t.source.roles[e]===!0}t.getMeasureIndexOfRole=e,t.getCategoryIndexOfRole=n,t.hasRole=i,t.hasRoleInDataView=r,t.hasRoleInValueColumn=a}(e=t.DataRoleHelper||(t.DataRoleHelper={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){if(!t)return n;var i=t[e];return void 0===i?n:i}function n(t,n,i){var r=e(t,n);return r&&r.solid?r.solid.color:i}t.getValue=e,t.getFillColorByPropertyName=n}(e=t.DataViewObject||(t.DataViewObject={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(e,n,i){return e?t.DataViewObject.getValue(e[n.objectName],n.propertyName,i):i}function i(t,e,n){return t&&t[e]?t[e]:n}function r(t,e,i){var r=n(t,e);return r&&r.solid?r.solid.color:i}function a(t,e,i){var r=n(t,e,i);return r&&r.solid?r.solid.color:void 0===r||null===r||\"object\"==typeof r&&!r.solid?i:r}e.getValue=n,e.getObject=i,e.getFillColor=r,e.getCommonValue=a}(e=t.DataViewObjects||(t.DataViewObjects={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.dataview.DataRoleHelper;!function(t){function e(t,e,n){if(t.categories&&t.categories.length>0){var r=t.categories[0];return r.source&&i.hasRole(r.source,e)&&i.hasRole(r.source,n)}return!1}function n(t){return void 0!==t.groupName?t.groupName:t.queryName}function r(t){var e=o(t);return null!=e&&e.imageUrl===!0}function a(t){var e=o(t);return null!=e&&e.webUrl===!0}function o(t){return t&&t.type&&t.type.misc}function l(t){return t&&t.metadata&&t.metadata.columns&&t.metadata.columns.length?t.metadata.columns.some(function(t){return r(t)===!0}):!1}t.categoryIsAlsoSeriesRole=e,t.getSeriesName=n,t.isImageUrlColumn=r,t.isWebUrlColumn=a,t.getMiscellaneousTypeDescriptor=o,t.hasImageUrlColumn=l}(n=e.converterHelper||(e.converterHelper={}))}(n=e.dataview||(e.dataview={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){}return e.getDefault=function(){return new this},e.createPropertyIdentifier=function(t,e){return{objectName:t,propertyName:e}},e.parse=function(e){var n,i=this.getDefault();if(!e||!e.metadata||!e.metadata.objects)return i;n=i.getProperties();for(var r in n)for(var a in n[r]){var o=i[r][a];i[r][a]=t.DataViewObjects.getCommonValue(e.metadata.objects,n[r][a],o)}return i},e.isPropertyEnumerable=function(t){return!e.InnumerablePropertyPrefix.test(t)},e.enumerateObjectInstances=function(t,e){var n=t&&t[e.objectName];if(!n)return[];var i={objectName:e.objectName,selector:null,properties:{}};for(var r in n)n.hasOwnProperty(r)&&(i.properties[r]=n[r]);return{instances:[i]}},e.prototype.getProperties=function(){var t=this,n={},i=Object.keys(this);return i.forEach(function(i){if(e.isPropertyEnumerable(i)){var r=Object.keys(t[i]);n[i]={},r.forEach(function(t){e.isPropertyEnumerable(i)&&(n[i][t]=e.createPropertyIdentifier(i,t))})}}),n},e}();e.InnumerablePropertyPrefix=/^_/,t.DataViewObjectsParser=e}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(e){return e>=0?e<t.POSITIVE_POWERS.length?t.POSITIVE_POWERS[e]:1/0:(e=-e,e>0&&e<t.NEGATIVE_POWERS.length?t.NEGATIVE_POWERS[e]:0)}function n(e){if(e>1&&1e16>e)return 1e8>e?1e4>e?100>e?10>e?0:1:1e3>e?2:3:1e6>e?1e5>e?4:5:1e7>e?6:7:1e12>e?1e10>e?1e9>e?8:9:1e11>e?10:11:1e14>e?1e13>e?12:13:1e15>e?14:15;if(e>1e-16&&1>e)return 1e-8>e?1e-12>e?1e-14>e?1e-15>e?-16:-15:1e-13>e?-14:-13:1e-10>e?1e-11>e?-12:-11:1e-9>e?-10:-9:1e-4>e?1e-6>e?1e-7>e?-8:-7:1e-5>e?-6:-5:.01>e?.001>e?-4:-3:.1>e?-2:-1;var n=Math.log(e)/t.LOG_E_10;return t.floorWithPrecision(n)}function i(e,n){if(void 0===n&&(n=t.DEFAULT_PRECISION_IN_DECIMAL_DIGITS),e&&isFinite(e)){var i=t.log10(Math.abs(e));if(i<t.MIN_EXP)return 0;var r=Math.max(i-n,-t.NEGATIVE_POWERS.length+1);return t.pow10(r)}}function r(t,e,n){return n=b(n,t,e),t===e||Math.abs(t-e)<n}function a(t,e,n){return n=b(n,t,e),e>t&&Math.abs(t-e)>n}function o(t,e,n){return n=b(n,t,e),e>t||Math.abs(t-e)<n}function l(t,e,n){return n=b(n,t,e),t>e&&Math.abs(t-e)>n}function s(t,e,n){return n=b(n,t,e),t>e||Math.abs(t-e)<n}function u(e,n){n=null!=n?n:t.DEFAULT_PRECISION;var i=Math.round(e);return Math.abs(e-i)<n?i:Math.floor(e)}function c(e,n){n=b(n,t.DEFAULT_PRECISION);var i=Math.round(e);return Math.abs(e-i)<n?i:Math.ceil(e)}function h(e,n){return n=b(n,t.DEFAULT_PRECISION),0===n||0===e?e:Math.floor(e/n)*n}function f(e,n){return n=b(n,t.DEFAULT_PRECISION),0===n||0===e?e:Math.ceil(e/n)*n}function d(e,n){if(n=b(n,t.DEFAULT_PRECISION),0===n||0===e)return e;var i=Math.round(e/n)*n,r=Math.round(t.log10(Math.abs(e))-t.log10(n))+1;return r>0&&16>r&&(i=parseFloat(i.toPrecision(r))),i}function g(t,e,n){return void 0===t||null===t?t:e>t?e:t>n?n:t}function p(t){return.5+t<<0}function v(t,e,n,i,r){if(0===n||0===r)return t>=e&&e+n>=t?i:NaN;var a=(t-e)/n,o=i+a*r;return o}function m(t){return d(t,i(t))}function y(t){return null!==t&&t%1===0}function x(t,e){return Math.round(t/e)*e}function b(e,n,i){if(void 0!==e)return e;var r;return r=i?n?t.getPrecision(Math.min(Math.abs(n),Math.abs(i))):t.getPrecision(i):t.getPrecision(n),r||t.DEFAULT_PRECISION}t.MIN_VALUE=-Number.MAX_VALUE,t.MAX_VALUE=Number.MAX_VALUE,t.MIN_EXP=-308,t.MAX_EXP=308,t.EPSILON=1e-323,t.DEFAULT_PRECISION=1e-4,t.DEFAULT_PRECISION_IN_DECIMAL_DIGITS=12,t.LOG_E_10=Math.log(10),t.POSITIVE_POWERS=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,1e23,1e24,1e25,1e26,1e27,1e28,1e29,1e30,1e31,1e32,1e33,1e34,1e35,1e36,1e37,1e38,1e39,1e40,1e41,1e42,1e43,1e44,1e45,1e46,1e47,1e48,1e49,1e50,1e51,1e52,1e53,1e54,1e55,1e56,1e57,1e58,1e59,1e60,1e61,1e62,1e63,1e64,1e65,1e66,1e67,1e68,1e69,1e70,1e71,1e72,1e73,1e74,1e75,1e76,1e77,1e78,1e79,1e80,1e81,1e82,1e83,1e84,1e85,1e86,1e87,1e88,1e89,1e90,1e91,1e92,1e93,1e94,1e95,1e96,1e97,1e98,1e99,1e100,1e101,1e102,1e103,1e104,1e105,1e106,1e107,1e108,1e109,1e110,1e111,1e112,1e113,1e114,1e115,1e116,1e117,1e118,1e119,1e120,1e121,1e122,1e123,1e124,1e125,1e126,1e127,1e128,1e129,1e130,1e131,1e132,1e133,1e134,1e135,1e136,1e137,1e138,1e139,1e140,1e141,1e142,1e143,1e144,1e145,1e146,1e147,1e148,1e149,1e150,1e151,1e152,1e153,1e154,1e155,1e156,1e157,1e158,1e159,1e160,1e161,1e162,1e163,1e164,1e165,1e166,1e167,1e168,1e169,1e170,1e171,1e172,1e173,1e174,1e175,1e176,1e177,1e178,1e179,1e180,1e181,1e182,1e183,1e184,1e185,1e186,1e187,1e188,1e189,1e190,1e191,1e192,1e193,1e194,1e195,1e196,1e197,1e198,1e199,1e200,1e201,1e202,1e203,1e204,1e205,1e206,1e207,1e208,1e209,1e210,1e211,1e212,1e213,1e214,1e215,1e216,1e217,1e218,1e219,1e220,1e221,1e222,1e223,1e224,1e225,1e226,1e227,1e228,1e229,1e230,1e231,1e232,1e233,1e234,1e235,1e236,1e237,1e238,1e239,1e240,1e241,1e242,1e243,1e244,1e245,1e246,1e247,1e248,1e249,1e250,1e251,1e252,1e253,1e254,1e255,1e256,1e257,1e258,1e259,1e260,1e261,1e262,1e263,1e264,1e265,1e266,1e267,1e268,1e269,1e270,1e271,1e272,1e273,1e274,1e275,1e276,1e277,1e278,1e279,1e280,1e281,1e282,1e283,1e284,1e285,1e286,1e287,1e288,1e289,1e290,1e291,1e292,1e293,1e294,1e295,1e296,1e297,1e298,1e299,1e300,1e301,1e302,1e303,1e304,1e305,1e306,1e307,1e308],t.NEGATIVE_POWERS=[1,.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17,1e-18,1e-19,1e-20,1e-21,1e-22,1e-23,1e-24,1e-25,1e-26,1e-27,1e-28,1e-29,1e-30,1e-31,1e-32,1e-33,1e-34,1e-35,1e-36,1e-37,1e-38,1e-39,1e-40,1e-41,1e-42,1e-43,1e-44,1e-45,1e-46,1e-47,1e-48,1e-49,1e-50,1e-51,1e-52,1e-53,1e-54,1e-55,1e-56,1e-57,1e-58,1e-59,1e-60,1e-61,1e-62,1e-63,1e-64,1e-65,1e-66,1e-67,1e-68,1e-69,1e-70,1e-71,1e-72,1e-73,1e-74,1e-75,1e-76,1e-77,1e-78,1e-79,1e-80,1e-81,1e-82,1e-83,1e-84,1e-85,1e-86,1e-87,1e-88,1e-89,1e-90,1e-91,1e-92,1e-93,1e-94,1e-95,1e-96,1e-97,1e-98,1e-99,1e-100,1e-101,1e-102,1e-103,1e-104,1e-105,1e-106,1e-107,1e-108,1e-109,1e-110,1e-111,1e-112,1e-113,1e-114,1e-115,1e-116,1e-117,1e-118,1e-119,1e-120,1e-121,1e-122,1e-123,1e-124,1e-125,1e-126,1e-127,1e-128,1e-129,1e-130,1e-131,1e-132,1e-133,1e-134,1e-135,1e-136,1e-137,1e-138,1e-139,1e-140,1e-141,1e-142,1e-143,1e-144,1e-145,1e-146,1e-147,1e-148,1e-149,1e-150,1e-151,1e-152,1e-153,1e-154,1e-155,1e-156,1e-157,1e-158,1e-159,1e-160,1e-161,1e-162,1e-163,1e-164,1e-165,1e-166,1e-167,1e-168,1e-169,1e-170,1e-171,1e-172,1e-173,1e-174,1e-175,1e-176,1e-177,1e-178,1e-179,1e-180,1e-181,1e-182,1e-183,1e-184,1e-185,1e-186,1e-187,1e-188,1e-189,1e-190,1e-191,1e-192,1e-193,1e-194,1e-195,1e-196,1e-197,1e-198,1e-199,1e-200,1e-201,1e-202,1e-203,1e-204,1e-205,1e-206,1e-207,1e-208,1e-209,1e-210,1e-211,1e-212,1e-213,1e-214,1e-215,1e-216,1e-217,1e-218,1e-219,1e-220,1e-221,1e-222,1e-223,1e-224,1e-225,1e-226,1e-227,1e-228,1e-229,1e-230,1e-231,1e-232,1e-233,1e-234,1e-235,1e-236,1e-237,1e-238,1e-239,1e-240,1e-241,1e-242,1e-243,1e-244,1e-245,1e-246,1e-247,1e-248,1e-249,1e-250,1e-251,1e-252,1e-253,1e-254,1e-255,1e-256,1e-257,1e-258,1e-259,1e-260,1e-261,1e-262,1e-263,1e-264,1e-265,1e-266,1e-267,1e-268,1e-269,1e-270,1e-271,1e-272,1e-273,1e-274,1e-275,1e-276,1e-277,1e-278,1e-279,1e-280,1e-281,1e-282,1e-283,1e-284,1e-285,1e-286,1e-287,1e-288,1e-289,1e-290,1e-291,1e-292,1e-293,1e-294,1e-295,1e-296,1e-297,1e-298,1e-299,1e-300,1e-301,1e-302,1e-303,1e-304,1e-305,1e-306,1e-307,1e-308,1e-309,1e-310,1e-311,1e-312,1e-313,1e-314,1e-315,1e-316,1e-317,1e-318,1e-319,1e-320,1e-321,1e-322,1e-323,0],t.pow10=e,t.log10=n,t.getPrecision=i,t.equalWithPrecision=r,t.lessWithPrecision=a,t.lessOrEqualWithPrecision=o,t.greaterWithPrecision=l,t.greaterOrEqualWithPrecision=s,t.floorWithPrecision=u,t.ceilWithPrecision=c,t.floorToPrecision=h,t.ceilToPrecision=f,t.roundToPrecision=d,t.ensureInRange=g,t.round=p,t.project=v,t.removeDecimalNoise=m,t.isInteger=y,t.toIncrement=x,t.detectPrecision=b}(e=t.Double||(t.Double={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){function n(){}n.prototype=t;var i=new n;return e&&e(i),i}function n(t){var n=Object.getPrototypeOf(t);return n!==Object.prototype&&n!==Array.prototype||(t=e(t)),t}function i(t,n){if(t){for(var i,r=0,a=t.length;a>r;r++){var o=n(t[r]);o&&(i||(i=e(t)),i[r]=o)}return i}}t.inherit=e,t.inheritSingle=n,t.overrideArray=i}(e=t.Prototype||(t.Prototype={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){for(var n=[],i=t.length-1;i>=0;--i)-1!==e.indexOf(t[i])&&n.push(t[i]);return n}function n(t,e){for(var n=[],i=t.length-1;i>=0;--i){var r=t[i];-1===e.indexOf(r)&&n.push(r)}return n}function i(t){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}return e}function r(t,e){for(var n=0,i=e.length;i>n;++n)a(t,e[n])}function a(t,e){t.indexOf(e)<0&&t.push(e)}function o(t,e,n){for(var i=[],r=e;n>=r;++r)i.push(t[r]);return i}function l(t,e){for(var n=[],i=0;e>i;++i)n.push(t[i]);return n}function s(t){return l(t,t.length)}function u(t,e,n){if(t||(t=null),e||(e=null),t===e)return!0;if(!!t!=!!e)return!1;var i=t.length;if(i!==e.length)return!1;for(var r=0;i>r&&n(t[r],e[r]);)++r;return r===i}function c(t){return t&&0===t.length?null:t}function h(t,e){for(var n=0,i=t.length;i>n;++n)if(e(t[n]))return n;return-1}function f(t,e){if(0===e)return t.slice();var n=t.slice(e);return Array.prototype.push.apply(n,t.slice(0,e)),n}function d(){return g([])}function g(t){var e=t;return e.withId=v,e}function p(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(r.id===e)return r}}function v(e){return t.findWithId(this,e)}function m(){return y([])}function y(t){var e=t;return e.withName=M,e}function x(t,e){var n=b(t,e);return n>=0?t[n]:void 0}function b(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(r.name===e)return n}return-1}function S(t,e){for(var n=t.length,i=n-1;i>=0;i--){var r=t[i]-e;if(0===r)return!1;if(!(r>0))return t.splice(i+1,0,e),!0}return t.unshift(e),!0}function w(t,e){var n=t.indexOf(e);return 0>n?!1:(t.splice(n,1),!0)}function M(t){var e=this;return x(e,t)}function C(t){if(t)for(;t.length>0;)t.pop()}function T(t){return!t||0===t.length}function P(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function D(t,e,n){return t.some(function(t){return n(t,e)})}function A(t){for(var e=t;null!=e;){if(Array.isArray(e))return!0;e=Object.getPrototypeOf(e)}return!1}function L(t,e){var n=t.length;if(n>=2)for(var i=1;n>i;i++)if(e(t[i-1],t[i])>0)return!1;return!0}function E(t,e){var n=e?function(t,e){return e-t}:function(t,e){return t-e};return L(t,n)}function F(t){return Array.isArray(t)?t:[t]}t.intersect=e,t.diff=n,t.distinct=i,t.union=r,t.unionSingle=a,t.range=o,t.take=l,t.copy=s,t.sequenceEqual=u,t.emptyToNull=c,t.indexOf=h,t.rotate=f,t.createWithId=d,t.extendWithId=g,t.findWithId=p,t.createWithName=m,t.extendWithName=y,t.findItemWithName=x,t.indexWithName=b,t.insertSorted=S,t.removeFirst=w,t.clear=C,t.isUndefinedOrEmpty=T,t.swap=P,t.isInArray=D,t.isArrayOrInheritedArray=A,t.isSorted=L,t.isSortedNumeric=E,t.ensureArray=F}(e=t.ArrayExtensions||(t.ArrayExtensions={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.type.Double;!function(t){function e(t,e){return(t&e)===e}function n(t,e){return t|=e}function r(t,e){return t&=~e}function a(t,e){return t[e]}function o(t){if(!i.isInteger(t))return 0;for(var e=0,n=t;0!==n;)1===(1&n)&&e++,n>>>=1;return e}t.hasFlag=e,t.setFlag=n,t.resetFlag=r,t.toString=a,t.getBitCount=o}(n=e.EnumExtensions||(e.EnumExtensions={}))}(n=e.type||(e.type={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.type.Double,i=function(){function t(){}return t.prototype._ensureIncludeZero=function(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))},t.prototype._ensureNotEmpty=function(){if(this.min===this.max)if(this.min){var e=this.min,i=n.log10(Math.abs(e)),r=void 0;i>=0&&4>i?(r=.5,this.forcedSingleStop=e):(r=n.pow10(i)/2,this.forcedSingleStop=null),this.min=e-r,this.max=e+r}else this.min=0,this.max=t.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0},t.prototype._ensureDirection=function(){if(this.min>this.max){var t=this.min;this.min=this.max,this.max=t}},t.prototype.getSize=function(){return this.max-this.min},t.prototype.shrinkByStep=function(t,e){var n=this.min/e,i=t.min/e,r=Math.floor(i-n);this.min+=r*e,n=this.max/e,i=t.max/e,r=Math.ceil(i-n),this.max+=r*e},t.calculate=function(e,i,a,o,l){var s=new t;return s.includeZero=!!l,s.hasDataRange=r.hasValue(e)&&r.hasValue(i),s.hasFixedMin=r.hasValue(a),s.hasFixedMax=r.hasValue(o),e=n.ensureInRange(e,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),i=n.ensureInRange(i,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),s.hasFixedMin&&s.hasFixedMax?(s.min=a,s.max=o):s.hasFixedMin?(s.min=a,s.max=i>a?i:a):s.hasFixedMax?(s.min=o>e?e:o,s.max=o):s.hasDataRange?(s.min=e,s.max=i):(s.min=0,s.max=0),s._ensureIncludeZero(),s._ensureNotEmpty(),s._ensureDirection(),0===s.min?s.hasFixedMin=!0:0===s.max&&(s.hasFixedMax=!0),s},t.calculateDataRange=function(e,n,i){return r.hasValue(e)&&r.hasValue(n)?t.calculate(e,n,null,null,i):t.calculateFixedRange(0,t.DEFAULT_MAX)},t.calculateFixedRange=function(e,n,i){var r=new t;return r.hasDataRange=!1,r.includeZero=i,r.min=e,r.max=n,r._ensureIncludeZero(),r._ensureNotEmpty(),r._ensureDirection(),r.hasFixedMin=!0,r.hasFixedMax=!0,r},t}();i.DEFAULT_MAX=10,i.MIN_SUPPORTED_DOUBLE=-1e307,i.MAX_SUPPORTED_DOUBLE=1e307,e.NumericSequenceRange=i;var r;!function(t){function e(t){return void 0!==t&&null!==t}t.hasValue=e}(r=e.ValueUtil||(e.ValueUtil={}))}(n=e.type||(e.type={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.type.Double,i=t.extensibility.utils.type.NumericSequenceRange,r=function(){function t(){}return t.calculate=function(e,r,a,o,l,s){var u=new t;if(r=void 0===r?10:n.ensureInRange(r,t.MIN_COUNT,t.MAX_COUNT),void 0===o&&(o=n.MIN_EXP),void 0===l&&(l=!1),void 0===a&&(a=1),void 0===s&&(s=[1,2,5]),e.forcedSingleStop)return u.interval=e.getSize(),u.intervalOffset=u.interval-(e.forcedSingleStop-e.min),u.min=e.min,u.max=e.max,u.sequence=[e.forcedSingleStop],u;var c=0,h=0,f=9,d=a>0&&!e.hasFixedMin,g=a>0&&!e.hasFixedMax,p=e.getSize(),v=n.log10(p),m=n.log10(s[0]);v-=m;var y=n.log10(r);v-=y,v=Math.max(v,o-m+1);var x=void 0;if(0!==c){var b=n.pow10(v),S=n.floorToPrecision(e.min,b),w=n.ceilToPrecision(e.max,b),M=i.calculateFixedRange(S,w);M.shrinkByStep(e,c),h=M.min,f=M.max,x=Math.floor(M.getSize()/c)}else{var C=void 0;for(C=0;3>C;C++){for(var T=v+C,b=n.pow10(T),S=n.floorToPrecision(e.min,b),w=n.ceilToPrecision(e.max,b),P=s.length,D=n.pow10(T-1),A=0;P>A;A++){var L=s[A]*D,M=i.calculateFixedRange(S,w,l);if(M.shrinkByStep(e,L),d&&e.min===M.min&&a>=1&&(M.min-=L),g&&e.max===M.max&&a>=1&&(M.max+=L),x=n.ceilWithPrecision(M.getSize()/L,n.DEFAULT_PRECISION),r>=x||2===C&&A===P-1||1===r&&2===x&&(L>e.getSize()||e.min<0&&e.max>0&&2*L>=e.getSize())){c=L,h=M.min,f=M.max;break}}if(0!==c)break}}(x>32*r||x>t.MAX_COUNT)&&(x=Math.min(32*r,t.MAX_COUNT),c=(f-h)/x),u.min=h,u.max=f,u.interval=c,u.intervalOffset=h-e.min,u.maxAllowedMargin=a,u.canExtendMin=d,u.canExtendMax=g;var E=n.getPrecision(c,0);u.precision=E;var F=[],k=n.roundToPrecision(h,E);F.push(k);for(var A=0;x>A;A++)k=n.roundToPrecision(k+c,E),F.push(k);return u.sequence=F,u.trimMinMax(e.min,e.max),u},t.calculateUnits=function(e,i,r,a){r=n.ensureInRange(r,t.MIN_COUNT,t.MAX_COUNT),e===i&&(i=e+1);for(var o=0,l=0,s=0;s<a.length;s++){l=a[s];var u=n.ceilWithPrecision(i/l),c=n.floorWithPrecision(e/l);if(o=u-c,r>=o)break}var h=-e;h%=l;var f=new t;f.sequence=[];for(var d=e+h;f.sequence.push(d),!(d>=i);d+=l);return f.interval=l,f.intervalOffset=h,f.min=f.sequence[0],f.max=f.sequence[f.sequence.length-1],f},t.prototype.trimMinMax=function(t,e){var n=(t-this.min)/this.interval,i=(this.max-e)/this.interval,r=.001;(!this.canExtendMin||n>this.maxAllowedMargin&&n>r)&&(this.min=t),(!this.canExtendMax||i>this.maxAllowedMargin&&i>r)&&(this.max=e)},t}();r.MIN_COUNT=1,r.MAX_COUNT=1e3,e.NumericSequence=r}(n=e.type||(e.type={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){return t+o}function n(t){return e(i(t))}function i(t){return a*t}function r(t){return t/a}var a=4/3,o=\"px\";t.toString=e,t.fromPoint=n,t.fromPointToPixel=i,t.toPoint=r}(e=t.PixelConverter||(t.PixelConverter={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){return t.lastIndex=n||0,t.exec(e)}t.run=e}(e=t.RegExpExtensions||(t.RegExpExtensions={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return-1!==t.indexOf(e,t.length-e.length)}t.endsWith=e}(e=t.StringExtensions||(t.StringExtensions={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return(t||e)&&!(t&&e)}t.XOR=e}(e=t.LogicExtensions||(t.LogicExtensions={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return t===e?!0:JSON.stringify(t)===JSON.stringify(e)}t.equals=e}(e=t.JsonComparer||(t.JsonComparer={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(e){return(e-t.TextSizeMin)/n}t.TextSizeMin=8,t.TextSizeMax=40;var n=t.TextSizeMax-t.TextSizeMin;t.getScale=e}(e=t.TextSizeDefaults||(t.TextSizeDefaults={}))}(e=t.type||(t.type={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(t){return t&y}function i(t){return(t&x)===t}function r(t){if(i(t))return null;var e=m[t];if(e){var n=e.lastIndexOf(\"_\");if(n>0){var r=e.slice(0,n);m[r]&&(e=r)}}return e||null}function a(t,e){var i=p[t],r=m[i];if(null==r&&(r=v.Null),t&&e){var a=m[e];if(a){var o=n(a);o===g.Null?(a=r|a,m[a]&&(r=a)):o===t&&(r=a)}}return r}function o(t,e){return(t&b)===(e&b)}var l=t.extensibility.utils.type.EnumExtensions,s=function(){function t(t,e,n,i){this.underlyingType=t,this.category=e,l.hasFlag(t,v.Temporal)&&(this.temporalType=new c(t)),l.hasFlag(t,v.Geography)&&(this.geographyType=new h(t)),l.hasFlag(t,v.Miscellaneous)&&(this.miscType=new f(t)),l.hasFlag(t,v.Formatting)&&(this.formattingType=new d(t)),l.hasFlag(t,v.Enumeration)&&(this.enumType=n),l.hasFlag(t,v.Scripting)&&(this.scriptingType=new u(t)),l.hasFlag(t,v.Variant)&&(this.variationTypes=i)}return t.fromDescriptor=function(e){if(e=e||{},e.text)return t.fromExtendedType(v.Text);if(e.integer)return t.fromExtendedType(v.Integer);if(e.numeric)return t.fromExtendedType(v.Double);if(e.bool)return t.fromExtendedType(v.Boolean);if(e.dateTime)return t.fromExtendedType(v.DateTime);if(e.duration)return t.fromExtendedType(v.Duration);if(e.binary)return t.fromExtendedType(v.Binary);if(e.none)return t.fromExtendedType(v.None);if(e.scripting&&e.scripting.source)return t.fromExtendedType(v.ScriptSource);if(e.enumeration)return t.fromEnum(e.enumeration);if(e.temporal){if(e.temporal.year)return t.fromExtendedType(v.Years_Integer);if(e.temporal.quarter)return t.fromExtendedType(v.Quarters_Integer);if(e.temporal.month)return t.fromExtendedType(v.Months_Integer);if(e.temporal.day)return t.fromExtendedType(v.DayOfMonth_Integer);if(e.temporal.paddedDateTableDate)return t.fromExtendedType(v.PaddedDateTableDates)}if(e.geography){if(e.geography.address)return t.fromExtendedType(v.Address);if(e.geography.city)return t.fromExtendedType(v.City);if(e.geography.continent)return t.fromExtendedType(v.Continent);if(e.geography.country)return t.fromExtendedType(v.Country);if(e.geography.county)return t.fromExtendedType(v.County);if(e.geography.region)return t.fromExtendedType(v.Region);if(e.geography.postalCode)return t.fromExtendedType(v.PostalCode_Text);if(e.geography.stateOrProvince)return t.fromExtendedType(v.StateOrProvince);if(e.geography.place)return t.fromExtendedType(v.Place);if(e.geography.latitude)return t.fromExtendedType(v.Latitude_Double);if(e.geography.longitude)return t.fromExtendedType(v.Longitude_Double)}if(e.misc){if(e.misc.image)return t.fromExtendedType(v.Image);if(e.misc.imageUrl)return t.fromExtendedType(v.ImageUrl);if(e.misc.webUrl)return t.fromExtendedType(v.WebUrl);if(e.misc.barcode)return t.fromExtendedType(v.Barcode_Text)}if(e.formatting){if(e.formatting.color)return t.fromExtendedType(v.Color);if(e.formatting.formatString)return t.fromExtendedType(v.FormatString);if(e.formatting.alignment)return t.fromExtendedType(v.Alignment);if(e.formatting.labelDisplayUnits)return t.fromExtendedType(v.LabelDisplayUnits);if(e.formatting.fontSize)return t.fromExtendedType(v.FontSize);if(e.formatting.labelDensity)return t.fromExtendedType(v.LabelDensity)}if(e.extendedType)return t.fromExtendedType(e.extendedType);if(e.operations&&e.operations.searchEnabled)return t.fromExtendedType(v.SearchEnabled);if(e.variant){var n=e.variant.map(function(e){return t.fromDescriptor(e)});return t.fromVariant(n)}return t.fromExtendedType(v.Null)},t.fromExtendedType=function(e){e=e||v.Null;var i=n(e),a=r(e);return t.fromPrimitiveTypeAndCategory(i,a)},\nt.fromPrimitiveTypeAndCategory=function(e,n){e=e||g.Null,n=n||null;var i=e.toString();return n&&(i+=\"|\"+n),t.typeCache[i]||(t.typeCache[i]=new t(a(e,n),n))},t.fromEnum=function(e){return new t(v.Enumeration,null,e)},t.fromVariant=function(e){return new t(v.Variant,null,null,e)},t.isCompatibleTo=function(e,n){for(var i=t.fromDescriptor(e),r=0,a=n;r<a.length;r++){var o=a[r],l=t.fromDescriptor(o);if(l.isCompatibleFrom(i))return!0}return!1},t.prototype.isCompatibleFrom=function(t){var e=t.primitiveType;return!!(this===t||this.primitiveType===e||e===g.Null||this.numeric&&t.numeric)},t.prototype.equals=function(t){return e.JsonComparer.equals(this,t)},Object.defineProperty(t.prototype,\"primitiveType\",{get:function(){return n(this.underlyingType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"extendedType\",{get:function(){return this.underlyingType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"categoryString\",{get:function(){return this.category},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"text\",{get:function(){return this.primitiveType===g.Text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"numeric\",{get:function(){return l.hasFlag(this.underlyingType,v.Numeric)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"integer\",{get:function(){return this.primitiveType===g.Integer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"bool\",{get:function(){return this.primitiveType===g.Boolean},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"dateTime\",{get:function(){return this.primitiveType===g.DateTime||this.primitiveType===g.Date||this.primitiveType===g.Time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"duration\",{get:function(){return this.primitiveType===g.Duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"binary\",{get:function(){return this.primitiveType===g.Binary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"none\",{get:function(){return this.primitiveType===g.None},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"temporal\",{get:function(){return this.temporalType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"geography\",{get:function(){return this.geographyType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"misc\",{get:function(){return this.miscType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"formatting\",{get:function(){return this.formattingType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"enumeration\",{get:function(){return this.enumType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"scripting\",{get:function(){return this.scriptingType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"variant\",{get:function(){return this.variationTypes},enumerable:!0,configurable:!0}),t}();s.typeCache={},e.ValueType=s;var u=function(){function t(t){this.underlyingType=t}return Object.defineProperty(t.prototype,\"source\",{get:function(){return o(this.underlyingType,v.ScriptSource)},enumerable:!0,configurable:!0}),t}();e.ScriptType=u;var c=function(){function t(t){this.underlyingType=t}return Object.defineProperty(t.prototype,\"year\",{get:function(){return o(this.underlyingType,v.Years)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"quarter\",{get:function(){return o(this.underlyingType,v.Quarters)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"month\",{get:function(){return o(this.underlyingType,v.Months)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"day\",{get:function(){return o(this.underlyingType,v.DayOfMonth)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddedDateTableDate\",{get:function(){return o(this.underlyingType,v.PaddedDateTableDates)},enumerable:!0,configurable:!0}),t}();e.TemporalType=c;var h=function(){function t(t){this.underlyingType=t}return Object.defineProperty(t.prototype,\"address\",{get:function(){return o(this.underlyingType,v.Address)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"city\",{get:function(){return o(this.underlyingType,v.City)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"continent\",{get:function(){return o(this.underlyingType,v.Continent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"country\",{get:function(){return o(this.underlyingType,v.Country)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"county\",{get:function(){return o(this.underlyingType,v.County)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"region\",{get:function(){return o(this.underlyingType,v.Region)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"postalCode\",{get:function(){return o(this.underlyingType,v.PostalCode)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"stateOrProvince\",{get:function(){return o(this.underlyingType,v.StateOrProvince)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"place\",{get:function(){return o(this.underlyingType,v.Place)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"latitude\",{get:function(){return o(this.underlyingType,v.Latitude)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"longitude\",{get:function(){return o(this.underlyingType,v.Longitude)},enumerable:!0,configurable:!0}),t}();e.GeographyType=h;var f=function(){function t(t){this.underlyingType=t}return Object.defineProperty(t.prototype,\"image\",{get:function(){return o(this.underlyingType,v.Image)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"imageUrl\",{get:function(){return o(this.underlyingType,v.ImageUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"webUrl\",{get:function(){return o(this.underlyingType,v.WebUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"barcode\",{get:function(){return o(this.underlyingType,v.Barcode)},enumerable:!0,configurable:!0}),t}();e.MiscellaneousType=f;var d=function(){function t(t){this.underlyingType=t}return Object.defineProperty(t.prototype,\"color\",{get:function(){return o(this.underlyingType,v.Color)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"formatString\",{get:function(){return o(this.underlyingType,v.FormatString)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"alignment\",{get:function(){return o(this.underlyingType,v.Alignment)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"labelDisplayUnits\",{get:function(){return o(this.underlyingType,v.LabelDisplayUnits)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontSize\",{get:function(){return o(this.underlyingType,v.FontSize)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"labelDensity\",{get:function(){return o(this.underlyingType,v.LabelDensity)},enumerable:!0,configurable:!0}),t}();e.FormattingType=d;var g;!function(t){t[t.Null=0]=\"Null\",t[t.Text=1]=\"Text\",t[t.Decimal=2]=\"Decimal\",t[t.Double=3]=\"Double\",t[t.Integer=4]=\"Integer\",t[t.Boolean=5]=\"Boolean\",t[t.Date=6]=\"Date\",t[t.DateTime=7]=\"DateTime\",t[t.DateTimeZone=8]=\"DateTimeZone\",t[t.Time=9]=\"Time\",t[t.Duration=10]=\"Duration\",t[t.Binary=11]=\"Binary\",t[t.None=12]=\"None\",t[t.Variant=13]=\"Variant\"}(g=e.PrimitiveType||(e.PrimitiveType={}));var p;!function(t){t[t.Null=0]=\"Null\",t[t.Text=1]=\"Text\",t[t.Decimal=2]=\"Decimal\",t[t.Double=3]=\"Double\",t[t.Integer=4]=\"Integer\",t[t.Boolean=5]=\"Boolean\",t[t.Date=6]=\"Date\",t[t.DateTime=7]=\"DateTime\",t[t.DateTimeZone=8]=\"DateTimeZone\",t[t.Time=9]=\"Time\",t[t.Duration=10]=\"Duration\",t[t.Binary=11]=\"Binary\",t[t.None=12]=\"None\",t[t.Variant=13]=\"Variant\"}(p||(p={}));var v;!function(t){t[t.Numeric=256]=\"Numeric\",t[t.Temporal=512]=\"Temporal\",t[t.Geography=1024]=\"Geography\",t[t.Miscellaneous=2048]=\"Miscellaneous\",t[t.Formatting=4096]=\"Formatting\",t[t.Scripting=8192]=\"Scripting\",t[t.Null=0]=\"Null\",t[t.Text=1]=\"Text\",t[t.Decimal=258]=\"Decimal\",t[t.Double=259]=\"Double\",t[t.Integer=260]=\"Integer\",t[t.Boolean=5]=\"Boolean\",t[t.Date=518]=\"Date\",t[t.DateTime=519]=\"DateTime\",t[t.DateTimeZone=520]=\"DateTimeZone\",t[t.Time=521]=\"Time\",t[t.Duration=10]=\"Duration\",t[t.Binary=11]=\"Binary\",t[t.None=12]=\"None\",t[t.Variant=13]=\"Variant\",t[t.Years=66048]=\"Years\",t[t.Years_Text=66049]=\"Years_Text\",t[t.Years_Integer=66308]=\"Years_Integer\",t[t.Years_Date=66054]=\"Years_Date\",t[t.Years_DateTime=66055]=\"Years_DateTime\",t[t.Months=131584]=\"Months\",t[t.Months_Text=131585]=\"Months_Text\",t[t.Months_Integer=131844]=\"Months_Integer\",t[t.Months_Date=131590]=\"Months_Date\",t[t.Months_DateTime=131591]=\"Months_DateTime\",t[t.PaddedDateTableDates=197127]=\"PaddedDateTableDates\",t[t.Quarters=262656]=\"Quarters\",t[t.Quarters_Text=262657]=\"Quarters_Text\",t[t.Quarters_Integer=262916]=\"Quarters_Integer\",t[t.Quarters_Date=262662]=\"Quarters_Date\",t[t.Quarters_DateTime=262663]=\"Quarters_DateTime\",t[t.DayOfMonth=328192]=\"DayOfMonth\",t[t.DayOfMonth_Text=328193]=\"DayOfMonth_Text\",t[t.DayOfMonth_Integer=328452]=\"DayOfMonth_Integer\",t[t.DayOfMonth_Date=328198]=\"DayOfMonth_Date\",t[t.DayOfMonth_DateTime=328199]=\"DayOfMonth_DateTime\",t[t.Address=6554625]=\"Address\",t[t.City=6620161]=\"City\",t[t.Continent=6685697]=\"Continent\",t[t.Country=6751233]=\"Country\",t[t.County=6816769]=\"County\",t[t.Region=6882305]=\"Region\",t[t.PostalCode=6947840]=\"PostalCode\",t[t.PostalCode_Text=6947841]=\"PostalCode_Text\",t[t.PostalCode_Integer=6948100]=\"PostalCode_Integer\",t[t.StateOrProvince=7013377]=\"StateOrProvince\",t[t.Place=7078913]=\"Place\",t[t.Latitude=7144448]=\"Latitude\",t[t.Latitude_Decimal=7144706]=\"Latitude_Decimal\",t[t.Latitude_Double=7144707]=\"Latitude_Double\",t[t.Longitude=7209984]=\"Longitude\",t[t.Longitude_Decimal=7210242]=\"Longitude_Decimal\",t[t.Longitude_Double=7210243]=\"Longitude_Double\",t[t.Image=13109259]=\"Image\",t[t.ImageUrl=13174785]=\"ImageUrl\",t[t.WebUrl=13240321]=\"WebUrl\",t[t.Barcode=13305856]=\"Barcode\",t[t.Barcode_Text=13305857]=\"Barcode_Text\",t[t.Barcode_Integer=13306116]=\"Barcode_Integer\",t[t.Color=19664897]=\"Color\",t[t.FormatString=19730433]=\"FormatString\",t[t.Alignment=20058113]=\"Alignment\",t[t.LabelDisplayUnits=20123649]=\"LabelDisplayUnits\",t[t.FontSize=20189443]=\"FontSize\",t[t.LabelDensity=20254979]=\"LabelDensity\",t[t.Enumeration=26214401]=\"Enumeration\",t[t.ScriptSource=32776193]=\"ScriptSource\",t[t.SearchEnabled=65541]=\"SearchEnabled\"}(v=e.ExtendedType||(e.ExtendedType={}));var m;!function(t){t[t.Numeric=256]=\"Numeric\",t[t.Temporal=512]=\"Temporal\",t[t.Geography=1024]=\"Geography\",t[t.Miscellaneous=2048]=\"Miscellaneous\",t[t.Formatting=4096]=\"Formatting\",t[t.Scripting=8192]=\"Scripting\",t[t.Null=0]=\"Null\",t[t.Text=1]=\"Text\",t[t.Decimal=258]=\"Decimal\",t[t.Double=259]=\"Double\",t[t.Integer=260]=\"Integer\",t[t.Boolean=5]=\"Boolean\",t[t.Date=518]=\"Date\",t[t.DateTime=519]=\"DateTime\",t[t.DateTimeZone=520]=\"DateTimeZone\",t[t.Time=521]=\"Time\",t[t.Duration=10]=\"Duration\",t[t.Binary=11]=\"Binary\",t[t.None=12]=\"None\",t[t.Variant=13]=\"Variant\",t[t.Years=66048]=\"Years\",t[t.Years_Text=66049]=\"Years_Text\",t[t.Years_Integer=66308]=\"Years_Integer\",t[t.Years_Date=66054]=\"Years_Date\",t[t.Years_DateTime=66055]=\"Years_DateTime\",t[t.Months=131584]=\"Months\",t[t.Months_Text=131585]=\"Months_Text\",t[t.Months_Integer=131844]=\"Months_Integer\",t[t.Months_Date=131590]=\"Months_Date\",t[t.Months_DateTime=131591]=\"Months_DateTime\",t[t.PaddedDateTableDates=197127]=\"PaddedDateTableDates\",t[t.Quarters=262656]=\"Quarters\",t[t.Quarters_Text=262657]=\"Quarters_Text\",t[t.Quarters_Integer=262916]=\"Quarters_Integer\",t[t.Quarters_Date=262662]=\"Quarters_Date\",t[t.Quarters_DateTime=262663]=\"Quarters_DateTime\",t[t.DayOfMonth=328192]=\"DayOfMonth\",t[t.DayOfMonth_Text=328193]=\"DayOfMonth_Text\",t[t.DayOfMonth_Integer=328452]=\"DayOfMonth_Integer\",t[t.DayOfMonth_Date=328198]=\"DayOfMonth_Date\",t[t.DayOfMonth_DateTime=328199]=\"DayOfMonth_DateTime\",t[t.Address=6554625]=\"Address\",t[t.City=6620161]=\"City\",t[t.Continent=6685697]=\"Continent\",t[t.Country=6751233]=\"Country\",t[t.County=6816769]=\"County\",t[t.Region=6882305]=\"Region\",t[t.PostalCode=6947840]=\"PostalCode\",t[t.PostalCode_Text=6947841]=\"PostalCode_Text\",t[t.PostalCode_Integer=6948100]=\"PostalCode_Integer\",t[t.StateOrProvince=7013377]=\"StateOrProvince\",t[t.Place=7078913]=\"Place\",t[t.Latitude=7144448]=\"Latitude\",t[t.Latitude_Decimal=7144706]=\"Latitude_Decimal\",t[t.Latitude_Double=7144707]=\"Latitude_Double\",t[t.Longitude=7209984]=\"Longitude\",t[t.Longitude_Decimal=7210242]=\"Longitude_Decimal\",t[t.Longitude_Double=7210243]=\"Longitude_Double\",t[t.Image=13109259]=\"Image\",t[t.ImageUrl=13174785]=\"ImageUrl\",t[t.WebUrl=13240321]=\"WebUrl\",t[t.Barcode=13305856]=\"Barcode\",t[t.Barcode_Text=13305857]=\"Barcode_Text\",t[t.Barcode_Integer=13306116]=\"Barcode_Integer\",t[t.Color=19664897]=\"Color\",t[t.FormatString=19730433]=\"FormatString\",t[t.Alignment=20058113]=\"Alignment\",t[t.LabelDisplayUnits=20123649]=\"LabelDisplayUnits\",t[t.FontSize=20189443]=\"FontSize\",t[t.LabelDensity=20254979]=\"LabelDensity\",t[t.Enumeration=26214401]=\"Enumeration\",t[t.ScriptSource=32776193]=\"ScriptSource\",t[t.SearchEnabled=65541]=\"SearchEnabled\"}(m||(m={}));var y=255,x=65535,b=4294901760}(n=e.type||(e.type={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e,n,i){this.left=t||0,this.top=e||0,this.width=n||0,this.height=i||0}return t}();t.Rect=e}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.type.Double;!function(t){var e;!function(t){function e(t){return{x:t.left,y:t.top}}function n(t){return{width:t.width,height:t.height}}function r(t,e){t.width=e.width,t.height=e.height}function a(t){return t.left+t.width}function o(t){return t.top+t.height}function l(t){return{x:t.left,y:t.top}}function s(t){return{x:t.left+t.width,y:t.top}}function u(t){return{x:t.left,y:t.top+t.height}}function c(t){return{x:t.left+t.width,y:t.top+t.height}}function h(t,e){return void 0!==e&&null!==e&&t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function f(t){return null!==t?{left:t.left,top:t.top,width:t.width,height:t.height}:null}function d(t){return\"{left:\"+t.left+\", top:\"+t.top+\", width:\"+t.width+\", height:\"+t.height+\"}\"}function g(t,e,n){var i=t.left+e>=0?t.left+e:0,r=t.top+n>=0?t.top+n:0;return{left:i,top:r,width:t.width,height:t.height}}function p(t,e){return{left:t.left+e.left,top:t.top+e.top,height:t.height+e.height,width:t.width+e.width}}function v(t,e){return{left:t.left-e.left,top:t.top-e.top,height:t.height-e.height,width:t.width-e.width}}function m(t,e){var n=f(t);return e&&(n.left-=e.left,n.top-=e.top,n.width+=e.left+e.right,n.height+=e.top+e.bottom),n}function y(t,e){var n=f(t);return e&&(n.left+=e.left,n.top+=e.top,n.width-=e.left+e.right,n.height-=e.top+e.bottom),n}function x(t,e){return{left:t.left-e,top:t.top-e,width:t.width+e+e,height:t.height+e+e}}function b(t,e){return{left:t.left+e,top:t.top+e,width:t.width-e-e,height:t.height-e-e}}function S(t,e,n){return{x:Math.min(Math.max(t.left,e),t.left+t.width),y:Math.min(Math.max(t.top,n),t.top+t.height)}}function w(t,e){return t===e||void 0!==t&&void 0!==e&&t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function M(t,e){return t===e||void 0!==t&&void 0!==e&&i.equalWithPrecision(t.left,e.left)&&i.equalWithPrecision(t.top,e.top)&&i.equalWithPrecision(t.width,e.width)&&i.equalWithPrecision(t.height,e.height)}function C(t){return void 0===t||null===t||0===t.width&&0===t.height}function T(t,e){return null===t||null===e?!1:i.lessOrEqualWithPrecision(t.left,e.x)&&i.lessOrEqualWithPrecision(e.x,t.left+t.width)&&i.lessOrEqualWithPrecision(t.top,e.y)&&i.lessOrEqualWithPrecision(e.y,t.top+t.height)}function P(t,e){if(!t||!e)return!1;var n=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width);if(n>i)return!1;var r=Math.max(t.top,e.top),a=Math.min(t.top+t.height,e.top+e.height);return a>=r}function D(t,e){if(!t)return e;if(!e)return t;var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top),r=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);return r>=n&&a>=i?{left:n,top:i,width:r-n,height:a-i}:{left:0,top:0,width:0,height:0}}function A(t,e){if(!t)return e;if(!e)return t;var n=Math.min(t.left,e.left),i=Math.min(t.top,e.top),r=Math.max(t.left+t.width,e.left+e.width),a=Math.max(t.top+t.height,e.top+e.height);return{left:n,top:i,width:r-n,height:a-i}}function L(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}t.getOffset=e,t.getSize=n,t.setSize=r,t.right=a,t.bottom=o,t.topLeft=l,t.topRight=s,t.bottomLeft=u,t.bottomRight=c,t.equals=h,t.clone=f,t.toString=d,t.offset=g,t.add=p,t.subtract=v,t.inflate=m,t.deflate=y,t.inflateBy=x,t.deflateBy=b,t.getClosestPoint=S,t.equal=w,t.equalWithPrecision=M,t.isEmpty=C,t.containsPoint=T,t.isIntersecting=P,t.intersect=D,t.combine=A,t.getCentroid=L}(e=t.Rect||(t.Rect={}))}(n=e.shapes||(e.shapes={}))}(n=e.svg||(e.svg={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){this.x=t||0,this.y=e||0}return t}();t.Point=e}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){return{className:t,selectorName:\".\"+t}}t.createClassAndSelector=e,t.styleAttribute=\"style\",t.pixelUnits=\"px\",t.heightProperty=\"height\",t.widthProperty=\"width\",t.topProperty=\"top\",t.bottomProperty=\"bottom\",t.leftProperty=\"left\",t.rightProperty=\"right\",t.marginTopProperty=\"margin-top\",t.marginLeftProperty=\"margin-left\",t.displayProperty=\"display\",t.backgroundProperty=\"background\",t.backgroundColorProperty=\"background-color\",t.backgroundRepeatProperty=\"background-repeat\",t.backgroundSizeProperty=\"background-size\",t.backgroundImageProperty=\"background-image\",t.textShadowProperty=\"text-shadow\",t.textAlignProperty=\"text-align\",t.borderProperty=\"border\",t.borderTopWidthProperty=\"border-top-width\",t.borderBottomWidthProperty=\"border-bottom-width\",t.borderLeftWidthProperty=\"border-left-width\",t.borderRightWidthProperty=\"border-right-width\",t.fontSizeProperty=\"font-size\",t.fontWeightProperty=\"font-weight\",t.colorProperty=\"color\",t.opacityProperty=\"opacity\",t.paddingLeftProperty=\"padding-left\",t.paddingRightProperty=\"padding-right\",t.positionProperty=\"position\",t.maxWidthProperty=\"max-width\",t.minWidthProperty=\"min-width\",t.overflowProperty=\"overflow\",t.overflowXProperty=\"overflow-x\",t.overflowYProperty=\"overflow-y\",t.transformProperty=\"transform\",t.webkitTransformProperty=\"-webkit-transform\",t.cursorProperty=\"cursor\",t.visibilityProperty=\"visibility\",t.absoluteValue=\"absolute\",t.zeroPixelValue=\"0px\",t.autoValue=\"auto\",t.hiddenValue=\"hidden\",t.noneValue=\"none\",t.blockValue=\"block\",t.inlineBlockValue=\"inline-block\",t.transparentValue=\"transparent\",t.boldValue=\"bold\",t.visibleValue=\"visible\",t.tableRowValue=\"table-row\",t.coverValue=\"cover\",t.pointerValue=\"pointer\",t.scrollValue=\"scroll\"}(e=t.CssConstants||(t.CssConstants={}))}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.offset=function(t,e){this.x+=t,this.y+=e},t}();t.Point=e;var n=function(t){function n(e,n,i,r){var a=t.call(this,e,n)||this;return a.width=i||0,a.height=r||0,a}return __extends(n,t),Object.defineProperty(n.prototype,\"point\",{get:function(){return new e(this.x,this.y)},enumerable:!0,configurable:!0}),n.prototype.contains=function(t){return n.contains(this,t)},n.contains=function(t,e){return e&&!n.isEmpty(t)?t.x<=e.x&&e.x<t.x+t.width&&t.y<=e.y&&e.y<t.y+t.height:!1},n.isEmpty=function(t){return!(void 0!==t&&t.width>=0&&t.height>=0)},n}(e);t.Rectangle=n}(e=t.touch||(t.touch={}))}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(){var t=\"touchstart\";return window.PointerEvent&&(t=\"pointerdown\"),t}function n(){var t=\"touchmove\";return window.PointerEvent&&(t=\"pointermove\"),t}function i(){var t=\"touchend\";return window.PointerEvent&&(t=\"pointerup\"),t}function r(){var t=e();return\"pointerdown\"===t||\"MSPointerDown\"===t}t.touchStartEventName=e,t.touchMoveEventName=n,t.touchEndEventName=i,t.usePointerEvents=r}(e=t.touch||(t.touch={}))}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){var n;if(e){for(var i=d3.event,r=void 0;r=i.sourceEvent;)i=r;var a=t.getBoundingClientRect();n=[i.clientX-a.left-t.clientLeft,i.clientY-a.top-t.clientTop]}else{var o=d3.touches(t);o&&o.length>0&&(n=o[0])}return n}t.getCoordinates=e}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return\"translate(\"+t+\",\"+e+\")\"}function n(t){return\"translateX(\"+t+\"px)\"}function i(t,e){return\"translate(\"+t+\"px,\"+e+\"px)\"}function r(t,e,n,i,r){return\"translate(\"+t+\",\"+e+\") rotate(\"+r+\",\"+n+\",\"+i+\")\"}function a(t){return\"scale(\"+t+\")\"}function o(t,e,n){return\"translate(\"+t+\",\"+e+\") scale(\"+n+\")\"}function l(t,e){return t+\" \"+e}function s(){var t=Date.now;Date.now=function(){return 1/0},d3.timer.flush(),Date.now=t}function u(t){if(t){var e=t;e&&e.transitionImmediate&&s()}}function c(t){t.getAttribute(\"d\")||t.setAttribute(\"d\",\"\")}function h(t){isNaN(t.x)&&(t.x=0),isNaN(t.y)&&(t.y=0)}function f(t){if(!t||0===t.length)return{x:\"0\",y:\"0\"};var e,n=t.split(/[\\s,]+/),i=\"0\",r=n[0];if(1===n.length)e=r.substring(10,r.length-1);else{var a=n[1];i=a.substring(0,a.length-1),e=r.substring(10,r.length)}return{x:e,y:i}}function d(t,e,n){var i=\"rotate(\"+n+\" \"+t/2+\" \"+e/2+\")\",r=\"M0 0\";return r+=\"L0 \"+e,r+=\"L\"+t+\" \"+e/2+\" Z\",{path:r,transform:i}}function g(t){if(null!=t){var e=t.getBoundingClientRect(),n=t.getBBox();if(n.height>0&&n.width>0)return{x:e.width/n.width,y:e.height/n.height}}return{x:1,y:1}}t.AlmostZero=1e-6,t.translate=e,t.translateXWithPixels=n,t.translateWithPixels=i,t.translateAndRotate=r,t.scale=a,t.translateAndScale=o,t.transformOrigin=l,t.flushAllD3Transitions=s,t.flushAllD3TransitionsIfNeeded=u,t.ensureDAttribute=c,t.ensureValidSVGPoint=h,t.parseTranslateTransform=f,t.createArrow=d,t.getTransformScaleRatios=g}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){this.scaleDetectorElement=t.append(\"rect\").classed(\"scale-detector\",!0).attr({width:1,height:1,\"stroke-width\":\"0px\",fill:\"none\"}).node()}return t.prototype.getScale=function(){var t=this.scaleDetectorElement.getBoundingClientRect(),e=this.scaleDetectorElement.getBBox();return e.height>0&&e.width>0?{x:t.width/e.width,y:t.height/e.height}:{x:1,y:1}},t}();t.SVGScaleDetector=e}(e=t.svg||(t.svg={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.Entity=0]=\"Entity\",t[t.SubqueryRef=1]=\"SubqueryRef\",t[t.ColumnRef=2]=\"ColumnRef\",t[t.MeasureRef=3]=\"MeasureRef\",t[t.Aggregation=4]=\"Aggregation\",t[t.PropertyVariationSource=5]=\"PropertyVariationSource\",t[t.Hierarchy=6]=\"Hierarchy\",t[t.HierarchyLevel=7]=\"HierarchyLevel\",t[t.And=8]=\"And\",t[t.Between=9]=\"Between\",t[t.In=10]=\"In\",t[t.Or=11]=\"Or\",t[t.Contains=12]=\"Contains\",t[t.Compare=13]=\"Compare\",t[t.StartsWith=14]=\"StartsWith\",t[t.Exists=15]=\"Exists\",t[t.Not=16]=\"Not\",t[t.Constant=17]=\"Constant\",t[t.DateSpan=18]=\"DateSpan\",t[t.DateAdd=19]=\"DateAdd\",t[t.Now=20]=\"Now\",t[t.AnyValue=21]=\"AnyValue\",t[t.DefaultValue=22]=\"DefaultValue\",t[t.Arithmetic=23]=\"Arithmetic\",t[t.FillRule=24]=\"FillRule\",t[t.ResourcePackageItem=25]=\"ResourcePackageItem\",t[t.ScopedEval=26]=\"ScopedEval\",t[t.WithRef=27]=\"WithRef\",t[t.Percentile=28]=\"Percentile\",t[t.SelectRef=29]=\"SelectRef\",t[t.TransformTableRef=30]=\"TransformTableRef\",t[t.TransformOutputRoleRef=31]=\"TransformOutputRoleRef\",t[t.ThemeDataColor=32]=\"ThemeDataColor\",t[t.GroupRef=33]=\"GroupRef\",t[t.Floor=34]=\"Floor\",t[t.RoleRef=35]=\"RoleRef\",t[t.Discretize=36]=\"Discretize\",t[t.NamedQueryRef=37]=\"NamedQueryRef\",t[t.Member=38]=\"Member\",t[t.FilteredEval=39]=\"FilteredEval\",t[t.Conditional=40]=\"Conditional\"}(e=t.SQExprKind||(t.SQExprKind={}));var n;!function(t){t[t.Equal=0]=\"Equal\",t[t.GreaterThan=1]=\"GreaterThan\",t[t.GreaterThanOrEqual=2]=\"GreaterThanOrEqual\",t[t.LessThan=3]=\"LessThan\",t[t.LessThanOrEqual=4]=\"LessThanOrEqual\",t[t.Contains=12]=\"Contains\",t[t.Is=13]=\"Is\",t[t.StartsWith=14]=\"StartsWith\",t[t.DoesNotContain=16]=\"DoesNotContain\"}(n=t.QueryComparisonKind||(t.QueryComparisonKind={}))}(e=t.filter||(t.filter={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=function(){function n(){}return n.restoreSelectionIds=function(n){var i=[];try{n&&n.whereItems&&n.whereItems.length>0&&n.whereItems[0]&&n.whereItems[0].condition&&n.whereItems[0].condition.values&&n.whereItems.forEach(function(n){if(n.condition&&n.condition.values){var r=n.condition,a=r.values.map(function(n){var i=r.args.map(function(i,r){return new t.data.SQCompareExpr(e.QueryComparisonKind.Equal,i,n[r])}).reduce(function(e,n){return e?t.data.SQExprBuilder.and(e,n):n},void 0),a=t.data.createDataViewScopeIdentity(i);return t.visuals.SelectionId.createWithId(a)});i=i.concat(a)}})}catch(r){}return i},n.restoreFilter=function(t){if(t&&t.whereItems&&t.whereItems[0]&&t.whereItems[0].condition){var e=t.whereItems[0].condition,i=n.getBasicFilterOperator(e._kind);return!(e.values||e.arg&&e.arg.values)||\"In\"!==i&&\"All\"!==i&&\"NotIn\"!==i?n.restoreAdvancedFilter(e):n.restoreBasicFilter(e)}},n.restoreAdvancedFilter=function(t){var e,i=n.getLogicalOperatorNameByKind(t._kind);\"And\"===i||\"Or\"===i?e=n.getConditions([t.left,t.right]):(i=\"And\",e=n.getConditions([t]));var r=new window[\"powerbi-models\"].AdvancedFilter(null,i,e);return r.toJSON()},n.restoreBasicFilter=function(t){var e=n.getBasicFilterOperator(t._kind),i=new window[\"powerbi-models\"].BasicFilter(null,e,t.values||t.arg&&t.arg.values);return i.toJSON()},n.getConditions=function(t){var i=[];return t.forEach(function(t){if(t){if((t.left&&t.right||t.arg)&&\"undefined\"==typeof t.comparison&&(t._kind===e.QueryComparisonKind.Contains||t._kind===e.QueryComparisonKind.Is||t._kind===e.QueryComparisonKind.DoesNotContain||t._kind===e.QueryComparisonKind.StartsWith)){var r=n.getConditions([t.left,t.right,t.arg].filter(function(t){return t})).filter(function(t){return\"undefined\"!=typeof t.value});return r.forEach(function(e){\"None\"===e.operator&&(e.operator=n.getCondictionOperatorByComparison(t._kind)),null===e.value&&\"Is\"===e.operator&&(e.operator=\"IsBlank\"),null===e.value&&\"DoesNotContain\"===e.operator&&(e.operator=\"IsNotBlank\")}),r.every(function(t){return\"StartsWith\"===t.operator})&&t._kind===e.QueryComparisonKind.DoesNotContain&&r.forEach(function(t){t.operator=\"DoesNotStartWith\"}),r.every(function(t){return\"Contains\"===t.operator})&&t._kind===e.QueryComparisonKind.DoesNotContain&&r.forEach(function(t){t.operator=\"DoesNotContain\"}),r.every(function(t){return\"Is\"===t.operator})&&t._kind===e.QueryComparisonKind.DoesNotContain&&r.forEach(function(t){t.operator=\"IsNot\"}),r.every(function(t){return\"IsBlank\"===t.operator})&&t._kind===e.QueryComparisonKind.DoesNotContain&&r.forEach(function(t){t.operator=\"IsNotBlank\"}),void(i=i.concat(r))}i.push(n.getCondition(t))}}),i},n.getValue=function(t){if(t){if(t._kind===e.SQExprKind.Constant)return t.value;if(t._kind===e.SQExprKind.Contains)return t.value;for(var i=[t.left,t.right,t.arg],r=0,a=i;r<a.length;r++){var o=a[r],l=n.getValue(o);if(void 0!==l)return l}}},n.getCondition=function(t){return{value:n.getValue(t),operator:n.getCondictionOperatorByComparison(t.comparison)}},n.getBasicFilterOperator=function(t){switch(t){case e.SQExprKind.In:return\"In\";case e.SQExprKind.And:return\"All\";case e.SQExprKind.Not:return\"NotIn\";default:return null}},n.getLogicalOperatorNameByKind=function(t){switch(t){case e.SQExprKind.And:return\"And\";case e.SQExprKind.Or:return\"Or\";default:return null}},n.getCondictionOperatorByComparison=function(t){switch(t){case e.QueryComparisonKind.Equal:return\"Is\";case e.QueryComparisonKind.Is:return\"Is\";case e.QueryComparisonKind.GreaterThan:return\"GreaterThan\";case e.QueryComparisonKind.GreaterThanOrEqual:return\"GreaterThanOrEqual\";case e.QueryComparisonKind.LessThan:return\"LessThan\";case e.QueryComparisonKind.LessThanOrEqual:return\"LessThanOrEqual\";case e.QueryComparisonKind.Contains:return\"Contains\";case e.QueryComparisonKind.DoesNotContain:return\"DoesNotContain\";case e.QueryComparisonKind.StartsWith:return\"StartsWith\"}return\"None\"},n}();e.FilterManager=n}(n=e.filter||(e.filter={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(n){function i(t){return new l(t)}function r(t){return t.append(\"rect\").classed(\"clearCatcher\",!0).attr({width:\"100%\",height:\"100%\"})}function a(t){for(var e=0,n=t.length;n>e;e++)if(t[e].selected)return!0;return!1}var o=t.extensibility.utils.type.ArrayExtensions;n.createInteractivityService=i,n.appendClearCatcher=r,n.dataHasSelection=a;var l=function(){function t(t){var e=this;this.renderSelectionInVisual=function(){},this.renderSelectionInLegend=function(){},this.renderSelectionInLabels=function(){},this.selectedIds=[],this.isInvertedSelectionMode=!1,this.selectionManager=t.createSelectionManager(),this.selectionManager.registerOnSelectCallback&&this.selectionManager.registerOnSelectCallback(function(){e.restoreSelection(e.selectionManager.getSelectionIds().slice())})}return t.prototype.bind=function(t,e,n,i){var r=this;i&&i.overrideSelectionFromData&&this.takeSelectionStateFromDataPoints(t),i?(i.isLegend?(this.selectableLegendDataPoints=t,this.renderSelectionInLegend=function(){return e.renderSelection(r.legendHasSelection())}):i.isLabels?(this.selectableLabelsDataPoints=t,this.renderSelectionInLabels=function(){return e.renderSelection(r.labelsHasSelection())}):(this.selectableDataPoints=t,this.renderSelectionInVisual=function(){return e.renderSelection(r.hasSelection())}),null!=i.hasSelectionOverride&&(this.hasSelectionOverride=i.hasSelectionOverride)):(this.selectableDataPoints=t,this.renderSelectionInVisual=function(){return e.renderSelection(r.hasSelection())}),this.behavior=e,e.bindEvents(n,this),this.syncSelectionState()},t.prototype.clearSelectedIds=function(){this.hasSelectionOverride=void 0,o.clear(this.selectedIds)},t.prototype.clearSelection=function(){this.clearSelectedIds(),this.applyToAllSelectableDataPoints(function(t){return t.selected=!1}),this.renderAll()},t.prototype.applySelectionStateToData=function(e,n){if(n&&this.hasSelection()){var i=this.selectionManager.getSelectionIds()||[];o.clear(this.selectedIds),\no.clear(i)}for(var r=0,a=e;r<a.length;r++){var l=a[r];l.selected=t.isDataPointSelected(l,this.selectedIds)}return this.hasSelection()},t.prototype.applySelectionFromFilter=function(t){this.restoreSelection(e.filter.FilterManager.restoreSelectionIds(t))},t.prototype.restoreSelection=function(t){this.clearSelection(),this.selectedIds=t,this.syncSelectionState(),this.renderAll()},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.legendHasSelection=function(){return this.selectableLegendDataPoints?a(this.selectableLegendDataPoints):!1},t.prototype.labelsHasSelection=function(){return this.selectableLabelsDataPoints?a(this.selectableLabelsDataPoints):!1},t.prototype.isSelectionModeInverted=function(){return this.isInvertedSelectionMode},t.prototype.applySelectionFilter=function(){this.selectionManager&&this.selectionManager.applySelectionFilter()},t.prototype.handleSelection=function(t,e){t&&(this.select(t,e),this.sendSelectionToHost(),this.renderAll())},t.prototype.handleClearSelection=function(){this.clearSelection(),this.sendSelectionToHost()},t.prototype.syncSelectionState=function(){if(this.isInvertedSelectionMode)return this.syncSelectionStateInverted();if((this.selectableDataPoints||this.selectableLegendDataPoints)&&(this.selectableDataPoints&&t.updateSelectableDataPointsBySelectedIds(this.selectableDataPoints,this.selectedIds),this.selectableLegendDataPoints&&t.updateSelectableDataPointsBySelectedIds(this.selectableLegendDataPoints,this.selectedIds),this.selectableLabelsDataPoints))for(var e=function(t){t.selected=n.selectedIds.some(function(e){return e.includes(t.identity)})},n=this,i=0,r=this.selectableLabelsDataPoints;i<r.length;i++){var a=r[i];e(a)}},t.prototype.syncSelectionStateInverted=function(){var t=this.selectedIds,e=this.selectableDataPoints;if(e)if(0===t.length)for(var n=0,i=e;n<i.length;n++){var r=i[n];r.selected=!1}else for(var a=function(e){t.some(function(t){return t.includes(e.identity)})?e.selected=!0:e.selected&&(e.selected=!1)},o=0,l=e;o<l.length;o++){var r=l[o];a(r)}},t.prototype.renderAll=function(){this.renderSelectionInVisual(),this.renderSelectionInLegend(),this.renderSelectionInLabels()},t.prototype.select=function(e,n){var i=this,r=[].concat(e),a=this.selectedIds.slice();n&&r.length||this.clearSelectedIds(),r.forEach(function(e){var n=!t.isDataPointSelected(e,a);i.selectSingleDataPoint(e,n)}),this.syncSelectionState()},t.prototype.selectSingleDataPoint=function(t,e){if(t&&t.identity){var n=t.identity;e?(t.selected=!0,this.selectedIds.push(n),n.hasIdentity()?this.removeSelectionIdsWithOnlyMeasures():this.removeSelectionIdsExceptOnlyMeasures()):(t.selected=!1,this.removeId(n))}},t.prototype.removeId=function(t){for(var e=this.selectedIds,n=e.length-1;n>-1;n--){var i=e[n];t.includes(i)&&e.splice(n,1)}},t.prototype.sendSelectionToHost=function(){this.selectionManager&&(this.selectedIds&&this.selectedIds.length?this.selectionManager.select(this.selectedIds.slice()):this.selectionManager.clear())},t.prototype.takeSelectionStateFromDataPoints=function(t){var e=this.selectedIds;o.clear(e);for(var n=0,i=t;n<i.length;n++){var r=i[n];r.selected&&e.push(r.identity)}},t.prototype.applyToAllSelectableDataPoints=function(t){var e=this.selectableDataPoints,n=this.selectableLegendDataPoints,i=this.selectableLabelsDataPoints;if(e)for(var r=0,a=e;r<a.length;r++){var o=a[r];t(o)}if(n)for(var l=0,s=n;l<s.length;l++){var o=s[l];t(o)}if(i)for(var u=0,c=i;u<c.length;u++){var o=c[u];t(o)}},t.updateSelectableDataPointsBySelectedIds=function(e,n){for(var i=!1,r=0,a=e;r<a.length;r++){var o=a[r];o.selected=t.isDataPointSelected(o,n),o.selected&&(i=!0)}return i},t.isDataPointSelected=function(t,e){return e.some(function(e){return e.includes(t.identity)})},t.prototype.removeSelectionIdsWithOnlyMeasures=function(){this.selectedIds=this.selectedIds.filter(function(t){return t.hasIdentity()})},t.prototype.removeSelectionIdsExceptOnlyMeasures=function(){this.selectedIds=this.selectedIds.filter(function(t){return!t.hasIdentity()})},t}();n.InteractivityService=l}(n=e.interactivity||(e.interactivity={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(){return{x:d3.event.clientX,y:d3.event.clientY}}function n(t,e){t.on(\"click\",function(t){return r(t,e)})}function i(t,e){t.on(\"click\",function(){var t=d3.event.target,n=d3.select(t).datum();r(n,e)})}function r(t,e){e.handleSelection(t,d3.event.ctrlKey)}t.getPositionOfLastInputEvent=e,t.registerStandardSelectionHandler=n,t.registerGroupSelectionHandler=i}(e=t.interactivityUtils||(t.interactivityUtils={}))}(e=t.interactivity||(t.interactivity={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(){var t=\"touchstart\";return window.PointerEvent&&(t=\"pointerdown\"),t}function n(){var t=\"touchend\";return window.PointerEvent&&(t=\"pointerup\"),t}function i(){var t=e();return\"pointerdown\"===t||\"MSPointerDown\"===t}t.touchStartEventName=e,t.touchEndEventName=n,t.usePointerEvents=i}(e=t.touch||(t.touch={}))}(e=t.tooltip||(t.tooltip={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,r){return void 0===r&&(r=n),new i(t,e,r)}var n=1e3;t.createTooltipServiceWrapper=e;var i=function(){function e(t,e,i){void 0===i&&(i=n),this.visualHostTooltipService=t,this.rootElement=e,this.handleTouchDelay=i}return e.prototype.convertValuesToString=function(t){return t.map(function(t){return t.value=\"\"+t.value,t.displayName=\"\"+t.displayName,t.color&&(t.color=\"\"+t.color),t.opacity&&(t.opacity=\"\"+t.opacity),t.header&&(t.header=\"\"+t.header),t})},e.prototype.addTooltip=function(e,n,i,r){var a=this;if(e&&this.visualHostTooltipService.enabled()){var o=this.rootElement;e.on(\"mouseover.tooltip\",function(){if(a.canDisplayTooltip(d3.event)){var t=a.makeTooltipEventArgs(o,!0,!1);if(t){var e=n(t);if(null!=e){e=a.convertValuesToString(e);var r=a.getSelectionIds(t,i);a.visualHostTooltipService.show({coordinates:t.coordinates,isTouchEvent:!1,dataItems:e,identities:r})}}}}),e.on(\"mouseout.tooltip\",function(){a.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1})}),e.on(\"mousemove.tooltip\",function(){if(a.canDisplayTooltip(d3.event)){var t=a.makeTooltipEventArgs(o,!0,!1);if(t){var e;if(!r||(e=n(t),null!=e)){var l=a.getSelectionIds(t,i);a.visualHostTooltipService.move({coordinates:t.coordinates,isTouchEvent:!1,dataItems:e,identities:l})}}}});var l=t.touch.touchStartEventName(),s=t.touch.touchEndEventName(),u=t.touch.usePointerEvents();e.on(l+\".tooltip\",function(){a.visualHostTooltipService.hide({isTouchEvent:!0,immediately:!0});var t=a.makeTooltipEventArgs(o,u,!0);if(t){var e=n(t),r=a.getSelectionIds(t,i);a.visualHostTooltipService.show({coordinates:t.coordinates,isTouchEvent:!0,dataItems:e,identities:r})}}),e.on(s+\".tooltip\",function(){a.visualHostTooltipService.hide({isTouchEvent:!0,immediately:!1}),a.handleTouchTimeoutId&&clearTimeout(a.handleTouchTimeoutId),a.handleTouchTimeoutId=setTimeout(function(){a.handleTouchTimeoutId=void 0},a.handleTouchDelay)})}},e.prototype.getSelectionIds=function(t,e){var n=e?e(t):null;return n?[n]:[]},e.prototype.hide=function(){this.visualHostTooltipService.hide({immediately:!0,isTouchEvent:!1})},e.prototype.makeTooltipEventArgs=function(t,e,n){var i=d3.event.target,r=d3.select(i).datum(),a=this.getCoordinates(t,e),o=this.getCoordinates(i,e),l={data:r,coordinates:a,elementCoordinates:o,context:i,isTouchEvent:n};return l},e.prototype.canDisplayTooltip=function(t){var e=!0,n=t;if(void 0!==n.buttons){var i=0!==n.buttons;e=!i}return e=e&&null==this.handleTouchTimeoutId},e.prototype.getCoordinates=function(t,e){var n;if(e){for(var i=d3.event,r=void 0;r=i.sourceEvent;)i=r;var a=t.getBoundingClientRect();n=[i.clientX-a.left-t.clientLeft,i.clientY-a.top-t.clientTop]}else{var o=d3.touches(t);o&&o.length>0&&(n=o[0])}return n},e}();t.TooltipServiceWrapper=i}(e=t.tooltip||(t.tooltip={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Globalize=Globalize||window.Globalize,powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){}return t.prototype.getData=function(t){try{if(localStorage){var e=localStorage[t];if(e)return JSON.parse(e)}}catch(n){}return null},t.prototype.setData=function(t,e){try{localStorage&&(localStorage[t]=JSON.stringify(e))}catch(n){}},t}();t.LocalStorageService=e}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(e){this.cache={},this.clearCacheInterval=null!=e?e:t.defaultClearCacheInterval,this.clearCache()}return t.prototype.getData=function(t){return this.cache[t]},t.prototype.setData=function(t,e){var n=this;this.cache[t]=e,null==this.clearCacheTimerId&&(this.clearCacheTimerId=setTimeout(function(){return n.clearCache()},this.clearCacheInterval))},t.prototype.clearCache=function(){this.cache={},this.clearCacheTimerId=void 0},t}();e.defaultClearCacheInterval=864e5,t.EphemeralStorageService=e,t.ephemeralStorageService=new e}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){return-1!==t.indexOf(e,t.length-e.length)}function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0];if(h(n))return n;for(var i=0;i<t.length-1;i++){var r=new RegExp(\"\\\\{\"+i+\"\\\\}\",\"gm\");n=n.replace(r,t[i+1])}return n}function i(e,n){return t.normalizeCase(e)===t.normalizeCase(n)}function r(e,n){var i=t.normalizeCase(n);return 0===t.normalizeCase(e).indexOf(i)}function a(t,e){return 0===t.indexOf(e)}function o(t,e){return null==t?!1:-1!==t.indexOf(e)}function l(t,e){return null==t?!1:o(s(t),s(e))}function s(t){return t.toUpperCase()}function u(t){if(c(t))return null;for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0,r=t.length;r>i;i++)n[i]=t.charCodeAt(i);return n}function c(t){return null==t||0===t.length}function h(e){return t.isNullOrEmpty(e)||t.isNullOrEmpty(e.trim())}function f(t){var e=/\\s/;return e.test(t)}function d(t){return\"\"===t.trim()}function g(t){return t.replace(/\\s+$/,\"\")}function p(t){return t.replace(/^\\s+/,\"\").replace(/\\s+$/,\"\")}function v(t,e){return Math.abs(t.length-e.length)}function m(t,e){for(var n=\"\",i=0;e>i;i++)n+=t;return n}function y(t,e,n){if(!e)return t;var i=w(e);return t.replace(new RegExp(i,\"gi\"),n)}function x(t){for(var e={},n=0,i=t;n<i.length;n++){var r=i[n];e[r]=!1}for(var a=[],o=0,l=t;o<l.length;o++){var s=l[o],u=s;if(e[u])for(var c=0;void 0!==e[u];)u=s+\".\"+ ++c;a.push(u),e[u]=!0}return a}function b(t,e){for(var n=0,i=e;t[i];)i=e+ ++n;return i}function S(t,e,n){for(var i,r=[],a=0,o=0,l=t;o<l.length;o++){var s=l[o];if(a+s.length>n&&r.length>0){i=!0;break}r.push(s),a+=s.length}var u=\" \"+e+\" \",c=r.join(u);return i&&(c+=u+\"...\"),c}function w(t){return t.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,\"\\\\$1\")}function M(t){return t.replace(/[\\<\\>\\:\"\\/\\\\\\|\\?*]/g,\"\")}function C(t){return JSON.stringify(t)}function T(t,e){var n=t.replace(/^[^A-Za-z]*/g,\"\").replace(/[ :\\.\\/\\\\\\-\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]/g,\"_\").replace(/[\\W]/g,\"\");return n.length>0?n:e}function P(t){return t.replace(D,\"\")}var D=new RegExp(\"[<>]\",\"g\");t.endsWith=e,t.format=n,t.equalIgnoreCase=i,t.startsWithIgnoreCase=r,t.startsWith=a,t.contains=o,t.containsIgnoreCase=l,t.normalizeCase=s,t.stringToArrayBuffer=u,t.isNullOrEmpty=c,t.isNullOrUndefinedOrWhiteSpaceString=h,t.containsWhitespace=f,t.isWhitespace=d,t.trimTrailingWhitespace=g,t.trimWhitespace=p,t.getLengthDifference=v,t.repeat=m,t.replaceAll=y,t.ensureUniqueNames=x,t.findUniqueName=b,t.constructNameFromList=S,t.escapeStringForRegex=w,t.normalizeFileName=M,t.stringifyAsPrettyJSON=C,t.deriveClsCompliantName=T,t.stripTagDelimiters=P}(e=t.stringExtensions||(t.stringExtensions={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){if(n){for(var r=t-1;r>-1;r--)if(i(e[r]))return r+1}else for(var r=t,a=e.length;a>r;r++)if(i(e[r]))return r;return n?0:e.length}function n(t,n){var i={start:0,end:0};return 0===n.length?i:(i.start=e(t,n,!0),i.end=e(t,n,!1),i)}function i(t){return h.lastIndex=0,h.test(t)}function r(t){var e=1;for(h.lastIndex=0,h.exec(t);0!==h.lastIndex;)e++,h.exec(t);return e}function a(t,e,n){for(var i=o(t),r=0,a=0,l=i;a<l.length;a++){var s=l[a];n.text=s,r=Math.max(r,e(n))}return r}function o(t){return t.split(h)}function l(t,e,n){return e.text=t,n(e)}function s(t,e,n,i){return e.text=t,n(e,i)}function u(t,e,n,i,r,a){a=a?a:function(t,e){return t.text};for(var u=[],h=o(t),f=0,d=[],g=0,p=h;g<p.length;g++){var v=p[g];if(r>0&&u.length>=r-1)d.push(v);else{var m=0===d.length?l(v,e,n):l(c+v,e,n);if(f+m>i){if(0===d.length){u.push(s(v,e,a,i)),f=0,d=[];continue}u.push(s(d.join(c),e,a,i)),f=0,d=[]}d.push(v),f+=m}}return d&&d.length&&u.push(s(d.join(c),e,a,i)),u}var c=\" \",h=/[\\s\\n]+/g;t.find=n,t.hasBreakers=i,t.wordCount=r,t.getMaxWordWidth=a,t.splitByWidth=u}(e=t.wordBreaker||(t.wordBreaker={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.Year=0]=\"Year\",t[t.Month=1]=\"Month\",t[t.Week=2]=\"Week\",t[t.Day=3]=\"Day\",t[t.Hour=4]=\"Hour\",t[t.Minute=5]=\"Minute\",t[t.Second=6]=\"Second\",t[t.Millisecond=7]=\"Millisecond\"}(e=t.DateTimeUnit||(t.DateTimeUnit={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.type.PixelConverter,r=t.extensibility.utils.type.Prototype,a=t.extensibility.utils.formatting.wordBreaker;!function(t){function n(){if(!S){S=document.createElement(\"span\"),document.body.appendChild(S);var t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");t.setAttribute(\"height\",\"0\"),t.setAttribute(\"width\",\"0\"),t.setAttribute(\"position\",\"absolute\"),w=document.createElementNS(\"http://www.w3.org/2000/svg\",\"text\"),t.appendChild(w),document.body.appendChild(t);var e=document.createElement(\"canvas\");M=e.getContext(\"2d\");var n=window.getComputedStyle(w);C=n?n.fontFamily:\"\"}}function o(){S&&S.remove&&S.remove(),S=null}function l(t,e){return n(),M.font=(t.fontStyle||\"\")+\" \"+(t.fontVariant||\"\")+\" \"+(t.fontWeight||\"\")+\" \"+t.fontSize+\" \"+(t.fontFamily||C),M.measureText(e||t.text).width}function s(t,e){for(n();w.firstChild;)w.removeChild(w.firstChild);return w.setAttribute(\"style\",null),w.style.visibility=\"hidden\",w.style.fontFamily=t.fontFamily||C,w.style.fontVariant=t.fontVariant,w.style.fontSize=t.fontSize,w.style.fontWeight=t.fontWeight,w.style.fontStyle=t.fontStyle,w.style.whiteSpace=t.whiteSpace||\"nowrap\",w.appendChild(document.createTextNode(e||t.text)),w.getBBox()}function u(t,e){return s(t,e).height}function c(n){var i=n.fontFamily+n.fontSize,r=e.ephemeralStorageService.getData(i);if(null==r){var a={fontFamily:n.fontFamily,fontSize:n.fontSize,text:\"M\"};r=t.measureSvgTextRect(a),r.height>0&&e.ephemeralStorageService.setData(i,r)}return r}function h(t){var e=c(t);return e.y+e.height}function f(t,e){void 0===e&&(e=!1);var n=c(t).height;return e&&(n*=.7),n}function d(t){return l(p(t))}function g(t){var e=window.getComputedStyle(t);return{text:t.value||t.textContent,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,whiteSpace:e.whiteSpace}}function p(t){var e=window.getComputedStyle(t);return e?{text:t.textContent,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontVariant:e.fontVariant,whiteSpace:e.whiteSpace}:{text:t.textContent,fontFamily:\"\",fontSize:\"0\"}}function v(t){var e=window.getComputedStyle(t);return e?e.width:\"0\"}function m(t,e){n();var i=t.text.length;if(0===i)return t.text;var a=l(t);if(e>a)return t.text;for(var o=r.inherit(t),s=o.text=T+o.text,u=1,c=s.length,h=T.length;c>=u;)if(h=(u+c)/2|0,o.text=s.substr(0,h),a=l(o),e>a)u=h+1;else{if(!(a>e))break;c=h-1}return o.text=s.substr(0,h),a=l(o),a>e&&h--,s.substr(T.length,h-T.length)+T}function y(t,e){var n=p(t),i=n.text,r=m(n,e);i!==r&&(t.textContent=r)}function x(t,e,n,i){void 0===i&&(i=0);var r=p(t),o=f(r)+i,s=Math.max(1,Math.floor(n/o)),u=t?t.getAttribute(\"y\"):null,c=t?t.textContent:null;t.textContent=null;for(var h=a.splitByWidth(c,r,l,e,s),d=document.createDocumentFragment(),g=0,v=h.length;v>g;g++){var y=0===g?u:o;r.text=h[g];var x=document.createElementNS(\"http://www.w3.org/2000/svg\",\"tspan\");x.setAttribute(\"x\",\"0\"),x.setAttribute(\"dy\",y?y.toString():null),x.appendChild(document.createTextNode(m(r,e))),d.appendChild(x)}t.appendChild(d)}function b(t,e,n,r){void 0===r&&(r=0);var o=p(t),s=f(o)+r,u=Math.max(1,Math.floor(n/s)),c=t.textContent;t.textContent=null;for(var h=a.splitByWidth(c,o,l,e,u),d=document.createDocumentFragment(),g=0;g<h.length;g++){var v=document.createElement(\"span\");v.classList.add(\"overflowingText\"),v.style.width=i.toString(e),v.appendChild(document.createTextNode(h[g])),v.appendChild(document.createTextNode(m(o,e))),d.appendChild(v)}t.appendChild(d)}var S,w,M,C,T=\"...\";t.removeSpanElement=o,t.measureSvgTextWidth=l,t.measureSvgTextRect=s,t.measureSvgTextHeight=u,t.estimateSvgTextBaselineDelta=h,t.estimateSvgTextHeight=f,t.measureSvgTextElementWidth=d,t.getMeasurementProperties=g,t.getSvgMeasurementProperties=p,t.getDivElementWidth=v,t.getTailoredTextOrDefault=m,t.svgEllipsis=y,t.wordBreak=x,t.wordBreakOverflowingText=b}(n=e.textMeasurementService||(e.textMeasurementService={}))}(n=e.formatting||(e.formatting={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){return t%4===0&&t%100!==0||t%400===0}function n(t,n){return e(t)?f[n]:h[n]}function i(t,n){var i=t.getFullYear(),r=t.getMonth(),a=t.getDate(),o=2===r&&29===a,l=new Date(t.getTime());return i+=n,o&&!e(i)&&(a=28),l.setFullYear(i,r,a),l}function r(t,e){var i=t.getFullYear(),r=t.getMonth(),a=t.getDate(),o=new Date(t.getTime());return i+=(e-e%12)/12,r+=e%12,r>11&&(r%=12,i++),a=Math.min(a,n(i,r)),o.setFullYear(i,r,a),o}function a(t,e){return o(t,7*e)}function o(t,e){var n=t.getFullYear(),i=t.getMonth(),r=t.getDate(),a=new Date(t.getTime());return a.setFullYear(n,i,r+e),a}function l(t,e){return new Date(t.getTime()+36e5*e)}function s(t,e){return new Date(t.getTime()+6e4*e)}function u(t,e){return new Date(t.getTime()+1e3*e)}function c(t,e){return new Date(t.getTime()+e)}var h=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];t.addYears=i,t.addMonths=r,t.addWeeks=a,t.addDays=o,t.addHours=l,t.addMinutes=s,t.addSeconds=u,t.addMilliseconds=c}(e=t.dateUtils||(t.dateUtils={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.type.NumericSequenceRange,i=t.extensibility.utils.type.NumericSequence,r=t.extensibility.utils.type.Double,a=t.extensibility.utils.formatting.DateTimeUnit,o=function(){function t(t){this.unit=t,this.sequence=[],this.min=new Date(\"9999-12-31T23:59:59.999\"),this.max=new Date(\"0001-01-01T00:00:00.000\")}return t.prototype.add=function(t){t<this.min&&(this.min=t),t>this.max&&(this.max=t),this.sequence.push(t)},t.prototype.extendToCover=function(e,n){for(var i=this.min;i>e;)i=t.addInterval(i,-this.interval,this.unit),this.sequence.splice(0,0,i);for(this.min=i,i=this.max;n>i;)i=t.addInterval(i,this.interval,this.unit),this.sequence.push(i);this.max=i},t.prototype.moveToCover=function(e,n){var i=t.getDelta(e,n,this.unit),r=Math.floor(i/this.interval);for(this.min=t.addInterval(this.min,r*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<n;)this.max=t.addInterval(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.calculate=function(e,n,i,r){switch(r||(r=t.getIntervalUnit(e,n,i)),r){case a.Year:return t.calculateYears(e,n,i);case a.Month:return t.calculateMonths(e,n,i);case a.Week:return t.calculateWeeks(e,n,i);case a.Day:return t.calculateDays(e,n,i);case a.Hour:return t.calculateHours(e,n,i);case a.Minute:return t.calculateMinutes(e,n,i);case a.Second:return t.calculateSeconds(e,n,i);case a.Millisecond:return t.calculateMilliseconds(e,n,i)}},t.calculateYears=function(e,r,o){var l=n.calculateDataRange(e.getFullYear(),r.getFullYear(),!1),s=i.calculate(n.calculate(0,l.max-l.min),o,0,null,null,[1,2,5]),u=Math.floor(l.min/s.interval)*s.interval,c=new Date(u,0,1),h=t.fromNumericSequence(c,s,a.Year);return h},t.calculateMonths=function(e,n,r){var o=e.getFullYear(),l=n.getFullYear(),s=e.getMonth(),u=12*(l-o)+n.getMonth(),c=new Date(o,0,1),h=i.calculateUnits(s,u,r,[1,2,3,6,12]),f=t.fromNumericSequence(c,h,a.Month);return f},t.calculateWeeks=function(e,n,o){var l=0,s=e.getDay(),u=(s-l+7)%7,c=e.getDate()-u,h=new Date(e.getFullYear(),e.getMonth(),c),f=0,d=r.ceilWithPrecision(t.getDelta(h,n,a.Week)),g=i.calculateUnits(f,d,o,[1,2,4,8]),p=t.fromNumericSequence(h,g,a.Week);return p},t.calculateDays=function(e,n,o){var l=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=0,u=r.ceilWithPrecision(t.getDelta(e,n,a.Day)),c=i.calculateUnits(s,u,o,[1,2,7,14]),h=t.fromNumericSequence(l,c,a.Day);return h},t.calculateHours=function(e,n,o){var l=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=r.floorWithPrecision(t.getDelta(l,e,a.Hour)),u=r.ceilWithPrecision(t.getDelta(l,n,a.Hour)),c=i.calculateUnits(s,u,o,[1,2,3,6,12,24]),h=t.fromNumericSequence(l,c,a.Hour);return h},t.calculateMinutes=function(e,n,o){var l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),s=r.floorWithPrecision(t.getDelta(l,e,a.Minute)),u=r.ceilWithPrecision(t.getDelta(l,n,a.Minute)),c=i.calculateUnits(s,u,o,[1,2,5,10,15,30,60,120,180,360,720,1440]),h=t.fromNumericSequence(l,c,a.Minute);return h},t.calculateSeconds=function(e,n,o){var l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()),s=r.floorWithPrecision(t.getDelta(l,e,a.Second)),u=r.ceilWithPrecision(t.getDelta(l,n,a.Second)),c=i.calculateUnits(s,u,o,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]),h=t.fromNumericSequence(l,c,a.Second);return h},t.calculateMilliseconds=function(e,r,o){var l=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),s=t.getDelta(l,e,a.Millisecond),u=t.getDelta(l,r,a.Millisecond),c=i.calculate(n.calculate(s,u),o,0),h=t.fromNumericSequence(l,c,a.Millisecond);return h},t.addInterval=function(t,n,i){switch(n=Math.round(n),i){case a.Year:return e.dateUtils.addYears(t,n);case a.Month:return e.dateUtils.addMonths(t,n);case a.Week:return e.dateUtils.addWeeks(t,n);case a.Day:return e.dateUtils.addDays(t,n);case a.Hour:return e.dateUtils.addHours(t,n);case a.Minute:return e.dateUtils.addMinutes(t,n);case a.Second:return e.dateUtils.addSeconds(t,n);case a.Millisecond:return e.dateUtils.addMilliseconds(t,n)}},t.fromNumericSequence=function(e,n,i){for(var r=new t(i),a=0;a<n.sequence.length;a++){var o=n.sequence[a],l=t.addInterval(e,o,i);r.add(l)}return r.interval=n.interval,r.intervalOffset=n.intervalOffset,r},t.getDelta=function(t,e,n){var i=0;switch(n){case a.Year:i=e.getFullYear()-t.getFullYear();break;case a.Month:i=12*(e.getFullYear()-t.getFullYear())+e.getMonth()-t.getMonth();break;case a.Week:i=(e.getTime()-t.getTime())/6048e5;break;case a.Day:i=(e.getTime()-t.getTime())/864e5;break;case a.Hour:i=(e.getTime()-t.getTime())/36e5;break;case a.Minute:i=(e.getTime()-t.getTime())/6e4;break;case a.Second:i=(e.getTime()-t.getTime())/1e3;break;case a.Millisecond:i=e.getTime()-t.getTime()}return i},t.getIntervalUnit=function(e,n,i){i=Math.max(i,2);var r=t.getDelta(e,n,a.Day);if(r>356&&r>=180*i)return a.Year;if(r>60&&r>7*i)return a.Month;if(r>14&&r>2*i)return a.Week;var o=t.getDelta(e,n,a.Hour);if(r>2&&o>12*i)return a.Day;if(o>=24&&o>=i)return a.Hour;var l=t.getDelta(e,n,a.Minute);if(l>2&&l>=i)return a.Minute;var s=t.getDelta(e,n,a.Second);if(s>2&&s>=.8*i)return a.Second;var u=t.getDelta(e,n,a.Millisecond);if(u>0)return a.Millisecond;var c=e;return 0!==c.getMilliseconds()?a.Millisecond:0!==c.getSeconds()?a.Second:0!==c.getMinutes()?a.Minute:0!==c.getHours()?a.Hour:1!==c.getDate()?a.Day:0!==c.getMonth()?a.Month:a.Year},t}();o.MIN_COUNT=1,o.MAX_COUNT=1e3,e.DateTimeSequence=o}(n=e.formatting||(e.formatting={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){switch(e){case\"m\":e=\"M\";break;case\"O\":case\"o\":e=\"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'0000'\";break;case\"R\":case\"r\":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e=\"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'\";break;case\"s\":e=\"S\";break;case\"u\":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e=\"yyyy'-'MM'-'dd HH':'mm':'ss'Z'\";break;case\"U\":t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),e=\"F\";break;case\"y\":case\"Y\":switch(n){case\"default\":case\"en\":case\"en-US\":e=\"MMMM, yyyy\";break;default:e=\"Y\"}}return{value:t,format:e}}function n(t){if(t=t.replace(/%K/g,\"zzz\"),t=t.replace(/K/g,\"zzz\"),t=t.replace(/fffffff/g,\"fff0000\"),t=t.replace(/ffffff/g,\"fff000\"),t=t.replace(/fffff/g,\"fff00\"),t=t.replace(/ffff/g,\"fff0\"),t=t.replace(/yyyyy/g,\"0yyyy\"),t=t.replace(/(^y|^)yyy(^y|$)/g,\"yyyy\"),i||(i=[\"d\",\"f\",\"F\",\"g\",\"h\",\"H\",\"K\",\"m\",\"M\",\"s\",\"t\",\"y\",\"z\",\":\",\"/\"].map(function(t){return{r:new RegExp(\"%\"+t+\"(?!\"+t+\")\",\"g\"),s:t}})),-1!==t.indexOf(\"%\")&&t.length>2)for(var e=0;e<i.length;e++)t=t.replace(i[e].r,i[e].s);return t}var i;t.findDateFormat=e,t.fixDateTimeFormat=n}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){this.families=t}return Object.defineProperty(t.prototype,\"family\",{get:function(){return this.getFamily()},enumerable:!0,configurable:!0}),t.prototype.getFamily=function(t){if(void 0===t&&(t=/^wf_/),!this.families)return null;if(t)for(var e=0,n=this.families;e<n.length;e++){var i=n[e];if(t.test(i))return i}return this.families[0]},Object.defineProperty(t.prototype,\"css\",{get:function(){return this.getCSS()},enumerable:!0,configurable:!0}),t.prototype.getCSS=function(){return this.families?this.families.map(function(t){return t.indexOf(\" \")>0?\"'\"+t+\"'\":t}).join(\", \"):null},t}();t.FamilyInfo=e}(e=t.font||(t.font={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.fallbackFonts=[\"helvetica\",\"arial\",\"sans-serif\"],t.Family={light:new t.FamilyInfo(t.fallbackFonts),semilight:new t.FamilyInfo(t.fallbackFonts),regular:new t.FamilyInfo(t.fallbackFonts),semibold:new t.FamilyInfo(t.fallbackFonts),bold:new t.FamilyInfo(t.fallbackFonts),lightSecondary:new t.FamilyInfo(t.fallbackFonts),regularSecondary:new t.FamilyInfo(t.fallbackFonts),boldSecondary:new t.FamilyInfo(t.fallbackFonts)}}(e=t.font||(t.font={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.type.Double,r=t.extensibility.utils.type.RegExpExtensions,a=t.extensibility.utils.formatting.stringExtensions,o=t.extensibility.utils.formatting.findDateFormat,l=t.extensibility.utils.formatting.fixDateTimeFormat,s=t.extensibility.utils.formatting.DateTimeUnit;!function(t){function e(t){return a.lastIndex=0,t.replace(a,\"\")}function n(t,e){for(a.lastIndex=0;;){var n=a.exec(t);if(!n)break;var i=n[0],r=a.lastIndex-i.length,o=String.fromCharCode(57600+e.length);e.push(i),t=t.substr(0,r)+o+t.substr(a.lastIndex),a.lastIndex=r+1}return t}function i(t,e,n){void 0===n&&(n=!0);for(var i=e.length,r=0;i>r;r++){var a=String.fromCharCode(57600+r),o=e[r];if(!n){var l=o[0];o=\"\\\\\"===l||1===o.length||o[o.length-1]!==l?o.substring(1):o.substring(1,o.length-1)}t=t.replace(a,o)}return t}var r=[\"'[^']*'\",'\"[^\"]*\"',\"\\\\\\\\.\",\"'[^']*$\",'\"[^\"]*$',\"\\\\\\\\$\"],a=new RegExp(r.join(\"|\"),\"g\");t.removeLiterals=e,t.preserveLiterals=n,t.restoreLiterals=i}(n||(n={}));var u=/({{)|(}})|{(\\d+[^}]*)}/g,c=\"0\",h=\"#\",f=\"E\",d=[c,h],g=new RegExp(d.join(\"|\"),\"g\"),p=function(){function e(){}return e.prototype.formatValue=function(t,e,n){if(void 0===t||null===t)return\"\";var i=this.getCulture(n);return v.canFormat(t)?v.format(t,e,i):m.canFormat(t)?m.format(t,e,i):t.toString()},e.prototype.format=function(t,e,n){var i=this;if(!t)return\"\";var r=t.replace(u,function(t,r,a,o){if(r)return\"{\";if(a)return\"}\";var l=o.split(\":\"),s=parseInt(l[0],10),u=l[1];return i.formatValue(e[s],u,n)});return r},e.prototype.isStandardNumberFormat=function(t){return m.isStandardFormat(t)},e.prototype.formatNumberWithCustomOverride=function(t,e,n,i){var r=this.getCulture(i);return m.formatWithCustomOverride(t,e,n,r)},e.prototype.dateFormatString=function(t){return this._dateTimeScaleFormatInfo||this.initialize(),this._dateTimeScaleFormatInfo.getFormatString(t)},e.prototype.setCurrentCulture=function(t){this._currentCultureSelector!==t&&(this._currentCulture=this.getCulture(t),this._currentCultureSelector=t,this._dateTimeScaleFormatInfo=new y(this._currentCulture))},e.prototype.getCulture=function(t){if(null==t)return null==this._currentCulture&&this.initialize(),this._currentCulture;var e=Globalize.findClosestCulture(t);return e||(e=Globalize.culture(\"en-US\")),e},e.prototype.initialize=function(){var t=this.getCurrentCulture();this.setCurrentCulture(t);var e=this.getUrlParam(\"calendar\");if(e){var n=this._currentCulture,i=n.calendars[e];i&&(n.calendar=i)}},e.prototype.getCurrentCulture=function(){var e=this.getUrlParam(\"language\");return e?e:t&&t.common&&t.common.cultureInfo?t.common.cultureInfo:window.navigator.userLanguage||window.navigator.language||Globalize.culture().name},e.prototype.getUrlParam=function(t){var e=window.location.search.match(RegExp(\"[?&]\"+t+\"=([^&]*)\"));return e?e[1]:void 0},e}();e.FormattingService=p;var v;!function(t){function e(t){var e=t instanceof Date;return e}function i(t,e,n){e=e||\"G\";var i=1===e.length;try{return i?r(t,e,n):s(t,e,n)}catch(a){return r(t,\"G\",n)}}function r(t,e,n){var i=n.calendar.patterns;h(n.calendar);var r=o(t,e,n.name);return e=1===r.format.length?i[r.format]:r.format,n||(n=Globalize.culture(\"en-US\")),Globalize.format(r.value,e,n)}function s(t,e,i){var r,o=[];if(e=n.preserveLiterals(e,o),\ne.indexOf(\"F\")>-1){e=a.replaceAll(e,\"FFFF\",\"FFF\");var l=t.getMilliseconds();if(l%10>=1&&(e=a.replaceAll(e,\"FFF\",\"fff\")),e=a.replaceAll(e,\"FFF\",\"FF\"),l%100/10>=1&&(e=a.replaceAll(e,\"FF\",\"ff\")),e=a.replaceAll(e,\"FF\",\"F\"),l%1e3/100>=1&&(e=a.replaceAll(e,\"F\",\"f\")),e=a.replaceAll(e,\"F\",\"\"),\"\"===e||\"%\"===e)return\"\"}return e=u(e),r=Globalize.format(t,e,i),r=c(r,i.calendar),r=n.restoreLiterals(r,o,!1)}function u(t){return t===f?d:(f=t,t=l(t),d=t,t)}function c(t,e){var n=e[\":\"];if(\":\"===n)return t;for(var i=\"\",r=t.length,a=0;r>a;a++){var o=t.charAt(a);switch(o){case\":\":i+=n;break;default:i+=o}}return i}function h(t){var e=t.patterns;void 0===e.g&&(e.g=e.f.replace(e.D,e.d),e.G=e.F.replace(e.D,e.d))}var f,d;t.canFormat=e,t.format=i}(v||(v={}));var m;!function(t){function o(t,e){if(!e||void 0===t)return t;var n=\"{0:\"+e+\"}\";return t.replace(\"{0}\",n)}function l(e,n){if(null==n)return n;if(p(n)){var i=t.getComponents(n),r=i.positive,a=i.negative,o=i.zero;return e>0?s(e,r):0===e?s(e,o):s(e,a)}return s(e,n)}function s(t,e){var n=r.run(B,e);return n?n[0]:e}function u(e,n,i){if(null==n)return e;if(null==e&&(e=c),p(e)){for(var r=t.getComponents(e),a=r.positive,o=r.negative,l=r.zero,s=[a,o,l],u=0;u<s.length;u++)s[u]=d(s[u],n,i);return s.join(t.NumberFormatComponentsDelimeter)}return d(e,n,i)}function d(t,e,i){if(e=Math.abs(e),e>=0){var o=[];t=n.preserveLiterals(t,o);var l=i?c:h,s=a.repeat(l,Math.abs(e)),u=r.run(O,t);if(u){var f=t.substr(0,u.index),d=t.substr(u.index+1,u[1].length),g=t.substr(u.index+u[0].length);if(i)d=s;else{var p=s.length-d.length;p>0?d+=s.slice(-p):0>p&&(d=d.slice(0,p))}d.length>0&&(d=R+d),t=f+d+g}else s.length>0&&(t=t.replace(z,\"$1\"+R+s));0!==o.length&&(t=n.restoreLiterals(t,o))}return t}function p(e){return-1!==n.removeLiterals(e).indexOf(t.NumberFormatComponentsDelimeter)}function v(e){var i={hasNegative:!1,positive:e,negative:e,zero:e},r=[];e=n.preserveLiterals(e,r);var a=e.split(t.NumberFormatComponentsDelimeter),o=a.length;return o>1&&(0!==r.length&&(a=a.map(function(t){return n.restoreLiterals(t,r)})),i.hasNegative=!0,i.positive=i.zero=a[0],i.negative=a[1],o>2&&(i.zero=a[2])),i}function m(t){var e=\"number\"==typeof t;return e}function y(t){return _.test(t)}function x(t,e,n){e=e||\"G\";try{return y(e)?S(t,e,n):w(t,e,n)}catch(i){return Globalize.format(t,void 0,n)}}function b(t,e,n,i){return w(t,e,i,n)}function S(t,e,n){var i,r=e.length>1?parseInt(e.substr(1,e.length-1),10):void 0,o=n.numberFormat,l=e.charAt(0);switch(l){case\"e\":case\"E\":void 0===r&&(r=6);var s=a.repeat(\"0\",r);e=\"0.\"+s+l+\"+000\",i=w(t,e,n);break;case\"f\":case\"F\":i=void 0!==r?t.toFixed(r):t.toFixed(o.decimals),i=F(i,o);break;case\"g\":case\"G\":var u=Math.abs(t);if(0===u||u>=1e-4&&1e15>u)i=void 0!==r?t.toPrecision(r):t.toString();else{if(\"number\"!=typeof t)return String(t);i=void 0!==r?t.toExponential(r):t.toExponential(),i=i.replace(\"e\",\"E\")}i=F(i,o);break;case\"r\":case\"R\":i=t.toString(),i=F(i,o);break;case\"x\":case\"X\":if(i=t.toString(16),\"X\"===l&&(i=i.toUpperCase()),void 0!==r){var c=i.length,h=0>t;h&&c--;var f=r-c,d=void 0;f>0&&(d=a.repeat(\"0\",f)),i=h?\"-\"+d+i.substr(1):d+i}i=F(i,o);break;default:i=Globalize.format(t,e,n)}return i}function w(i,a,l,s){var u,c=l.numberFormat;if(!isFinite(i))return Globalize.format(i,void 0);var h=v(a);a=i>0?h.positive:0===i?h.zero:h.negative,h.hasNegative&&(i=Math.abs(i));var f=C(a,!0),d=[];if(f.hasLiterals&&(a=n.preserveLiterals(a,d)),f.hasE&&!s){var g=r.run(N,a);if(g){var p=a.substr(0,g.index),m=a.substr(g.index+2),y=T(p,f),x=D(p,f);if(1!==x&&(i*=x),\"number\"!=typeof i)return String(i);var b=i.toExponential(y),S=b.indexOf(\"e\"),w=b.substr(0,S),P=b.substr(S+1),L=A(w,p,c),E=A(P,m,c);\"+\"===E.charAt(0)&&\"+\"!==g[0].charAt(1)&&(E=E.substr(1));var F=g[0].charAt(0);u=L+F+E}}if(void 0===u){var k=void 0,_=!1,y=T(a,f),x=D(a,f);if(1!==x&&(i*=x),i=parseFloat(M(i,y)),!isFinite(i))return Globalize.format(i,void 0);if(s){var I=t.getNumericFormat(i,a);s=o(s,I),k=e.formattingService.format(s,[i],l.name),_=!0}else k=M(i,y);u=A(k,a,c,s,_)}return f.hasLiterals&&(u=n.restoreLiterals(u,d,!1)),V=f,u}function M(t,e){var n=\"\",r=0;e>16&&(r=e-16,e=16);var o=i.log10(Math.abs(t));if(16>o){if(o>0){var l=16-o;e>l&&(r+=e-l,e=l)}n=t.toFixed(e)}else if(16===o)n=t.toFixed(0),r+=e,r>0&&(n+=\".\");else{if(\"number\"!=typeof t)return String(t);n=t.toExponential(15);var s=n.indexOf(\"e\");if(s>0){var u=n.indexOf(\".\"),c=n.substr(0,s),h=n.substr(s+1),f=parseInt(h,10)-(c.length-u-1);n=c.replace(\".\",\"\")+a.repeat(\"0\",f),e>0&&(n=n+\".\"+a.repeat(\"0\",e))}}return r>0&&(n+=a.repeat(\"0\",r)),n}function C(t,e,i,r){if(void 0!==V&&t===V.format)return V;for(var a=[],o=n.preserveLiterals(t,a),l={format:t,hasLiterals:0!==a.length,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:void 0,scale:void 0,partsPerScale:void 0},s=0,u=o.length;u>s;s++){var c=o.charAt(s);switch(c){case\"e\":case\"E\":l.hasE=!0;break;case\",\":l.hasCommas=!0;break;case\".\":l.hasDots=!0;break;case\"%\":l.hasPercent=!0;break;case\"‰\":l.hasPermile=!0}}var h=v(t);return e&&(l.precision=T(h.positive,l)),r&&(l.partsPerScale=P(h.positive,l)),i&&(l.scale=D(h.positive,l)),l}function T(t,e){if(e.precision>-1)return e.precision;var i=0;if(e.hasDots){e.hasLiterals&&(t=n.removeLiterals(t));var r=t.indexOf(\".\");if(r>-1){for(var a=t.length,o=r;a>o;o++){var l=t.charAt(o);if(l.match(g)&&i++,l===f)break}i=Math.min(19,i)}}return e.precision=i,i}function P(t,e){if(null!=e.partsPerScale)return e.partsPerScale;var n=1;return e.hasPercent&&t.indexOf(\"%\")>-1&&(n=100*n),e.hasPermile&&t.indexOf(\"‰\")>-1&&(n=1e3*n),e.partsPerScale=n,n}function D(t,e){if(e.scale>-1)return e.scale;var n=P(t,e);if(e.hasCommas){var i=t.indexOf(\".\");-1===i&&(i=t.length);for(var r=i-1;r>-1;r--){var a=t.charAt(r);if(\",\"!==a)break;n/=1e3}}return e.scale=n,n}function A(t,e,n,i,r){var a=!!i,o=e.split(\".\",2);if(2===o.length){var l=o[0],s=o[1],u=\"\";i&&(u=i.replace(k,\"\"),t=t.replace(u,\"\"));var c=n[\".\"],h=r?c:\".\",f=t.split(h,2),d=1===f.length?f[0]+u:f[0],g=2===f.length?f[1]+u:\"\";g=g.replace(I,\"\");var p=L(d,l,n,a),v=E(g,s,a);return v.fmtOnly||\"\"===v.value?p+v.value:p+c+v.value}return L(t,e,n,a)}function L(t,e,n,i){var r=e.indexOf(\",\"),a=r>-1&&r<Math.max(e.lastIndexOf(\"0\"),e.lastIndexOf(\"#\"))&&n[\",\"],o=0,l=0,s=n.groupSizes||[3],u=s[0],f=n[\",\"],d=\"\",g=t.charAt(0);\"+\"!==g&&\"-\"!==g||(d=n[g],t=t.substr(1));for(var p=\"0\"===t,v=\"\",m=\"\",y=t.length-1,x=!0,b=e.length-1;b>-1;b--){var S=e.charAt(b);switch(S){case c:case h:x=!1,\"\"!==m&&(v=m+v,m=\"\"),i||((y>-1||S===c)&&a&&(o===u?(v=f+v,l++,l<s.length&&(u=s[l]),o=1):o++),y>-1?(p&&S===h||(v=t.charAt(y)+v),y--):S!==h&&(v=S+v));break;case\",\":break;default:m=S+m}}if(!i){if(y>-1&&\"\"!==v)if(a)for(;y>-1;)o===u?(v=f+v,l++,l<s.length&&(u=s[l]),o=1):o++,v=t.charAt(y)+v,y--;else v=t.substr(0,y+1)+v;return d+m+v}return x?d+m+v:d+m+t+v}function E(t,e,n){var i=0,r=e.length,a=t.length;if(n){var o=e.charAt(r-1);return o.match(g)?{value:t,fmtOnly:\"\"===t}:{value:t+o,fmtOnly:\"\"===t}}for(var l=\"\",s=!0,u=0;r>u;u++){var f=e.charAt(u);if(a>i)switch(f){case c:case h:l+=t[i++],s=!1;break;default:l+=f}else f!==h&&(l+=f,s=s&&f!==c)}return{value:l,fmtOnly:s}}function F(t,e){var n=e[\"+\"],i=e[\"-\"],r=e[\".\"],a=e[\",\"];if(\"+\"===n&&\"-\"===i&&\".\"===r&&\",\"===a)return t;for(var o=t.length,l=\"\",s=0;o>s;s++){var u=t.charAt(s);switch(u){case\"+\":l+=n;break;case\"-\":l+=i;break;case\".\":l+=r;break;case\",\":l+=a;break;default:l+=u}}return l}var k=/\\{.+\\}/,N=/e[+-]*[0#]+/i,_=/^[a-z]\\d{0,2}$/i,I=/0+$/,O=/\\.([0#]*)/g,B=/[0#,\\.]+[0,#]*/g,z=/([0#])(?=[^0#]*$)/,R=\".\";t.NumberFormatComponentsDelimeter=\";\",t.getNumericFormat=l,t.addDecimalsToFormat=u,t.hasFormatComponents=p,t.getComponents=v;var V;t.canFormat=m,t.isStandardFormat=y,t.format=x,t.formatWithCustomOverride=b,t.getCustomFormatMetadata=C}(m=e.numberFormat||(e.numberFormat={}));var y=function(){function t(t){var e=t.calendar,n=e.patterns,i=e.months.namesAbbr,r=i&&i[0],a=n.Y,o=n.M,l=n.f,s=n.T,u=n.t,c=l.indexOf(\",\")>-1?\", \":\" \",h=0===a.indexOf(\"yyyy'\")&&a.length>6&&\"'\"===a[6];this.YearPattern=h?a.substr(0,7):\"yyyy\";var f=l.indexOf(\"yy\"),d=l.indexOf(\"MMMM\");this.MonthPattern=r&&d>-1?f>d?\"MMM yyyy\":\"yyyy MMM\":a,this.DayPattern=r?o.replace(\"MMMM\",\"MMM\"):o;var g=l.indexOf(\"mm\"),p=l.indexOf(\"tt\"),v=p>-1?u.replace(\":mm \",\"\"):u;switch(this.HourPattern=g>f?this.DayPattern+c+v:v+c+this.DayPattern,this.MinutePattern=u,this.SecondPattern=s,this.MillisecondPattern=s.replace(\"ss\",\"ss.fff\"),t.name){case\"fi-FI\":this.DayPattern=this.DayPattern.replace(\"'ta'\",\"\"),this.HourPattern=this.HourPattern.replace(\"'ta'\",\"\")}}return t.prototype.getFormatString=function(t){switch(t){case s.Year:return this.YearPattern;case s.Month:return this.MonthPattern;case s.Week:case s.Day:return this.DayPattern;case s.Hour:return this.HourPattern;case s.Minute:return this.MinutePattern;case s.Second:return this.SecondPattern;case s.Millisecond:return this.MillisecondPattern}},t}();e.formattingService=new p}(n=e.formatting||(e.formatting={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.Default=0]=\"Default\",t[t.Verbose=1]=\"Verbose\",t[t.WholeUnits=2]=\"WholeUnits\",t[t.DataLabels=3]=\"DataLabels\"}(e=t.DisplayUnitSystemType||(t.DisplayUnitSystemType={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(t,e){for(var n=[],a=3;l>a;a++){var o=t(a);o&&i(n,r.pow10(a),o.title,o.format,e)}return n}function i(t,e,n,i,r){if(n||i){var a=e;if(t.length>0){var o=t[t.length-1];r&&(a=r(e,o.value,a)),o.applicableRangeMax=a}var l=new g;l.value=e,l.applicableRangeMin=a,l.applicableRangeMax=1e3*a,l.title=n,l.labelFormat=i,t.push(l)}}var r=t.extensibility.utils.type.Double,a=t.extensibility.utils.formatting.numberFormat,o=t.extensibility.utils.formatting.formattingService,l=24,s=1e15,u=1e-4,c=\"%\",h=\"E+0\",f=\"0.##\"+h,d=/^([0\\#,]*\\.[0\\#]+|[0\\#,]+|g)$/i,g=function(){function t(){}return t.prototype.project=function(t){return this.value?r.removeDecimalNoise(t/this.value):t},t.prototype.reverseProject=function(t){return this.value?t*this.value:t},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var e=r.getPrecision(t,3);return r.greaterOrEqualWithPrecision(t,this.applicableRangeMin,e)&&r.lessWithPrecision(t,this.applicableRangeMax,e)},t.prototype.isScaling=function(){return this.value>1},t}();e.DisplayUnit=g;var p=function(){function t(t){this.units=t?t:[]}return Object.defineProperty(t.prototype,\"title\",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!0,configurable:!0}),t.prototype.update=function(t){void 0!==t&&(this.unitBaseValue=t,this.displayUnit=this.findApplicableDisplayUnit(t))},t.prototype.findApplicableDisplayUnit=function(t){for(var e=0,n=this.units;e<n.length;e++){var i=n[e];if(i.isApplicableTo(t))return i}},t.prototype.format=function(t,e,n,i,r){n=this.getNumberOfDecimalsForFormatting(e,n);var a=\"\";return this.isFormatSupported(e)&&!this.hasScientitifcFormat(e)&&this.isScalingUnit()&&this.shouldRespectScalingUnit(e)&&(t=this.displayUnit.project(t),a=this.displayUnit.labelFormat),this.formatHelper({value:t,nonScientificFormat:a,format:e,decimals:n,trailingZeros:i,cultureSelector:r})},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.isPercentageFormat=function(t){return t&&t.indexOf(c)>=0},t.prototype.shouldRespectScalingUnit=function(t){return!0},t.prototype.getNumberOfDecimalsForFormatting=function(t,e){return e},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.formatHelper=function(t){var e=t.value,n=t.nonScientificFormat,i=t.cultureSelector,r=t.format,l=t.decimals,s=t.trailingZeros;if(\"g\"!==r&&\"G\"!==r||null==l||(r=\"#,0.00\"),r=a.addDecimalsToFormat(r,l,s),r&&!o.isStandardNumberFormat(r))return o.formatNumberWithCustomOverride(e,r,n,i);r||(r=\"G\"),n||(n=\"{0}\");var u=o.formatValue(e,r,i);return o.format(n,[u])},t.prototype.formatSingleValue=function(t,e,n,i,a){return this.update(this.shouldUseValuePrecision(t)?r.getPrecision(t,8):t),this.format(t,e,n,i,a)},t.prototype.shouldUseValuePrecision=function(t){if(0===this.units.length)return!0;for(var e=0,n=0;n<this.units.length;n++)if(this.units[n].isScaling()){e=this.units[n].applicableRangeMin;break}return Math.abs(t)<e},t.prototype.isScientific=function(t){return-s>t||t>s||t>-u&&u>t&&0!==t},t.prototype.hasScientitifcFormat=function(t){return t&&-1!==t.toUpperCase().indexOf(\"E\")},t.prototype.supportsScientificFormat=function(t){return t?d.test(t):!0},t.prototype.shouldFallbackToScientific=function(t,e){return!this.hasScientitifcFormat(e)&&this.supportsScientificFormat(e)&&this.isScientific(t)},t.prototype.getScientificFormat=function(t,e,n,i){if(this.isFormatSupported(e)&&this.shouldFallbackToScientific(t,e)){var r=a.getNumericFormat(t,e);return n&&(r=a.addDecimalsToFormat(r?r:\"0\",Math.abs(n),i)),r?r+h:f}return e},t}();p.UNSUPPORTED_FORMATS=/^(p\\d*)|(e\\d*)$/i,e.DisplayUnitSystem=p;var v=function(t){function e(){return t.call(this,[])||this}return __extends(e,t),e}(p);e.NoDisplayUnitSystem=v;var m=function(t){function e(n){return t.call(this,e.getUnits(n))||this}return __extends(e,t),e.prototype.format=function(e,n,i,r,a){return n=this.getScientificFormat(e,n,i,r),t.prototype.format.call(this,e,n,i,r,a)},e.reset=function(){e.units=null},e.getUnits=function(t){return e.units||(e.units=n(t,function(t,e,n){return t-e>=1e3?t/10:n}),e.units[e.units.length-1].applicableRangeMax=1/0),e.units},e}(p);e.DefaultDisplayUnitSystem=m;var y=function(t){function e(n){return t.call(this,e.getUnits(n))||this}return __extends(e,t),e.reset=function(){e.units=null},e.getUnits=function(t){return e.units||(e.units=n(t),e.units[e.units.length-1].applicableRangeMax=1/0),e.units},e.prototype.format=function(e,n,i,r,a){return n=this.getScientificFormat(e,n,i,r),t.prototype.format.call(this,e,n,i,r,a)},e}(p);e.WholeUnitsDisplayUnitSystem=y;var x=function(t){function e(n){return t.call(this,e.getUnits(n))||this}return __extends(e,t),e.prototype.isFormatSupported=function(t){return!e.UNSUPPORTED_FORMATS.test(t)},e.getUnits=function(t){if(!e.units){var r=[],a=function(t,e,n){return-1===t&&t-e>=1e3?t/10:n},o=t(-1);i(r,e.AUTO_DISPLAYUNIT_VALUE,o.title,o.format,a),o=t(0),i(r,e.NONE_DISPLAYUNIT_VALUE,o.title,o.format,a),e.units=r.concat(n(t,a)),e.units[e.units.length-1].applicableRangeMax=1/0}return e.units},e.prototype.format=function(e,n,i,r,a){return n=this.getScientificFormat(e,n,i,r),t.prototype.format.call(this,e,n,i,r,a)},e}(p);x.AUTO_DISPLAYUNIT_VALUE=0,x.NONE_DISPLAYUNIT_VALUE=1,x.UNSUPPORTED_FORMATS=/^(e\\d*)$/i,e.DataLabelsDisplayUnitSystem=x}(n=e.formatting||(e.formatting={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t){return t.toString().replace(new RegExp(\" \",\"g\"),\"&nbsp\")}function n(t){return t.replace(/(…)|(\\.\\.\\.)/g,\"\")}function i(t){return null!=t?t.replace(/ /g,\" \"):void 0}t.removeBreakingSpaces=e,t.removeEllipses=n,t.replaceSpaceWithNBSP=i}(e=t.textUtil||(t.textUtil={}))}(e=t.formatting||(t.formatting={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.type.ValueType,r=t.extensibility.utils.type.PrimitiveType,a=t.extensibility.utils.type.Double,o=t.extensibility.utils.formatting.stringExtensions,l=t.extensibility.utils.formatting.DisplayUnitSystemType,s=t.extensibility.utils.formatting.DefaultDisplayUnitSystem,u=t.extensibility.utils.formatting.numberFormat,c=t.extensibility.utils.formatting.WholeUnitsDisplayUnitSystem,h=t.extensibility.utils.formatting.DateTimeSequence,f=t.extensibility.utils.formatting.NoDisplayUnitSystem,d=t.extensibility.utils.formatting.DataLabelsDisplayUnitSystem,g=t.extensibility.utils.formatting.formattingService,p=t.extensibility.utils.dataview.DataViewObjects;!function(t){function e(t){var e=I[t];return e?O[e]||t:t}function n(t){var e=-1===t?\"Auto\":t.toString(),n=O[\"DisplayUnitSystem_E\"+e+\"_Title\"],i=0>=t?\"{0}\":O[\"DisplayUnitSystem_E\"+e+\"_LabelFormat\"];return n||i?{title:n,format:i}:void 0}function v(t){return O[t]}function m(t){return u.getCustomFormatMetadata(t)}function y(t){B=t,s.reset(),c.reset()}function x(t,e,n){var i=e?B.beautify(t):t;return{format:function(t){return null==t?B.nullValue:F({value:t,cultureSelector:n,format:i})}}}function b(t){var e=t.allowFormatBeautification?B.beautify(t.format):t.format,n=t.cultureSelector;if(C(t)){var i=M(t.displayUnitSystemType),r=!!t.formatSingleValues;i.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));var o,l=null!=t.precision;return l?o=-t.precision:i.displayUnit&&i.displayUnit.value>1&&(o=-z),{format:function(t){var s=k(t,!0);return _.isNullOrUndefinedOrWhiteSpaceString(s)?(t&&!i.isScalingUnit()&&Math.abs(t)<R&&!l&&(t=a.roundToPrecision(t)),r?i.formatSingleValue(t,e,o,l,n):i.format(t,e,o,l,n)):s},displayUnit:i.displayUnit,options:t}}if(T(t.value,t.value2,t.tickCount)){var s=h.getIntervalUnit(t.value,t.value2,t.tickCount);return{format:function(t){if(null==t)return B.nullValue;var e=g.dateFormatString(s);return F({value:t,cultureSelector:n,format:e})},options:t}}return x(e,!1,n)}function S(t,e,n,i){if(null==t)return B.nullValue;var r=n?B.beautify(e):e;return F({value:t,cultureSelector:i,format:r})}function w(t,e,n,i,r){if(!(e&&e.type&&e.type.dateTime)&&t instanceof Date){var a=P(W,null,!1);return F({value:t,nullsAreBlank:i,cultureSelector:r,format:a})}var a=P(e,n);return F({value:t,nullsAreBlank:i,cultureSelector:r,format:a})}function M(t){if(null==t)return new s(B.describe);switch(t){case l.Default:return new s(B.describe);case l.WholeUnits:return new c(B.describe);case l.Verbose:return new f;case l.DataLabels:return new d(B.describe);default:return new s(B.describe)}}function C(t){var e=t.value,n=t.value2,i=t.format;if(t.formatSingleValues&&i&&Math.abs(e)<V){var r=!u.isStandardFormat(i);if(r){var o=u.getCustomFormatMetadata(i,!0).precision;if(U>o)return!1}else if(a.isInteger(e))return!1}return\"number\"==typeof e||\"number\"==typeof n?!0:void 0}function T(t,e,n){return t instanceof Date&&e instanceof Date&&void 0!==n&&null!==n}function P(e,n,i){if(e){if(n){var r=p.getValue(e.objects,n);if(r)return r}if(!i){var a=e.type;if(a){if(a.dateTime)return t.DefaultDateFormat;if(a.integer)return a.temporal&&a.temporal.year?\"0\":t.DefaultIntegerFormat;if(a.numeric)return t.DefaultNumericFormat}}}}function D(e,n){if(e){if(e.format)return e.format;if(!n){var i=e.type;if(i){if(i.dateTime)return t.DefaultDateFormat;if(i.integer)return i.temporal&&i.temporal.year?\"0\":t.DefaultIntegerFormat;if(i.numeric)return t.DefaultNumericFormat}}}}function A(t,e){var n;if(!t)return null;var i=t.length;if(i>0){n=t[0];for(var r=i-1,a=1,o=r;o>a;a++){var l=t[a];n=_.format(B.restatementComma,n,l)}if(i>1){var l=t[r];n=_.format(e,n,l)}}else n=null;return n}function L(t){return A(t,B.restatementCompoundAnd)}function E(t){return A(t,B.restatementCompoundOr)}function F(t){var e=t.value,n=t.format,i=t.nullsAreBlank,r=t.cultureSelector,a=k(e,i?i:!1);return _.isNullOrUndefinedOrWhiteSpaceString(a)?g.formatValue(e,n,r):a}function k(t,e){return null==t&&e?B.nullValue:t===!0?B.trueValue:t===!1?B.falseValue:\"number\"==typeof t&&isNaN(t)?B.NaN:t===Number.NEGATIVE_INFINITY?B.negativeInfinity:t===Number.POSITIVE_INFINITY?B.infinity:\"\"}function N(t){var e=M(t);return e.units}var _=o,I={\"0.00 %;-0.00 %;0.00 %\":\"Percentage\",\"0.0 %;-0.0 %;0.0 %\":\"Percentage1\"};t.DefaultIntegerFormat=\"g\",t.DefaultNumericFormat=\"#,0.00\",t.DefaultDateFormat=\"d\";var O={NullValue:\"(Blank)\",BooleanTrue:\"True\",BooleanFalse:\"False\",NaNValue:\"NaN\",InfinityValue:\"+Infinity\",NegativeInfinityValue:\"-Infinity\",RestatementComma:\"{0}, {1}\",RestatementCompoundAnd:\"{0} and {1}\",RestatementCompoundOr:\"{0} or {1}\",DisplayUnitSystem_EAuto_Title:\"Auto\",DisplayUnitSystem_E0_Title:\"None\",DisplayUnitSystem_E3_LabelFormat:\"{0}K\",DisplayUnitSystem_E3_Title:\"Thousands\",DisplayUnitSystem_E6_LabelFormat:\"{0}M\",DisplayUnitSystem_E6_Title:\"Millions\",DisplayUnitSystem_E9_LabelFormat:\"{0}bn\",DisplayUnitSystem_E9_Title:\"Billions\",DisplayUnitSystem_E12_LabelFormat:\"{0}T\",DisplayUnitSystem_E12_Title:\"Trillions\",Percentage:\"#,0.##%\",Percentage1:\"#,0.#%\",TableTotalLabel:\"Total\",Tooltip_HighlightedValueDisplayName:\"Highlighted\",Funnel_PercentOfFirst:\"Percent of first\",Funnel_PercentOfPrevious:\"Percent of previous\",Funnel_PercentOfFirst_Highlight:\"Percent of first (highlighted)\",Funnel_PercentOfPrevious_Highlight:\"Percent of previous (highlighted)\",GeotaggingString_Continent:\"continent\",GeotaggingString_Continents:\"continents\",GeotaggingString_Country:\"country\",GeotaggingString_Countries:\"countries\",GeotaggingString_State:\"state\",GeotaggingString_States:\"states\",GeotaggingString_City:\"city\",GeotaggingString_Cities:\"cities\",GeotaggingString_Town:\"town\",GeotaggingString_Towns:\"towns\",GeotaggingString_Province:\"province\",GeotaggingString_Provinces:\"provinces\",GeotaggingString_County:\"county\",GeotaggingString_Counties:\"counties\",GeotaggingString_Village:\"village\",GeotaggingString_Villages:\"villages\",GeotaggingString_Post:\"post\",GeotaggingString_Zip:\"zip\",GeotaggingString_Code:\"code\",GeotaggingString_Place:\"place\",GeotaggingString_Places:\"places\",GeotaggingString_Address:\"address\",GeotaggingString_Addresses:\"addresses\",GeotaggingString_Street:\"street\",GeotaggingString_Streets:\"streets\",GeotaggingString_Longitude:\"longitude\",GeotaggingString_Longitude_Short:\"lon\",GeotaggingString_Longitude_Short2:\"long\",GeotaggingString_Latitude:\"latitude\",GeotaggingString_Latitude_Short:\"lat\",GeotaggingString_PostalCode:\"postal code\",GeotaggingString_PostalCodes:\"postal codes\",GeotaggingString_ZipCode:\"zip code\",GeotaggingString_ZipCodes:\"zip codes\",GeotaggingString_Territory:\"territory\",GeotaggingString_Territories:\"territories\"};t.getLocalizedString=v;var B={nullValue:O.NullValue,trueValue:O.BooleanTrue,falseValue:O.BooleanFalse,NaN:O.NaNValue,infinity:O.InfinityValue,negativeInfinity:O.NegativeInfinityValue,beautify:function(t){return e(t)},describe:function(t){return n(t)},restatementComma:O.RestatementComma,restatementCompoundAnd:O.RestatementCompoundAnd,restatementCompoundOr:O.RestatementCompoundOr},z=2,R=1e3,V=1e4,U=2,W={displayName:\"\",type:i.fromPrimitiveTypeAndCategory(r.DateTime)};t.getFormatMetadata=m,t.setLocaleOptions=y,t.createDefaultFormatter=x,t.create=b,t.format=S,t.formatVariantMeasureValue=w,t.createDisplayUnitSystem=M,t.getFormatString=P,t.getFormatStringByColumn=D,t.formatListAnd=L,t.formatListOr=E,t.getDisplayUnits=N}(n=e.valueFormatter||(e.valueFormatter={}))}(n=e.formatting||(e.formatting={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.linear=\"linear\",t.log=\"log\"}(e=t.scale||(t.scale={}))}(e=t.axis||(t.axis={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.showBoth=\"showBoth\",t.showTitleOnly=\"showTitleOnly\",t.showUnitOnly=\"showUnitOnly\"}(e=t.style||(t.style={}))}(e=t.axis||(t.axis={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.top=0]=\"top\",t[t.bottom=1]=\"bottom\",t[t.left=2]=\"left\",t[t.right=3]=\"right\"}(e=t.AxisOrientation||(t.AxisOrientation={}))}(e=t.axis||(t.axis={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(t){return 300>t?3:500>t?5:8}function i(t){return 150>t?3:300>t?5:8}function r(t,e,n,i,r){return isNaN(t)||isNaN(e)?pt:1>=i||1>=e&&t>=-1?i:t===e?r?1:pt:a(n)?i:Math.min(e-t+1,i)}function a(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(i&&i.type&&!i.type.integer)return!0}return!1}function o(t,e,n,i,r){return!i||m(e)?l(t,e.domain()):y(n)?c(t,e.domain()):s(t,e,r)}function l(t,e){var n=[];if(0>=t)return n;var i=e.length;if(t>i)return e;for(var r=0,a=Math.ceil(i/t);i>r;r+=a)n.push(e[r]);return n}function s(t,e,n){var i=[];if(0===t)return i;var r=e;if(r.ticks){if(i=r.ticks(t),i.length>t&&t>1&&(i=r.ticks(t-1)),i.length<gt&&(i=r.ticks(t+1)),i=u(i),n&&i.length>1){for(var a=i[1]-i[0];a>0&&n>a;){for(var o=1;o<i.length;o++)i.splice(o,1);a=2*a}1===i.length&&i.push(i[0]+n)}return i}return i}function u(t,e){if(void 0===e&&(e=1e-5),!t||t.length<2)return t;var n=e*Math.abs(t[1]-t[0]);return t.map(function(t){return Math.abs(t)<=n?0:t})}function c(t,e){var n=[];if(0===e[0]&&0===e[1])return[];var i=rt.calculate(new Date(e[0]),new Date(e[1]),t).sequence;return n=i.map(function(t){return t.getTime()}),n=D(n,e[0],e[1])}function h(t){return isNaN(t.min)||isNaN(t.max)?(t.min=e.emptyDomain[0],t.max=e.emptyDomain[1]):t.min===t.max?(t.min=t.min<0?1.2*t.min:.8*t.min,t.max=t.max<0?.8*t.max:1.2*t.max):Math.abs(t.min)<1e-4&&t.min/(t.max-t.min)<1e-4&&(t.min=0),t}function f(t,e,n,i){return{top:20,right:30,bottom:40,left:30}}function d(t,n,i,r,a,o,l,s,u,c,h,f){var d=a.x,g=a.y1,p=a.y2,v=d.values,y=g.values,x=0,b=0,S=0,w=0,M=0,C=d.categoryThickness?d.categoryThickness/2:0,T=m(d.scale),P=!et(a.xStack),D=0;void 0!==d.outerPadding?D=d.outerPadding:void 0!==d.xLabelMaxWidth&&(D=Math.max(0,(t.width-d.xLabelMaxWidth*v.length)/2));var A,L;if(L=s||P?bt.DefaultRotationWithScrollbar:bt.DefaultRotation,h)for(var E=0,F=y.length;F>E;E++)l.text=y[E],S=Math.max(S,i(l));if(p&&f)for(var k=p.values,E=0,F=k.length;F>E;E++)l.text=k[E],w=Math.max(w,i(l));A=r(l);var N=Math.floor(o/A),_=d.scale,I=_.domain();if(c&&v.length>0){for(var E=0,F=v.length;F>E;E++){var O=void 0;l.text=v[E];var B=i(l);if(d.willLabelsWordBreak){var z=at.splitByWidth(l.text,l,i,d.xLabelMaxWidth,N);O=z.length*A,B=d.xLabelMaxWidth}else!d.willLabelsFit&&T?(O=B*L.sine,B*=L.cosine):O=dt;if(0===E){if(T)x=d.willLabelsFit?B/2-C-D:B-C-D,x=Math.max(x,0);else if(I.length>1){var R=_(I[0]);x=B/2-R,x=Math.max(x,0)}}else if(E===F-1)if(T)(d.willLabelsFit||d.willLabelsWordBreak)&&(b=B/2-C-D,b=Math.max(b,0));else if(I.length>1){var R=_(I[1]);b=B/2-(t.width-R),b=Math.max(b,0)}M=Math.max(M,O)}x=Math.min(x,ft),b=Math.min(b,ft)}var V=0,U=0,W=Math.min(Math.ceil(M),o);return u?(U=Math.min(Math.max(x,w),n),V=Math.min(Math.max(b,S),n)):(U=Math.min(Math.max(x,S),n),V=Math.min(Math.max(b,w),n)),P&&(W+=(A+e.stackedAxisPadding)*(a.xStack.length-1)),{xMax:Math.ceil(W),yLeft:Math.ceil(U),yRight:Math.ceil(V),stackHeight:A+e.stackedAxisPadding}}function g(t){return t&&(t.bool||t.numeric||t.text||t.dateTime)}function p(){return nt.fromDescriptor({text:!0})}function v(t){return!(!t||!(t.text||t.bool||t.misc&&t.misc.barcode||t.geography&&t.geography.postalCode))}function m(t){return\"function\"==typeof t.rangePoints}function y(t){return!(!t||!t.dateTime)}function x(t,e){return m(t)?w(t,e):t.invert(e)}function b(t){return m(t)?t.rangeExtent():t.range()}function S(t){var e=t.range();if(e.length<2&&m(t)){var n=t.rangeExtent();return n[1]-n[0]}return e[1]-e[0]}function w(t,e){var n=t.range();if(n.length<2)return 0;var i=t.rangeBand(),r=(n[1]-n[0]-i)/2,a=t.range(),o=t.domain();return a[0]>e?o[0]:o[d3.bisect(a,e+r)-1]}function M(t,e){var n=-1,i=Number.MAX_VALUE;for(var r in e){var a=Math.abs(t-e[r].categoryValue);i>a&&(i=a,n=parseInt(r,10))}return n}function C(t,e){var n=-1,i=Number.MAX_VALUE,r=t.domain();if(r.length<2)return 0;var a=(t(1)-t(0))/2;for(var o in r){var l=t(o),s=l+a,u=Math.abs(e-s);i>u&&(i=u,n=parseInt(o,10))}return n}function T(t,e,n){var i=t(e)-t(n);return 0===i?0:0>i?Math.min(i,-1):Math.max(i,1)}function P(t,e,n,i,r){if(n&&!v(e)){var a=void 0,o=void 0;return i&&2===i.length&&(a=i[0],o=i[1]),V(t,a,o,e,r)}return W(t)}function D(t,e,n){var i=t.filter(function(t){return t>=e&&n>=t});return i.length<2&&(i=[e,n]),i}function A(t,e){return t&&g(t.type)?t.type:e?nt.fromDescriptor({numeric:!0}):nt.fromDescriptor({text:!0})}function L(t){var e=t.pixelSpan,n=t.dataDomain,i=t.metaDataColumn,r=t.formatString,a=t.outerPadding||0,l=!!t.isCategoryAxis,s=!!t.isScalar,u=!!t.isVertical,c=!!t.useTickIntervalForDisplayUnits,h=t.getValueFn,f=t.categoryThickness,d=t.axisDisplayUnits,g=t.axisPrecision,p=!!t.is100Pct,v=(t.disableNice,A(i,s)),m=k(t),y=m.scale,x=m.bestTickCount,b=y.domain(),S=G(n,v);if(f&&s&&n&&2===n.length){var w=n[1]-n[0],M=b[1]-b[0];w>0&&M>0&&(f=f*w/M)}var C;if(s&&1===x&&!et(n))C=[n[0]];else{var T=s?R(r,v,p):void 0;C=o(x,y,v,s,T)}t.scaleType&&t.scaleType===ct.log&&S&&(C=C.filter(function(t){return tt(t)}));var P=_(b,n,v,s,r,x,C,h,c,d,g),D=d3.svg.axis().scale(y).tickSize(6,0).orient(u?\"left\":\"bottom\").ticks(x).tickValues(C),L=[];i&&(L=z(D,C,P,v,h));var E;return!s&&f?E=Math.max(1,f-2*yt):(E=C.length>1?F(y,C):e,E-=2*mt),{scale:y,axis:D,formatter:P,values:L,axisType:v,axisLabel:null,isCategoryAxis:l,xLabelMaxWidth:E,categoryThickness:f,outerPadding:a,usingDefaultDomain:m.usingDefaultDomain,isLogScaleAllowed:S,dataDomain:n}}function E(t){var n=t.axis,i=null!=t.orient?e.AxisOrientation[t.orient]:e.AxisOrientation[e.AxisOrientation.bottom];return d3.svg.axis().scale(t.scale).tickSize(t.innerTickSize||0,t.outerTickSize||0).orient(i).ticks(n.ticks()).tickValues(n.tickValues()).tickFormat(t.tickFormat)}function F(t,e){return t&&!et(e)?Math.abs(t(e[1])-t(e[0])):1}function k(t){var a=t.pixelSpan,o=t.dataDomain,l=t.metaDataColumn,s=t.outerPadding||0,u=!!t.isScalar,c=!!t.isVertical,f=t.forcedTickCount,d=t.categoryThickness,g=!!t.shouldClamp,p=t.maxTickCount,m=t.disableNice,y=t.disableNiceOnlyForScale,x=t.innerPadding,b=t.useRangePoints,S=A(l,u),w=c?i(a):n(a);p&&w>p&&(w=p);var M=o?o.slice():null,C=w;m&&(C=null);var T,P=!1;if(null==o||2===o.length&&null==o[0]&&null==o[1]||2!==o.length&&u)P=!0,o=S.dateTime||!v(S)?e.emptyDomain:[],T=v(S)?H(a,o,d?s/d:0,x,b):j(t.scaleType,a,o,S,s,C);else{if(u&&o.length>0){m||(C=void 0!==f?0!==w?f:0:r(o[0],o[o.length-1],[l],w,S.dateTime));var D=h({min:o[0],max:o[o.length-1]});M=[D.min,D.max]}if(u&&S.numeric&&!S.dateTime){M&&2===M.length&&0===M[0]&&0===M[1]&&t.zeroScalarDomain&&(M[0]=t.zeroScalarDomain[0],M[1]=t.zeroScalarDomain[1]);var L=C;y&&(L=null),T=j(t.scaleType,a,M,S,s,L,g)}else u&&S.dateTime?T=Y(a,M,s,null,g):(S.text||S.dateTime||S.numeric||S.bool)&&(T=H(a,M,d?s/d:0,x,b),C=0===w?0:Math.min(M.length,(a-2*s)/xt))}return c&&u&&T.range(T.range().reverse()),N(T),{scale:T,bestTickCount:C,usingDefaultDomain:P}}function N(t){for(var e=t.domain(),n=0,i=e.length;i>n;++n)e[n]===Number.POSITIVE_INFINITY?e[n]=Number.MAX_VALUE:e[n]===Number.NEGATIVE_INFINITY&&(e[n]=-Number.MAX_VALUE);t.domain(e)}function _(t,e,n,i,r,a,o,l,s,u,c){void 0===s&&(s=!1);var h;if(n.dateTime)if(i){var f=new Date(t[0]),d=new Date(t[1]);1===a&&(f=d=new Date(e[0])),h=ot.create({format:r,value:f,value2:d,tickCount:a})}else h=ot.createDefaultFormatter(r,!0);else if(s&&i&&o.length>1){var g=u?u:o[1]-o[0],p={format:r,value:g,value2:0,allowFormatBeautification:!0};c?p.precision=c:p.precision=I(o[0],o[1],u,r),h=ot.create(p)}else h=ot.createDefaultFormatter(r,!0);return h}function I(t,e,n,i){if(!n){var r=ot.createDisplayUnitSystem();r.update(e-t),n=r.displayUnit&&r.displayUnit.value||1}var a=(t||0)/n,o=(e||0)/n;if(i){var l=lt.getCustomFormatMetadata(i,!1,!1,!0).partsPerScale;\na*=l,o*=l}return Math.max(O(a),O(o))}function O(t){if(0===t)return 0;0>t&&(t=-t);var e=Math.floor(it.log10(t)),n=5;if(e>=0){var i=e+1,r=n-i;return 0>=r?0:B(t,r)}var a=t/it.pow10(e+1),o=B(a,n),l=-e-1;return l+o}function B(t,e){var n=t.toFixed(e),i=n.indexOf(\".\");if(-1!==i)for(var r=n.length;r-- >i;)if(\"0\"!==n[r])return r-i;return 0}function z(t,e,n,i,r){var a=[];return r||(r=function(t){return t}),n?(t.tickFormat(function(t){return n.format(r(t,i))}),a=e.map(function(t){return n.format(r(t,i))})):a=e.map(function(t){return r(t,i)}),a}function R(t,e,n){var i=t&&!lt.isStandardFormat(t);if(i){var r=lt.getCustomFormatMetadata(t,!0).precision;return t.indexOf(\"%\")>-1&&(r+=2),Math.pow(10,-r)}return n?.01:e.integer?1:0}function V(t,e,n,i,r){if(0===t.length)return null;var a=d3.min(t,function(t){return d3.min(t.data,function(t){return t&&t.categoryValue})}),o=d3.max(t,function(t){return d3.max(t.data,function(t){return t&&t.categoryValue})});return K([e,n],[a,o],r)}function U(t,e){if(0===t.length)return null;var n=d3.min(t,function(t){return d3.min(t.data,function(t){return t&&t.value})}),i=d3.max(t,function(t){return d3.max(t.data,function(t){return t&&t.value})});return e?[Math.min(n,0),Math.max(i,0)]:[n,i]}function W(t){if(et(t))return[];for(var e=[],n=t[0],i=0,r=n.data;i<r.length;i++){var a=r[i];a.highlight||e.push(a.categoryIndex)}return e}function H(t,e,n,i,r){return void 0===n&&(n=0),void 0===i&&(i=.2),void 0===r&&(r=!1),r===!0?d3.scale.ordinal().rangePoints([0,t],n).domain(e):d3.scale.ordinal().rangeBands([0,t],i,n).domain(e)}function G(t,e){return null==t?!1:y(e)?!1:t[0]>0&&t[1]>0||t[0]<0&&t[1]<0}function j(t,e,n,i,r,a,o){return void 0===r&&(r=0),t===ct.log&&G(n,i)?q(e,n,r,a):Y(e,n,r,a,o)}function q(t,e,n,i){void 0===n&&(n=0);var r=d3.scale.log().range([n,t-n]).domain([e[0],e[1]]).clamp(!0);return i&&r.nice(i),r}function Y(t,e,n,i,r){void 0===n&&(n=0);var a=d3.scale.linear().range([n,t-n]).domain([e[0],e[1]]).clamp(r);return i&&a.nice(i),a}function X(t){var e={};return t&&(e.min=null==t.min?null==t.minLocal?d3.min(t.values):t.minLocal:t.min,e.max=null==t.max?null==t.maxLocal?d3.max(t.values):t.maxLocal:t.max),e}function Q(t,e){var n=[void 0,void 0];return e&&2===e.length&&(n=[e[0],e[1]]),t&&2===t.length&&(null!=t[0]&&(n[0]=t[0]),null!=t[1]&&(n[1]=t[1])),null==n[0]&&null==n[1]?e:null!=n[0]&&null!=n[1]&&n[0]>n[1]?e:n}function K(t,e,n){var i=e?[e[0],e[1]]:[];n&&((null==i[0]||n.min<i[0])&&(i[0]=n.min),(null==i[1]||n.max>i[1])&&(i[1]=n.max));var r=[i[0],i[1]];return t&&2===t.length&&(null!=t[0]&&(i[0]=t[0]),null!=t[1]&&(i[1]=t[1]),i[0]>i[1]&&(i=r)),i}function $(t,e,n,i){void 0===i&&(i=!1);var r=i?\"secAxisStyle\":\"axisStyle\";if(!t||!t[r])return e;var a;return a=t[r]===ht.showBoth?e+\" (\"+n+\")\":t[r]===ht.showUnitOnly?n:e}function Z(t,e){return!t||!e||t.length<2||e.length<2?!1:t[0]!==e[0]||t[1]!==e[1]}function J(t){return isNaN(t)?null:t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}function tt(t){var e=Math.abs(t),n=Math.log(e)/Math.LN10;return n=Math.ceil(n-1e-12),e/Math.pow(10,n)===1}function et(t){return!(t&&t.length)}var nt=t.extensibility.utils.type.ValueType,it=t.extensibility.utils.type.Double,rt=t.extensibility.utils.formatting.DateTimeSequence,at=t.extensibility.utils.formatting.wordBreaker,ot=t.extensibility.utils.formatting.valueFormatter,lt=t.extensibility.utils.formatting.numberFormat,st=t.extensibility.utils.formatting.textUtil,ut=t.extensibility.utils.formatting.textMeasurementService,ct=t.extensibility.utils.chart.axis.scale,ht=t.extensibility.utils.chart.axis.style,ft=35,dt=10,gt=2,pt=3,vt=10,mt=3,yt=2,xt=20;e.emptyDomain=[0,0],e.stackedAxisPadding=5,e.getRecommendedNumberOfTicksForXAxis=n,e.getRecommendedNumberOfTicksForYAxis=i,e.getBestNumberOfTicks=r,e.hasNonIntegerData=a,e.getRecommendedTickValues=o,e.getRecommendedTickValuesForAnOrdinalRange=l,e.getRecommendedTickValuesForAQuantitativeRange=s,e.getMargin=f,e.getTickLabelMargins=d,e.columnDataTypeHasValue=g,e.createOrdinalType=p,e.isOrdinal=v,e.isOrdinalScale=m,e.isDateTime=y,e.invertScale=x,e.extent=b,e.getCategoryThickness=S,e.invertOrdinalScale=w,e.findClosestXAxisIndex=M,e.lookupOrdinalIndex=C,e.diffScaled=T,e.createDomain=P,e.ensureValuesInRange=D,e.getCategoryValueType=A,e.createAxis=L,e.createStackedAxis=E,e.createScale=k,e.normalizeInfinityInScale=N,e.createFormatter=_,e.calculateAxisPrecision=I,e.getMinTickValueInterval=R,e.createValueDomain=U;var bt;!function(t){function e(t,e,n,i){var r=t.values;if(0===r.length)return!1;var a=void 0!==t.xLabelMaxWidth?t.xLabelMaxWidth:e/r.length;return!r.some(function(t){return i.text=t,n(i)>a})}function n(e,n,i,r,a,o,l){var s=e.values,u=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:i/s.length,c=n.bottom/t.DefaultRotation.sine,h=a(l),f=Math.max(1,Math.floor(n.bottom/h));if(0===s.length)return!1;var d=s.some(function(t){return l.text=t,!at.hasBreakers(t)&&r(l)>u});if(d)return!1;var g=s.filter(function(i,a){var s=n.left+e.outerPadding+e.categoryThickness*(a+.5)-vt,h=s/t.DefaultRotation.cosine,d=Math.min(h,c),g=at.splitByWidth(i,l,r,u,f,o).join(\" \");l.text=i;var p=o(l,d);return st.removeEllipses(g).length>=st.removeEllipses(p).length});return g.length>=Math.floor(s.length/2)}function i(e,n,i,r,a,o,l,s,u){var c,h,f=l.axis.tickSize();h=u?f?t.DefaultRotationWithScrollbar:t.DefaultRotationWithScrollbarTickSizeZero:t.DefaultRotation,a&&(c=n/h.sine),e.each(function(t){var e=d3.select(this),n=e.text();if(r.text=n,a){var f=l.values.indexOf(this.textContent),d=s.left+l.outerPadding+l.categoryThickness*(f+.5);u||(d-=vt);var g=d/h.cosine;(u||o||c>g)&&(n=i(r,Math.min(g,c)),e.text(n)),e.style(\"text-anchor\",\"end\").attr({dx:\"-0.5em\",dy:h.dy,transform:h.transform})}else{var p=et(l.xLabelMaxWidths)?l.xLabelMaxWidth:l.xLabelMaxWidths[t],v=i(r,p);v!==n&&e.text(v),e.style(\"text-anchor\",\"middle\").attr({dx:\"0em\",dy:\"1em\",transform:\"rotate(0)\"})}})}function r(t,e,n){var i=e.xLabelMaxWidth;t.each(function(){var t=d3.select(this);t.style(\"text-anchor\",\"middle\").attr({dx:\"0em\",dy:\"1em\",transform:\"rotate(0)\"}),ut.wordBreak(this,i,n)})}function a(t,e,n){0!==t.size()&&t.each(function(){var t=d3.select(this);n(t[0][0],e)})}t.willLabelsFit=e,t.willLabelsWordBreak=n,t.DefaultRotation={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:\"rotate(-35)\",dy:\"-0.5em\"},t.DefaultRotationWithScrollbar={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:\"rotate(-90)\",dy:\"-0.8em\"},t.DefaultRotationWithScrollbarTickSizeZero={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:\"rotate(-90)\",dy:\"-0.3em\"},t.rotate=i,t.wordBreak=r,t.clip=a}(bt=e.LabelLayoutStrategy||(e.LabelLayoutStrategy={})),e.createOrdinalScale=H,e.isLogScalePossible=G,e.createNumericalScale=j,e.createLinearScale=Y,e.getRangeForColumn=X,e.applyCustomizedDomain=Q,e.combineDomain=K,e.createAxisLabel=$,e.scaleShouldClamp=Z,e.normalizeNonFiniteNumber=J,e.powerOfTen=tt}(n=e.axis||(e.axis={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.Box=0]=\"Box\",t[t.Circle=1]=\"Circle\",t[t.Line=2]=\"Line\"}(e=t.LegendIcon||(t.LegendIcon={}));var n;!function(t){t[t.Top=0]=\"Top\",t[t.Bottom=1]=\"Bottom\",t[t.Right=2]=\"Right\",t[t.Left=3]=\"Left\",t[t.None=4]=\"None\",t[t.TopCenter=5]=\"TopCenter\",t[t.BottomCenter=6]=\"BottomCenter\",t[t.RightCenter=7]=\"RightCenter\",t[t.LeftCenter=8]=\"LeftCenter\"}(n=t.LegendPosition||(t.LegendPosition={})),t.legendProps={show:\"show\",position:\"position\",titleText:\"titleText\",showTitle:\"showTitle\",labelColor:\"labelColor\",fontSize:\"fontSize\"}}(e=t.legend||(t.legend={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.interactivity.interactivityUtils,i=function(){function t(){}return t.prototype.bindEvents=function(t,e){var i=t.legendItems;this.legendIcons=t.legendIcons;var r=t.clearCatcher;n.registerStandardSelectionHandler(i,e),r.on(\"click\",function(){e.handleClearSelection()})},t.prototype.renderSelection=function(e){e?this.legendIcons.style({fill:function(e){return e.selected?e.color:t.dimmedLegendColor}}):this.legendIcons.style({fill:function(t){return t.color}})},t}();i.dimmedLegendColor=\"#A6A6A6\",e.LegendBehavior=i}(n=e.legend||(e.legend={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.chart.legend.LegendBehavior,i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.renderSelection=function(t){t?this.legendIcons.style(\"fill\",function(t){return t.color}).style(\"fill-opacity\",function(t){return t.selected?e.defaultOpacity:e.dimmedOpacity}):this.legendIcons.style(\"fill\",function(t){return t.color}).style(\"fill-opacity\",e.defaultOpacity)},e}(n);i.dimmedOpacity=.4,i.defaultOpacity=1,e.OpacityLegendBehavior=i}(n=e.legend||(e.legend={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.top=\"Top\",t.bottom=\"Bottom\",t.left=\"Left\",t.right=\"Right\",t.topCenter=\"TopCenter\",t.bottomCenter=\"BottomCenter\",t.leftCenter=\"LeftCenter\",t.rightCenter=\"RightCenter\"}(e=t.position||(t.position={}))}(e=t.legend||(t.legend={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(e,n,i,r,a,o){return void 0===r&&(r=!1),void 0===a&&(a=t.LegendPosition.Top),n?new t.InteractiveLegend(e):new t.SVGLegend(e,a,i,r,o)}function n(e){switch(e){case t.LegendPosition.Left:case t.LegendPosition.LeftCenter:return!0;default:return!1}}function i(e){switch(e){case t.LegendPosition.Top:case t.LegendPosition.TopCenter:return!0;default:return!1}}function r(t,e){var r=e.getMargins(),a=e.getOrientation();t.style({\"margin-left\":n(a)?r.width+\"px\":null,\"margin-top\":i(a)?r.height+\"px\":null})}t.createLegend=e,t.isLeft=n,t.isTop=i,t.positionChartArea=r}(e=t.legend||(t.legend={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(e,n){if(null==n[t.legendProps.show]&&(n[t.legendProps.show]=!0),n[t.legendProps.show]===!1&&(e.dataPoints=[]),n[t.legendProps.show]===!0&&null==n[t.legendProps.position]&&(n[t.legendProps.position]=t.position.top),void 0!==n[t.legendProps.fontSize]&&(e.fontSize=n[t.legendProps.fontSize]),void 0!==n[t.legendProps.labelColor]){var i=n[t.legendProps.labelColor];null!=i&&(e.labelColor=i.solid.color)}n[t.legendProps.showTitle]===!1?e.title=\"\":void 0!==n[t.legendProps.titleText]&&(e.title=n[t.legendProps.titleText])}e.DefaultLegendLabelFillColor=\"#666666\",e.update=n}(e=t.data||(t.data={}))}(e=t.legend||(t.legend={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.formatting.textUtil,i=t.extensibility.utils.svg.translateXWithPixels,r=function(){function t(t){this.legendContainerParent=d3.select(t)}return t.prototype.getMargins=function(){return{height:t.LegendHeight,width:0}},t.prototype.drawLegend=function(e){var n=e.dataPoints;if(!(n.length<1)){var i=this.legendContainerParent.select(t.LegendContainerSelector);if(i.empty()){if(!n.length)return;i=this.legendContainerParent.insert(\"div\",\":first-child\").style(\"height\",this.getMargins().height).classed(t.LegendContainerClass,!0)}this.legendContainerDiv=i,this.drawTitle(n),this.drawLegendItems(n)}},t.prototype.reset=function(){this.legendContainerDiv&&(this.legendContainerDiv.remove(),this.legendContainerDiv=null)},t.prototype.isVisible=function(){return!0},t.prototype.changeOrientation=function(t){},t.prototype.getOrientation=function(){return e.LegendPosition.Top},t.prototype.drawTitle=function(e){var n=this.legendContainerDiv.selectAll(\"div.\"+t.LegendTitleClass),i=n.data([e[0]]),r=i.enter(),a=r.append(\"div\").attr(\"class\",t.LegendTitleClass);a.filter(function(t){return t.iconOnlyOnLabel}).append(\"span\").attr(\"class\",t.legendIconClass).html(t.legendPlaceSelector),a.append(\"span\"),i.filter(function(t){return t.iconOnlyOnLabel}).select(\"span.\"+t.legendIconClass).style(t.legendColorCss,function(t){return t.color}),i.select(\"span:last-child\").text(function(t){return t.category})},t.prototype.drawLegendItems=function(e){this.ensureLegendTableCreated();var i=[e],r=this.legendContainerDiv.select(\"tbody\").selectAll(\"tr\").data(i),a=r.enter(),o=a.append(\"tr\"),l=o.selectAll(\"td\").data(function(t){return t},function(t){return t.label}).enter().append(\"td\").attr(\"class\",t.LegendItem),s=l.append(\"span\");s.filter(function(t){return!t.iconOnlyOnLabel}).append(\"span\").html(t.legendPlaceSelector).attr(\"class\",t.legendIconClass).attr(\"white-space\",\"nowrap\").style({\"font-size\":\"20px\",\"margin-bottom\":\"7px\"}),s.append(\"span\").attr(\"class\",t.legendItemNameClass),s.append(\"span\").attr(\"class\",t.legendItemMeasureClass);var u=r.selectAll(\"td\").data(function(t){return t},function(t){return t.label});u.select(\"span.\"+t.legendItemNameClass).html(function(t){return n.removeBreakingSpaces(t.label)}),u.select(\"span.\"+t.legendItemMeasureClass).html(function(t){return\"&nbsp;\"+t.measure}),u.select(\"span.\"+t.legendIconClass).style(\"color\",function(t){return t.color}),u.exit().remove()},t.prototype.ensureLegendTableCreated=function(){if(this.legendContainerDiv.select(\"div table\").empty()){var t=this.legendContainerDiv.append(\"div\").append(\"table\");t.style(\"table-layout\",\"fixed\").append(\"tbody\"),this.setPanGestureOnLegend(t)}},t.prototype.setPanGestureOnLegend=function(t){var e=this.legendContainerParent.node(),n=e.getBoundingClientRect().width,r=d3.scale.linear().domain([0,n]).range([0,n]),a=d3.behavior.zoom().scaleExtent([1,1]).x(r).on(\"zoom\",function(){if($(t[0]).width()>n){var e=a.translate(),r=e[0],o=e[1];r=Math.min(r,0),r=Math.max(r,n-$(t[0]).width()),a.translate([r,o]),t.style(\"-ms-transform\",function(){return i(r)}),t.style(\"-webkit-transform\",function(){return i(r)}),t.style(\"transform\",function(){return i(r)})}});this.legendContainerDiv?this.legendContainerDiv.call(a):t.call(a)},t}();r.LegendHeight=70,r.LegendContainerClass=\"interactive-legend\",r.LegendContainerSelector=\".interactive-legend\",r.LegendTitleClass=\"title\",r.LegendItem=\"item\",r.legendPlaceSelector=\"●\",r.legendIconClass=\"icon\",r.legendColorCss=\"color\",r.legendItemNameClass=\"itemName\",r.legendItemMeasureClass=\"itemMeasure\",e.InteractiveLegend=r}(n=e.legend||(e.legend={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.formatting.textMeasurementService,i=t.extensibility.utils.formatting.font,r=t.extensibility.utils.type.PixelConverter,a=t.extensibility.utils.type.Prototype,o=t.extensibility.utils.svg.CssConstants.createClassAndSelector,l=t.extensibility.utils.svg.translate,s=t.extensibility.utils.svg.createArrow,u=t.extensibility.utils.interactivity.appendClearCatcher,c=t.extensibility.utils.interactivity.dataHasSelection,h=function(){function t(t,n,i,r,a){this.legendDataStartIndex=0,this.arrowPosWindow=1,this.lastCalculatedWidth=0,this.visibleLegendWidth=0,this.visibleLegendHeight=0,this.legendFontSizeMarginDifference=0,this.legendFontSizeMarginValue=0,this.svg=d3.select(t).append(\"svg\").style(\"position\",\"absolute\"),this.svg.style(\"display\",\"inherit\"),this.svg.classed(\"legend\",!0),i&&(this.clearCatcher=u(this.svg)),this.group=this.svg.append(\"g\").attr(\"id\",\"legendGroup\"),this.interactiveBehavior=a?a:new e.LegendBehavior,this.interactivityService=i,this.isScrollable=r,this.element=t,this.changeOrientation(n),this.parentViewport={height:0,width:0},this.calculateViewport(),this.updateLayout()}return t.prototype.updateLayout=function(){var t=this.viewport,n=this.orientation;this.svg.attr({height:t.height||(n===e.LegendPosition.None?0:this.parentViewport.height),width:t.width||(n===e.LegendPosition.None?0:this.parentViewport.width)});var i=n===e.LegendPosition.Right||n===e.LegendPosition.RightCenter,r=n===e.LegendPosition.Bottom||n===e.LegendPosition.BottomCenter;this.svg.style({\"margin-left\":i?this.parentViewport.width-t.width+\"px\":null,\"margin-top\":r?this.parentViewport.height-t.height+\"px\":null})},t.prototype.calculateViewport=function(){switch(this.orientation){case e.LegendPosition.Top:case e.LegendPosition.Bottom:case e.LegendPosition.TopCenter:case e.LegendPosition.BottomCenter:var n=r.fromPointToPixel(this.data&&this.data.fontSize?this.data.fontSize:t.DefaultFontSizeInPt),i=t.TopLegendHeight+(n-t.DefaultFontSizeInPt);return void(this.viewport={height:i,width:0});case e.LegendPosition.Right:case e.LegendPosition.Left:case e.LegendPosition.RightCenter:case e.LegendPosition.LeftCenter:var a=this.lastCalculatedWidth?this.lastCalculatedWidth:this.parentViewport.width*t.LegendMaxWidthFactor;return void(this.viewport={height:0,width:a});case e.LegendPosition.None:this.viewport={height:0,width:0}}},t.prototype.getMargins=function(){return this.viewport},t.prototype.isVisible=function(){return this.orientation!==e.LegendPosition.None},t.prototype.changeOrientation=function(t){t?this.orientation=t:this.orientation=e.LegendPosition.Top,this.svg.attr(\"orientation\",t)},t.prototype.getOrientation=function(){return this.orientation},t.prototype.drawLegend=function(t,e){for(var n=a.inherit(t),i=[],r=0,o=t.dataPoints;r<o.length;r++){var l=o[r];i.push(a.inherit(l))}n.dataPoints=i,this.setTooltipToLegendItems(n),this.drawLegendInternal(n,e,!0)},t.prototype.drawLegendInternal=function(i,a,o){this.parentViewport=a,this.data=i,this.interactivityService&&this.interactivityService.applySelectionStateToData(i.dataPoints),0===i.dataPoints.length&&this.changeOrientation(e.LegendPosition.None),this.getOrientation()===e.LegendPosition.None&&(i.dataPoints=[]);var s=this.element.getElementsByClassName(\"mapControl\");if(s.length>0&&!this.isTopOrBottom(this.orientation))for(var u=0;u<s.length;++u){var h=s[u];h.style.display=\"inline-block\"}this.calculateViewport();var f=this.calculateLayout(i,o),d=f.title,g=d?[d]:[],p=this.interactivityService&&c(i.dataPoints),v=this.group;if(this.isCentered(this.orientation)){var m=0;this.isTopOrBottom(this.orientation)?(m=Math.max(0,(this.parentViewport.width-this.visibleLegendWidth)/2),v.attr(\"transform\",l(m,0))):(m=Math.max((this.parentViewport.height-this.visibleLegendHeight)/2),v.attr(\"transform\",l(0,m)))}else v.attr(\"transform\",null);var y=v.selectAll(t.LegendTitle.selectorName).data(g);y.enter().append(\"text\").classed(t.LegendTitle.className,!0),y.style({fill:i.labelColor,\"font-size\":r.fromPoint(i.fontSize),\"font-family\":t.DefaultTitleFontFamily}).text(function(t){return t.text}).attr({x:function(t){return t.x},y:function(t){return t.y}}).append(\"title\").text(i.title),y.exit().remove();var x=i.dataPoints.slice(this.legendDataStartIndex,this.legendDataStartIndex+f.numberOfItems),b=n.estimateSvgTextHeight(t.getTextProperties(!1,\"\",this.data.fontSize))/t.LegendIconRadiusFactor;b=this.legendFontSizeMarginValue>t.DefaultTextMargin&&b>t.LegendIconRadius?b:t.LegendIconRadius;var S=v.selectAll(t.LegendItem.selectorName).data(x,function(t){return t.identity.getKey()+(null!=t.layerNumber?t.layerNumber:\"\")}),w=S.enter().append(\"g\").classed(t.LegendItem.className,!0);if(w.append(\"circle\").classed(t.LegendIcon.className,!0),w.append(\"text\").classed(t.LegendText.className,!0),w.append(\"title\").text(function(t){return t.tooltip}),S.select(t.LegendIcon.selectorName).attr({cx:function(t,e){return t.glyphPosition.x},cy:function(t){return t.glyphPosition.y},r:b}),S.select(\"title\").text(function(t){return t.tooltip}),S.select(t.LegendText.selectorName).attr({x:function(t){return t.textPosition.x},y:function(t){return t.textPosition.y}}).text(function(t){return t.label}).style({fill:i.labelColor,\"font-size\":r.fromPoint(i.fontSize)}),this.interactivityService){var M=S.select(t.LegendIcon.selectorName),C={legendItems:S,legendIcons:M,clearCatcher:this.clearCatcher};this.interactivityService.bind(i.dataPoints,this.interactiveBehavior,C,{isLegend:!0}),this.interactiveBehavior.renderSelection(p)}S.exit().remove(),this.drawNavigationArrows(f.navigationArrows),this.updateLayout()},t.prototype.normalizePosition=function(t){this.legendDataStartIndex>=t.length&&(this.legendDataStartIndex=t.length-1),this.legendDataStartIndex<0&&(this.legendDataStartIndex=0)},t.prototype.calculateTitleLayout=function(e){var i=0,r=!!e;if(r){var a=this.isTopOrBottom(this.orientation),o=t.getTextProperties(!0,e,this.data.fontSize),l=e;return i=n.measureSvgTextWidth(o),a?i+=t.TitlePadding:l=n.getTailoredTextOrDefault(o,this.viewport.width),{x:0,y:0,text:l,width:i,height:n.estimateSvgTextHeight(o)}}return null},t.prototype.calculateLayout=function(e,n){var i=e.dataPoints;if(0===e.dataPoints.length)return{numberOfItems:0,title:null,navigationArrows:[]};this.legendFontSizeMarginValue=r.fromPointToPixel(this.data&&void 0!==this.data.fontSize?this.data.fontSize:t.DefaultFontSizeInPt),this.legendFontSizeMarginDifference=this.legendFontSizeMarginValue-t.DefaultTextMargin,this.normalizePosition(i),this.legendDataStartIndex<i.length&&(i=i.slice(this.legendDataStartIndex));var a,o,l=this.calculateTitleLayout(e.title);return this.isTopOrBottom(this.orientation)?(a=this.isScrollable?this.calculateHorizontalNavigationArrowsLayout(l):[],o=this.calculateHorizontalLayout(i,l,a)):(a=this.isScrollable?this.calculateVerticalNavigationArrowsLayout(l):[],o=this.calculateVerticalLayout(i,l,a,n)),{numberOfItems:o,title:l,navigationArrows:a}},t.prototype.updateNavigationArrowLayout=function(t,e,n){0===this.legendDataStartIndex&&t.shift();var i=this.arrowPosWindow;this.arrowPosWindow=n,t&&t.length>0&&this.arrowPosWindow===e&&(this.arrowPosWindow=i,t.length=t.length-1)},t.prototype.calculateHorizontalNavigationArrowsLayout=function(e){var n=t.LegendArrowHeight,i=t.LegendArrowWidth,r=this.viewport.height/2-n/2,a=[],o=e?e.x+e.width:0,l=s(i,n,180),u=s(i,n,0);return a.push({x:o,y:r,path:l.path,rotateTransform:l.transform,dataType:1}),a.push({x:this.parentViewport.width-i,y:r,path:u.path,rotateTransform:u.transform,dataType:0}),a},t.prototype.calculateVerticalNavigationArrowsLayout=function(e){var n=t.LegendArrowHeight,i=t.LegendArrowWidth,r=this.viewport.height/2,a=[],o=r+n/2,l=s(i,n,270),u=s(i,n,90),c=e?e.height:0;return a.push({x:o,y:i+c,path:l.path,rotateTransform:l.transform,dataType:1}),a.push({x:o,y:this.parentViewport.height-n,path:u.path,rotateTransform:u.transform,dataType:0}),a},t.calculateHorizontalLegendItemsWidths=function(e,i,r,a){var o=e.length,l=o>0?i/o|0:0,s=l-r;s<t.MaxTextLength&&(s=t.MaxTextLength,l=s+r),l>i&&(l=i,s=l-r);for(var u=0,c=[],h=0,f=e;h<f.length;h++){var d=f[h],g=t.getTextProperties(!1,d.label,a),p=n.measureSvgTextWidth(g),v=p+r,m=v>l,y=m?l:v;if(u+=y,u>=i){0===c.length?(c.push({dataPoint:d,textProperties:g,desiredWidth:v,desiredOverMaxWidth:!0,width:v}),u=i):u-=y;break}c.push({dataPoint:d,textProperties:g,desiredWidth:v,desiredOverMaxWidth:m,width:v})}var x=c.filter(function(t){return t.desiredOverMaxWidth}),b=x.length;if(b>0)for(var S=i-u,w=0,M=x;w<M.length;w++){var C=M[w],T=S/b,P=l+T,D=void 0;C.desiredWidth<=P?(C.desiredOverMaxWidth=!1,D=C.desiredWidth-l):(C.width=P,D=P-l),S-=D,b--}return c},t.prototype.calculateHorizontalLayout=function(e,i,r){var a=4+t.LegendIconRadius,o=this.legendFontSizeMarginDifference>0,l=o?t.TextAndIconPadding+this.legendFontSizeMarginDifference:t.TextAndIconPadding,s=l/(t.LegendIconRadiusFactor/2)+a,u=0,c=2*t.LegendIconRadius+1.5*l,h=e.length,f=t.getTextProperties(!1,\"\",this.data.fontSize),d=this.viewport.height/2,g=d+n.estimateSvgTextHeight(f)/2-n.estimateSvgTextBaselineDelta(f);i&&(u+=i.width,i.y=d+i.height/2-n.estimateSvgTextBaselineDelta(t.getTextProperties(!0,i.text,this.data.fontSize))),this.legendDataStartIndex>0&&(u+=t.LegendArrowOffset);var p=e.length,v=this.parentViewport.width-u,m=t.calculateHorizontalLegendItemsWidths(e,v,c,this.data.fontSize);h=m.length,h!==p&&(v-=t.LegendArrowOffset,m=t.calculateHorizontalLegendItemsWidths(e,v,c,this.data.fontSize),h=m.length);for(var y=0,x=m;y<x.length;y++){var b=x[y],S=b.dataPoint;if(S.glyphPosition={x:u+t.LegendIconRadius+this.legendFontSizeMarginDifference/t.LegendIconRadiusFactor,y:this.viewport.height*t.LegendIconYRatio},S.textPosition={x:u+s,y:g},b.desiredOverMaxWidth){var w=b.width-c,M=n.getTailoredTextOrDefault(b.textProperties,w);S.label=M}u+=b.width}return this.visibleLegendWidth=u,this.updateNavigationArrowLayout(r,p,h),h},t.prototype.calculateVerticalLayout=function(e,i,r,a){var o=this,l=this.legendFontSizeMarginDifference>0,s=l?this.legendFontSizeMarginDifference:0,u=20+s,c=15+s,h=4+s,f=u,d=t.TextAndIconPadding+t.LegendIconRadius+this.legendFontSizeMarginDifference/t.LegendIconRadiusFactor,g=2*d,p=a?this.parentViewport.width*t.LegendMaxWidthFactor-g-t.LegendEdgeMariginWidth:this.lastCalculatedWidth-g-t.LegendEdgeMariginWidth,v=e.length,m=0,y=this.parentViewport.height;i&&(f+=c,i.x=t.TextAndIconPadding,i.y=c,m=i.width||0),this.legendDataStartIndex>0&&(f+=t.LegendArrowOffset);for(var x=e.length,b=0;x>b;b++){var S=e[b],w=t.getTextProperties(!1,S.label,this.data.fontSize);S.glyphPosition={x:d,y:f+h-n.estimateSvgTextBaselineDelta(w)},S.textPosition={x:g,y:f+h};var M=n.measureSvgTextWidth(w);if(M>m&&(m=M),M>p){var C=n.getTailoredTextOrDefault(w,p);S.label=C}if(f+=u,f>y){v=b;break}}return a?p>m?this.lastCalculatedWidth=this.viewport.width=Math.ceil(m+g+t.LegendEdgeMariginWidth):this.lastCalculatedWidth=this.viewport.width=Math.ceil(this.parentViewport.width*t.LegendMaxWidthFactor):this.viewport.width=this.lastCalculatedWidth,this.visibleLegendHeight=f,r.forEach(function(t){return t.x=o.lastCalculatedWidth/2}),this.updateNavigationArrowLayout(r,x,v),v},t.prototype.drawNavigationArrows=function(e){var n=this,i=this.group.selectAll(t.NavigationArrow.selectorName).data(e);i.enter().append(\"g\").on(\"click\",function(t){var e=n.legendDataStartIndex;n.legendDataStartIndex=0===t.dataType?e+n.arrowPosWindow:e-n.arrowPosWindow,n.drawLegendInternal(n.data,n.parentViewport,!1)}).classed(t.NavigationArrow.className,!0).append(\"path\"),i.attr(\"transform\",function(t){return l(t.x,t.y)}).select(\"path\").attr({d:function(t){return t.path},transform:function(t){return t.rotateTransform}}),i.exit().remove()},t.prototype.isTopOrBottom=function(t){switch(t){case e.LegendPosition.Top:case e.LegendPosition.Bottom:case e.LegendPosition.BottomCenter:case e.LegendPosition.TopCenter:return!0;default:return!1}},t.prototype.isCentered=function(t){switch(t){case e.LegendPosition.BottomCenter:case e.LegendPosition.LeftCenter:case e.LegendPosition.RightCenter:case e.LegendPosition.TopCenter:return!0;default:return!1}},t.prototype.reset=function(){},t.getTextProperties=function(e,n,i){return{text:n,fontFamily:e?t.DefaultTitleFontFamily:t.DefaultFontFamily,fontSize:r.fromPoint(i||t.DefaultFontSizeInPt)}},t.prototype.setTooltipToLegendItems=function(t){for(var e=0,n=t.dataPoints;e<n.length;e++){var i=n[e];i.tooltip=i.label}},t}();h.DefaultFontSizeInPt=8,h.LegendIconRadius=5,h.LegendIconRadiusFactor=5,h.MaxTextLength=60,h.TextAndIconPadding=5,h.TitlePadding=15,h.LegendEdgeMariginWidth=10,h.LegendMaxWidthFactor=.3,h.TopLegendHeight=24,h.DefaultTextMargin=r.fromPointToPixel(h.DefaultFontSizeInPt),h.LegendIconYRatio=.52,h.LegendArrowOffset=10,h.LegendArrowHeight=15,h.LegendArrowWidth=7.5,h.DefaultFontFamily=i.Family.regular.css,h.DefaultTitleFontFamily=i.Family.semibold.css,h.LegendItem=o(\"legendItem\"),h.LegendText=o(\"legendText\"),h.LegendIcon=o(\"legendIcon\"),h.LegendTitle=o(\"legendTitle\"),h.NavigationArrow=o(\"navArrow\"),e.SVGLegend=h}(n=e.legend||(e.legend={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.None=0]=\"None\",t[t.TopLeft=1]=\"TopLeft\",t[t.TopCenter=2]=\"TopCenter\",t[t.TopRight=4]=\"TopRight\",t[t.MiddleLeft=8]=\"MiddleLeft\",t[t.MiddleCenter=16]=\"MiddleCenter\",t[t.MiddleRight=32]=\"MiddleRight\",t[t.BottomLeft=64]=\"BottomLeft\",t[t.BottomCenter=128]=\"BottomCenter\",t[t.BottomRight=256]=\"BottomRight\",t[t.InsideCenter=512]=\"InsideCenter\",t[t.InsideBase=1024]=\"InsideBase\",t[t.InsideEnd=2048]=\"InsideEnd\",t[t.OutsideBase=4096]=\"OutsideBase\",t[t.OutsideEnd=8192]=\"OutsideEnd\",t[t.All=16383]=\"All\"}(e=t.ContentPositions||(t.ContentPositions={}));var n;!function(t){t[t.None=0]=\"None\",t[t.VerticalBottomTop=1]=\"VerticalBottomTop\",t[t.VerticalTopBottom=2]=\"VerticalTopBottom\",t[t.HorizontalLeftRight=3]=\"HorizontalLeftRight\",t[t.HorizontalRightLeft=4]=\"HorizontalRightLeft\"}(n=t.RectOrientation||(t.RectOrientation={}));var i;!function(t){t[t.Allowed=0]=\"Allowed\",t[t.Disallowed=1]=\"Disallowed\",t[t.Partial=2]=\"Partial\"}(i=t.OutsidePlacement||(t.OutsidePlacement={}));var r;!function(t){t.category=\"Category\",t.data=\"Data\",t.both=\"Both\"}(r=t.labelStyle||(t.labelStyle={}));var a;!function(t){t[t.Above=0]=\"Above\",t[t.Below=1]=\"Below\"}(a=t.PointLabelPosition||(t.PointLabelPosition={}))}(e=t.dataLabel||(t.dataLabel={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){return{left:e.left+e.width/2-t.width/2,top:e.top+n,width:t.width,height:t.height}}function n(t,e,n){return{left:e.left+e.width/2-t.width/2,top:e.top+e.height-t.height-n,width:t.width,height:t.height}}function i(t,e,n){return{left:e.left+e.width-t.width-n,top:e.top+e.height/2-t.height/2,width:t.width,height:t.height}}function r(t,e,n){return{left:e.left+n,top:e.top+e.height/2-t.height/2,width:t.width,height:t.height}}function a(t,e,n){return{left:e.left+e.width/2-t.width/2,top:e.top-t.height-n,width:t.width,height:t.height}}function o(t,e,n){return{left:e.left+e.width/2-t.width/2,top:e.top+e.height+n,width:t.width,height:t.height}}function l(t,e,n){return{left:e.left+e.width+n,top:e.top+e.height/2-t.height/2,width:t.width,height:t.height}}function s(t,e,n){return{left:e.left-t.width-n,top:e.top+e.height/2-t.height/2,width:t.width,height:t.height}}function u(t,e,n){return{left:e.left+e.width/2-t.width/2+n,top:e.top+e.height/2-t.height/2,width:t.width,height:t.height}}function c(t,e,n){return{left:e.left+e.width/2-t.width/2,top:e.top+e.height/2-t.height/2+n,width:t.width,height:t.height}}t.topInside=e,t.bottomInside=n,t.rightInside=i,t.leftInside=r,t.topOutside=a,t.bottomOutside=o,t.rightOutside=l,t.leftOutside=s,t.middleHorizontal=u,t.middleVertical=c}(e=t.locationConverter||(t.locationConverter={}))}(e=t.dataLabel||(t.dataLabel={}))}(e=t.chart||(t.chart={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.svg.shapes.Rect,i=t.extensibility.utils.type.Double,r=function(){function t(){this.movingStep=3,this.hideOverlapped=!0,this.defaultDataLabelSettings={\nanchorMargin:t.DefaultAnchorMargin,anchorRectOrientation:e.RectOrientation.None,contentPosition:e.ContentPositions.BottomCenter,outsidePlacement:e.OutsidePlacement.Disallowed,maximumMovingDistance:t.DefaultMaximumMovingDistance,minimumMovingDistance:t.DefaultMinimumMovingDistance,validContentPositions:e.ContentPositions.BottomCenter,opacity:1}}return Object.defineProperty(t.prototype,\"defaultSettings\",{get:function(){return this.defaultDataLabelSettings},enumerable:!0,configurable:!0}),t.prototype.hideCollidedLabels=function(n,i,r,a,o){void 0===a&&(a=!1),void 0===o&&(o=!0);var l=new e.DataLabelArrangeGrid(n,i,r),s=[],u={x:0,y:0};a&&(u.x=n.width/2,u.y=n.height/2);for(var c=0,h=i.length;h>c;c++)if(r.filter(i[c])){var f=this.getLabelInfo(i[c]);f.anchorPoint={x:r.labelLayout.x(i[c])+u.x,y:r.labelLayout.y(i[c])+u.y};var d=this.calculateContentPosition(f,f.contentPosition,i[c].size,f.anchorMargin);!t.isValid(d)||this.hasCollisions(l,f,d,n)&&o||(i[c].labelX=d.left-u.x,i[c].labelY=d.top-u.y,l.add(f,d),s.push(i[c]))}return s},t.prototype.getLabelInfo=function(t){var e=this.defaultDataLabelSettings;return t.anchorMargin=void 0!==t.anchorMargin?t.anchorMargin:e.anchorMargin,t.anchorRectOrientation=void 0!==t.anchorRectOrientation?t.anchorRectOrientation:e.anchorRectOrientation,t.contentPosition=void 0!==t.contentPosition?t.contentPosition:e.contentPosition,t.maximumMovingDistance=void 0!==t.maximumMovingDistance?t.maximumMovingDistance:e.maximumMovingDistance,t.minimumMovingDistance=void 0!==t.minimumMovingDistance?t.minimumMovingDistance:e.minimumMovingDistance,t.outsidePlacement=void 0!==t.outsidePlacement?t.outsidePlacement:e.outsidePlacement,t.validContentPositions=void 0!==t.validContentPositions?t.validContentPositions:e.validContentPositions,t.opacity=void 0!==t.opacity?t.opacity:e.opacity,t.maximumMovingDistance+=t.anchorMargin,t},t.prototype.calculateContentPositionFromPoint=function(t,n,i,r){var a={x:0,y:0};if(t){if(void 0!==t.x&&isFinite(t.x))switch(a.x=t.x,n){case e.ContentPositions.TopLeft:case e.ContentPositions.MiddleLeft:case e.ContentPositions.BottomLeft:a.x-=i.width/2;break;case e.ContentPositions.TopRight:case e.ContentPositions.MiddleRight:case e.ContentPositions.BottomRight:a.x+=i.width/2}if(void 0!==t.y&&isFinite(t.y))switch(a.y=t.y,n){case e.ContentPositions.MiddleLeft:case e.ContentPositions.MiddleCenter:case e.ContentPositions.MiddleRight:a.y-=i.height/2;break;case e.ContentPositions.TopRight:case e.ContentPositions.TopLeft:case e.ContentPositions.TopCenter:a.y-=i.height}if(void 0!==r&&isFinite(r))switch(n){case e.ContentPositions.TopLeft:a.x-=r,a.y-=r;break;case e.ContentPositions.MiddleLeft:a.x-=r;break;case e.ContentPositions.BottomLeft:a.x-=r,a.y+=r;break;case e.ContentPositions.TopCenter:a.y-=r;break;case e.ContentPositions.MiddleCenter:break;case e.ContentPositions.BottomCenter:a.y+=r;break;case e.ContentPositions.TopRight:a.x+=r,a.y-=r;break;case e.ContentPositions.MiddleRight:a.x+=r;break;case e.ContentPositions.BottomRight:a.x+=r,a.y+=r}}return{left:a.x,top:a.y,width:i.width,height:i.height}},t.prototype.calculateContentPositionFromRect=function(t,n,i,r,a){switch(i){case e.ContentPositions.InsideCenter:return this.handleInsideCenterPosition(n,r,t,a);case e.ContentPositions.InsideEnd:return this.handleInsideEndPosition(n,r,t,a);case e.ContentPositions.InsideBase:return this.handleInsideBasePosition(n,r,t,a);case e.ContentPositions.OutsideEnd:return this.handleOutsideEndPosition(n,r,t,a);case e.ContentPositions.OutsideBase:return this.handleOutsideBasePosition(n,r,t,a)}return{left:0,top:0,width:-1,height:-1}},t.prototype.handleInsideCenterPosition=function(t,n,i,r){switch(t){case e.RectOrientation.VerticalBottomTop:case e.RectOrientation.VerticalTopBottom:return e.locationConverter.middleVertical(n,i,r);case e.RectOrientation.HorizontalLeftRight:case e.RectOrientation.HorizontalRightLeft:default:return e.locationConverter.middleHorizontal(n,i,r)}},t.prototype.handleInsideEndPosition=function(t,n,i,r){switch(t){case e.RectOrientation.VerticalBottomTop:return e.locationConverter.topInside(n,i,r);case e.RectOrientation.VerticalTopBottom:return e.locationConverter.bottomInside(n,i,r);case e.RectOrientation.HorizontalRightLeft:return e.locationConverter.leftInside(n,i,r);case e.RectOrientation.HorizontalLeftRight:default:return e.locationConverter.rightInside(n,i,r)}},t.prototype.handleInsideBasePosition=function(t,n,i,r){switch(t){case e.RectOrientation.VerticalBottomTop:return e.locationConverter.bottomInside(n,i,r);case e.RectOrientation.VerticalTopBottom:return e.locationConverter.topInside(n,i,r);case e.RectOrientation.HorizontalRightLeft:return e.locationConverter.rightInside(n,i,r);case e.RectOrientation.HorizontalLeftRight:default:return e.locationConverter.leftInside(n,i,r)}},t.prototype.handleOutsideEndPosition=function(t,n,i,r){switch(t){case e.RectOrientation.VerticalBottomTop:return e.locationConverter.topOutside(n,i,r);case e.RectOrientation.VerticalTopBottom:return e.locationConverter.bottomOutside(n,i,r);case e.RectOrientation.HorizontalRightLeft:return e.locationConverter.leftOutside(n,i,r);case e.RectOrientation.HorizontalLeftRight:default:return e.locationConverter.rightOutside(n,i,r)}},t.prototype.handleOutsideBasePosition=function(t,n,i,r){switch(t){case e.RectOrientation.VerticalBottomTop:return e.locationConverter.bottomOutside(n,i,r);case e.RectOrientation.VerticalTopBottom:return e.locationConverter.topOutside(n,i,r);case e.RectOrientation.HorizontalRightLeft:return e.locationConverter.rightOutside(n,i,r);case e.RectOrientation.HorizontalLeftRight:default:return e.locationConverter.leftOutside(n,i,r)}},t.prototype.calculateContentPosition=function(t,n,i,r){return n!==e.ContentPositions.InsideEnd&&n!==e.ContentPositions.InsideCenter&&n!==e.ContentPositions.InsideBase&&n!==e.ContentPositions.OutsideBase&&n!==e.ContentPositions.OutsideEnd?this.calculateContentPositionFromPoint(t.anchorPoint,n,i,r):this.calculateContentPositionFromRect(t.anchorRect,t.anchorRectOrientation,n,i,r)},t.prototype.hasCollisions=function(r,a,o,l){if(r.hasConflict(o))return!0;var s={left:0,top:o.height/2,width:l.width,height:l.height};if(s=n.inflate(s,{left:t.InflateAmount,top:0,right:t.InflateAmount,bottom:0}),s=n.intersect(s,o),n.isEmpty(s))return!0;switch(a.outsidePlacement){case e.OutsidePlacement.Disallowed:return i.lessWithPrecision(s.width,o.width)||i.lessWithPrecision(s.height,o.height/2);case e.OutsidePlacement.Partial:return i.lessWithPrecision(s.width,o.width/2)||i.lessWithPrecision(s.height,o.height/4)}return!1},t.isValid=function(t){return!n.isEmpty(t)&&t.width>0&&t.height>0},t}();r.DefaultAnchorMargin=0,r.DefaultMaximumMovingDistance=12,r.DefaultMinimumMovingDistance=3,r.InflateAmount=5,e.DataLabelManager=r}(n=e.dataLabel||(e.dataLabel={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.svg.shapes.Rect,i=t.extensibility.utils.type.Prototype,r=t.extensibility.utils.formatting.textMeasurementService,a=function(){function t(n,a,o){this.grid=[],0!==n.width&&0!==n.height||(this.cellSize=n,this.rowCount=this.colCount=0);var l={fontFamily:e.utils.LabelTextProperties.fontFamily,fontSize:e.utils.LabelTextProperties.fontSize,fontWeight:e.utils.LabelTextProperties.fontWeight};this.cellSize={width:0,height:0};for(var s=0,u=a.length;u>s;s++){var c=a[s];c.labeltext=o.labelText(c);var h=i.inherit(l);h.text=c.labeltext,h.fontSize=c.data?c.data.labelFontSize:c.labelFontSize?c.labelFontSize:e.utils.LabelTextProperties.fontSize,c.size={width:r.measureSvgTextWidth(h),height:r.estimateSvgTextHeight(h)};var f=2*c.size.width,d=2*c.size.height;f>this.cellSize.width&&(this.cellSize.width=f),d>this.cellSize.height&&(this.cellSize.height=d)}0===this.cellSize.width&&(this.cellSize.width=n.width),0===this.cellSize.height&&(this.cellSize.height=n.height),this.colCount=this.getGridRowColCount(this.cellSize.width,n.width,t.ARRANGEGRID_MIN_COUNT,t.ARRANGEGRID_MAX_COUNT),this.rowCount=this.getGridRowColCount(this.cellSize.height,n.height,t.ARRANGEGRID_MIN_COUNT,t.ARRANGEGRID_MAX_COUNT),this.cellSize.width=n.width/this.colCount,this.cellSize.height=n.height/this.rowCount;for(var g=this.grid,p=0;p<this.colCount;p++){g[p]=[];for(var v=0;v<this.rowCount;v++)g[p][v]=[]}}return t.prototype.add=function(t,e){for(var n=this.getGridIndexRect(e),i=this.grid,r=n.left;r<n.right;r++)for(var a=n.top;a<n.bottom;a++)i[r][a].push({element:t,rect:e})},t.prototype.hasConflict=function(t){for(var e=this.getGridIndexRect(t),i=this.grid,r=n.isIntersecting,a=e.left;a<e.right;a++)for(var o=e.top;o<e.bottom;o++)for(var l=0;l<i[a][o].length;l++){var s=i[a][o][l];if(r(s.rect,t))return!0}return!1},t.prototype.getGridRowColCount=function(t,e,n,i){return Math.min(Math.max(Math.ceil(e/t),n),i)},t.prototype.getGridIndexRect=function(t){var e=function(t,e,n){return Math.min(Math.max(t,e),n)};return{left:e(Math.floor(t.left/this.cellSize.width),0,this.colCount),top:e(Math.floor(t.top/this.cellSize.height),0,this.rowCount),right:e(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.colCount),bottom:e(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},t}();a.ARRANGEGRID_MIN_COUNT=1,a.ARRANGEGRID_MAX_COUNT=100,e.DataLabelArrangeGrid=a}(n=e.dataLabel||(e.dataLabel={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n;!function(n){function i(t,e,n,i){return i&&!e||n&&!t?N:_}function r(t,e){t&&(void 0!==t.show&&(e.show=t.show),void 0!==t.showSeries&&(e.show=t.showSeries),void 0!==t.color&&(e.labelColor=t.color.solid.color),void 0!==t.labelDisplayUnits&&(e.displayUnits=t.labelDisplayUnits),void 0!==t.labelPrecision&&(e.precision=t.labelPrecision>=0?t.labelPrecision:n.defaultLabelPrecision),void 0!==t.fontSize&&(e.fontSize=t.fontSize),void 0!==t.showAll&&(e.showLabelPerSeries=t.showAll),void 0!==t.labelStyle&&(e.labelStyle=t.labelStyle),t.labelPosition&&(e.position=t.labelPosition))}function a(t,i,r){return void 0===t&&(t=!1),{show:t,position:e.PointLabelPosition.Above,displayUnits:0,precision:n.defaultLabelPrecision,labelColor:i||n.defaultLabelColor,fontSize:r||n.DefaultFontSizeInPt}}function o(t){var e=a(!1,void 0);return e.position=null,e.labelColor=void 0,e}function l(){return{show:!1,position:e.PointLabelPosition.Above,displayUnits:0,precision:n.defaultLabelPrecision,labelColor:n.defaultLabelColor,fontSize:n.DefaultFontSizeInPt}}function s(t,e){if(t!==n.defaultLabelPrecision)return t;if(\"g\"!==e&&\"G\"!==e){if(e){var i=S.getComponents(e).positive,r=S.getCustomFormatMetadata(i,!0);if(r.hasDots)return r.precision}return A}}function u(t,n,r,a,o,l,s,u){void 0===o&&(o=!1),void 0===u&&(u=!0);var h=new e.DataLabelManager,f=h.hideCollidedLabels(a,t,r,!1,u),d=o&&!!l,g=c(f,n,!1,d);return g?(d?(g.text(function(t){return t.labeltext}).transition().duration(l).style(r.style).style(\"opacity\",s?function(t){return i(t.selected,!1,s,!1)}:1).attr({x:function(t){return t.labelX},y:function(t){return t.labelY}}),g.exit().transition().duration(l).style(\"opacity\",0).remove()):(g.attr({x:function(t){return t.labelX},y:function(t){return t.labelY}}).text(function(t){return t.labeltext}).style(r.style),g.exit().remove()),g):void 0}function c(t,e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),0===t.length)return h(e,!0),null;e.select(L.selectorName).empty()&&e.append(\"g\").classed(L.className,!0);var r=null!=t[0].key,a=null!=t[0].identity,o=r?function(t){return t.key}:a?function(t){return t.identity.getKey()}:void 0,l=n?e.select(L.selectorName).selectAll(F.selectorName).data(t,function(t){return t.data.identity.getKey()}):null!=o?e.select(L.selectorName).selectAll(F.selectorName).data(t,o):e.select(L.selectorName).selectAll(F.selectorName).data(t),s=l.enter().append(\"text\").classed(F.className,!0);return i&&s.style(\"opacity\",0),l}function h(t,e){void 0===e&&(e=!1);var n=[],i=t.selectAll(F.selectorName).data(n);if(i.exit().remove(),t.selectAll(L.selectorName).remove(),e){var r=t.selectAll(k.selectorName).data(n);r.exit().remove(),t.selectAll(E.selectorName).remove()}}function f(t,e,n){t.selectAll(F.selectorName).style(\"fill-opacity\",function(t){var r=i(t.selected,t.highlight,!t.highlight&&e,!t.selected&&n)<1?0:1;return r})}function d(t){var e={text:t.formatter?t.formatter.format(t.label):w.formatValue(t.label,t.format),fontFamily:n.LabelTextProperties.fontFamily,fontSize:P.fromPoint(t.fontSize),fontWeight:n.LabelTextProperties.fontWeight};return M.getTailoredTextOrDefault(e,t.maxWidth?t.maxWidth:n.maxLabelWidth)}function g(t){if(t.dataLabelsSettings){var e={objectName:\"labels\",selector:t.selector,properties:{}};if(t.show&&t.selector?e.properties.showSeries=t.dataLabelsSettings.show:t.show&&(e.properties.show=t.dataLabelsSettings.show),e.properties.color=t.dataLabelsSettings.labelColor||n.defaultLabelColor,t.displayUnits&&(e.properties.labelDisplayUnits=t.dataLabelsSettings.displayUnits),t.precision){var i=t.dataLabelsSettings.precision;e.properties.labelPrecision=i===n.defaultLabelPrecision?null:i}if(t.position&&(e.properties.labelPosition=t.dataLabelsSettings.position,t.positionObject&&(e.validValues={labelPosition:t.positionObject})),t.labelStyle&&(e.properties.labelStyle=t.dataLabelsSettings.labelStyle),t.fontSize&&(e.properties.fontSize=t.dataLabelsSettings.fontSize),t.labelDensity){var r=t.dataLabelsSettings;r&&(e.properties.labelDensity=r.labelDensity)}return t.showAll&&(e.properties.showAll=t.dataLabelsSettings.showLabelPerSeries),t.instances.push(e),e}}function p(t,e,i,r,a){void 0===r&&(r=!1);var o=e?e:l(),s={objectName:\"categoryLabels\",selector:null,properties:{show:r?o.showCategory:o.show,fontSize:e?e.fontSize:n.DefaultFontSizeInPt}};i&&(s.properties.color=o.categoryLabelColor?o.categoryLabelColor:o.labelColor),a&&(s.properties.fontSize=a),t.instances.push(s)}function v(){return{cache:{defaultFormatter:null},getOrCreate:function(t,e,n){if(t){var i={formatString:t,displayUnits:e.displayUnits,precision:s(e.precision,t),value2:n},r=JSON.stringify(i);return this.cache[r]||(this.cache[r]=C.create(m(e,t,n,i.precision))),this.cache[r]}return this.cache.defaultFormatter||(this.cache.defaultFormatter=C.create(m(e,t,n,e.precision))),this.cache.defaultFormatter}}}function m(t,e,n,i){return{displayUnitSystemType:T.DataLabels,format:e,precision:i,value:t.displayUnits,value2:n,allowFormatBeautification:!0}}function y(t,e){return t>e}function x(t,e){return t>e}var b=t.extensibility.utils.formatting.font,S=t.extensibility.utils.formatting.numberFormat,w=t.extensibility.utils.formatting.formattingService,M=t.extensibility.utils.formatting.textMeasurementService,C=t.extensibility.utils.formatting.valueFormatter,T=t.extensibility.utils.formatting.DisplayUnitSystemType,P=t.extensibility.utils.type.PixelConverter,D=t.extensibility.utils.svg.CssConstants.createClassAndSelector;n.maxLabelWidth=50,n.defaultLabelDensity=\"50\",n.DefaultDy=\"-0.15em\",n.DefaultFontSizeInPt=9,n.StandardFontFamily=b.Family.regular.css,n.LabelTextProperties={fontFamily:b.Family.regularSecondary.css,fontSize:P.fromPoint(n.DefaultFontSizeInPt),fontWeight:\"normal\"},n.defaultLabelColor=\"#777777\",n.defaultInsideLabelColor=\"#ffffff\",n.hundredPercentFormat=\"0.00 %;-0.00 %;0.00 %\",n.defaultLabelPrecision=void 0;var A=0,L=D(\"labels\"),E=D(\"lines\"),F=D(\"data-labels\"),k=D(\"line-label\"),N=.4,_=1;n.updateLabelSettingsFromLabelsObject=r,n.getDefaultLabelSettings=a,n.getDefaultColumnLabelSettings=o,n.getDefaultPointLabelSettings=l,n.getLabelPrecision=s,n.drawDefaultLabelsForDataPointChart=u,n.cleanDataLabels=h,n.setHighlightedLabelsOpacity=f,n.getLabelFormattedText=d,n.enumerateDataLabels=g,n.enumerateCategoryLabels=p,n.createColumnFormatterCacheManager=v,n.getOptionsForLabelFormatter=m,n.isTextWidthOverflows=y,n.isTextHeightOverflows=x}(n=e.utils||(e.utils={}))}(n=e.dataLabel||(e.dataLabel={}))}(n=e.chart||(e.chart={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.dataview.DataViewObjects,i=function(){function t(t,e,n){this.colors=t,this.fillProp=e,this.defaultDataPointColor=n}return t.prototype.getColorForSeriesValue=function(t,e){return this.fillProp&&n.getFillColor(t,this.fillProp)||this.defaultDataPointColor||this.colors.getColor(String(e)).value},t.prototype.getColorForMeasure=function(t,e){var i=this.colors.getColor(e).value;return this.fillProp&&n.getFillColor(t,this.fillProp)||this.defaultDataPointColor||i},t.normalizeSelector=function(t,e){return t&&(e||t.data)?{data:t.data}:t},t}();e.ColorHelper=i}(n=e.color||(e.color={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){function n(t,e){var n=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;t=t.replace(n,function(t,e,n,i){return e+e+n+n+i+i});var i=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t),r=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null;return null===r?\"\":e||0===e?\"rgba(\"+r.r+\",\"+r.g+\",\"+r.b+\",\"+e+\")\":\"rgb(\"+r.r+\",\"+r.g+\",\"+r.b+\")\"}function i(t,e){if(0===e)return t;var n=a(t),i=o(n),r=s(i,e),u=l(r);return h(u)}function r(t){var e=a(t);return h(e)}function a(t){if(t.indexOf(\"#\")>=0){if(7===t.length){var e=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t);if(null==e||e.length<4)return;return{R:parseInt(e[1],16),G:parseInt(e[2],16),B:parseInt(e[3],16)}}if(4===t.length){var e=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i.exec(t);if(null==e||e.length<4)return;return{R:parseInt(e[1]+e[1],16),G:parseInt(e[2]+e[2],16),B:parseInt(e[3]+e[3],16)}}}else{if(t.indexOf(\"rgb(\")>=0){var e=/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/.exec(t);if(null==e||e.length<4)return;return{R:parseInt(e[1],10),G:parseInt(e[2],10),B:parseInt(e[3],10)}}if(t.indexOf(\"rgba(\")>=0){var e=/^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d*(?:\\.\\d+)?)\\)$/.exec(t);if(null==e||e.length<5)return;return{R:parseInt(e[1],10),G:parseInt(e[2],10),B:parseInt(e[3],10),A:parseFloat(e[4])}}}}function o(t){var e,n,i=t.R/255,r=t.G/255,a=t.B/255,o=Math.min(i,Math.min(r,a)),l=Math.max(i,Math.max(r,a)),s=l,u=l-o;return 0===l||0===u?(e=0,n=0):(e=u/l,n=i===l?(r-a)/u:r===l?2+(a-i)/u:4+(i-r)/u),n/=6,0>n&&(n+=1),{H:n,S:e,V:s}}function l(t){var e,n,i,r=t.H,a=t.S,o=t.V;if(0===a)e=o,n=o,i=o;else{var l=void 0,s=void 0,u=void 0,c=void 0,h=void 0,f=void 0;switch(f=6*r,h=Math.floor(f),c=f-h,l=o*(1-a),s=o*(1-a*c),u=o*(1-a*(1-c)),h){case 0:e=o,n=u,i=l;break;case 1:e=s,n=o,i=l;break;case 2:e=l,n=o,i=u;break;case 3:e=l,n=s,i=o;break;case 4:e=u,n=l,i=o;break;case 5:e=o,n=l,i=s}}return{R:Math.floor(255*e),G:Math.floor(255*n),B:Math.floor(255*i)}}function s(t,e){var n=t.H+e;return{H:n>1?n-1:n,S:t.S,V:t.V}}function u(t,e){var n=Math.floor(e);return{R:Math.max(0,t.R-n),G:Math.max(0,t.G-n),B:Math.max(0,t.B-n)}}function c(t){return null==t.A?\"rgb(\"+t.R+\",\"+t.G+\",\"+t.B+\")\":\"rgba(\"+t.R+\",\"+t.G+\",\"+t.B+\",\"+t.A+\")\"}function h(t){return\"#\"+v(t.R)+v(t.G)+v(t.B)}function f(t,e,n){return h(d(a(t),e,a(n)))}function d(t,e,n){return e=x.ensureInRange(e,0,1),{R:g(t.R,e,n.R),G:g(t.G,e,n.G),B:g(t.B,e,n.B)}}function g(t,e,n){return e=x.ensureInRange(e,0,1),t=x.ensureInRange(t,0,255),n=x.ensureInRange(n,0,255),Math.round(e*t+(1-e)*n)}function p(t,e,n){var i=o(t);return(e+n>1||0>=e||0>=n)&&(e=.8,n=.2),i.V<e?i.V=i.V+n:i.V=i.V-n,h(l(i))}function v(t){var e=x.ensureInRange(t,0,255),n=e.toString(16).toUpperCase();return 1===n.length?\"0\"+n:n}function m(t,e,n){var i=e.map(function(t){return a(t)});return function(r){if(null==r&&(r=0),!isNaN(r)){if(n){if(r>=t[t.length-1])return e[e.length-1];if(r<=t[0])return e[0]}for(var a,o,l,s,u=1,c=t.length;c>u;u++){if(a=t[u-1],o=t[u],o===r)return e[u];if(r>=a&&o>=r){l=i[u-1],s=i[u];break}}var f={R:Math.round((r-a)*(s.R-l.R)/(o-a)+l.R),G:Math.round((r-a)*(s.G-l.G)/(o-a)+l.G),B:Math.round((r-a)*(s.B-l.B)/(o-a)+l.B)};return h(f)}}}function y(t,e){var n=parseInt(t.slice(1),16),i=0>e?0:255,r=0>e?-1*e:e,a=n>>16,o=n>>8&255,l=255&n,s=\"#\"+(16777216+65536*(Math.round((i-a)*r)+a)+256*(Math.round((i-o)*r)+o)+(Math.round((i-l)*r)+l)).toString(16).slice(1);return s}var x=t.extensibility.utils.type.Double;e.hexToRGBString=n,e.rotate=i,e.normalizeToHexString=r,e.parseColorString=a,e.darken=u,e.rgbString=c,e.hexString=h,e.hexBlend=f,e.rgbBlend=d,e.channelBlend=g,e.calculateHighlightColor=p,e.createLinearColorScale=m,e.shadeColor=y}(n=e.color||(e.color={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.Axis=null,this.Legend=null,this.Value=null,this.ColorSaturation=null,this.Tooltips=null,this.ColumnBy=null,this.RowBy=null,this.GroupedValues=null}return t}();t.VisualColumns=e;var n;!function(t){t[t.X=\"x\"]=\"X\",t[t.Y=\"y\"]=\"Y\"}(n=t.ScrollableAxisName||(t.ScrollableAxisName={}))}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.dataview.converterHelper,r=t.extensibility.utils.formatting.valueFormatter,a=t.extensibility.utils.color.ColorHelper;!function(t){t[t.Axis=\"Axis\"]=\"Axis\",t[t.Legend=\"Legend\"]=\"Legend\",t[t.Value=\"Value\"]=\"Value\",t[t.Gradient=\"Gradient\"]=\"Gradient\",t[t.ColumnBy=\"ColumnBy\"]=\"ColumnBy\",t[t.RowBy=\"RowBy\"]=\"RowBy\",t[t.Tooltips=\"Tooltips\"]=\"Tooltips\",t[t.GroupedValues=\"GroupedValues\"]=\"GroupedValues\"}(n=e.Field||(e.Field={}));var o=function(){function t(){}return t.Convert=function(t,e,n,i){return this.IsAxisAndLegendSameField(t)?this.GetDataPointsForSameAxisAndLegend(t,e,i):this.IsLegendFilled(t)?this.GetDataPointsForLegend(t,e,i):this.IsMultipleValues(t)?this.GetDataPointsForMultipleValues(t,e,i):this.GetDataPointsWithoutLegend(t,e,n)},t.IsLegendNeeded=function(t){return this.IsLegendFilled(t)||this.IsMultipleValues(t)},t.IsAxisFilled=function(t){if(t.categorical&&t.categorical.values&&t.categorical.values.source&&t.categorical.values.source.roles[n.Axis])return!0;var e=t.categorical.categories;return!(!e||!e.filter(function(t){return t.source&&t.source.roles[n.Axis]}).length)},t.IsCategoryFilled=function(t,e){if(t.categorical&&t.categorical.values&&t.categorical.values.source&&t.categorical.values.source.roles[e])return!0;var n=t.categorical.categories;return!(!n||!n.filter(function(t){return t.source&&t.source.roles[e]}).length)},t.IsValueFilled=function(t){var e=t.categorical.values;return e?!!(e.source&&e.source.roles[n.Value]||e.filter(function(t){return t.source&&t.source.roles[n.Value]}).length):!1},t.IsAxisAndLegendSameField=function(t){var e=t.categorical.values;return!!(e.source&&e.source.roles[n.Legend]&&e.source.roles[n.Axis])},t.IsLegendFilled=function(t){var e=t.categorical.values;return!(!e.source||!e.source.roles[n.Legend])},t.IsMultipleValues=function(t){var e=t.metadata.columns,i=0;for(var r in e){var a=e[r];if(a.roles&&a.roles[n.Value]&&(++i,i>1))return!0}return!1},t.GetDataPointsForSameAxisAndLegend=function(t,e,i){var r=this,a=this.GetGroupedValueColumns(t),o=[],l=a[n.GroupedValues],s=l.grouped?l.grouped():null;return a[n.Legend].forEach(function(t,u){var c=a[n.Value][u].values[0],h=i[u],f=[],d=a[n.GroupedValues].source,g=a[n.Value][u].source;f.push(r.createTooltipData(d,t)),f.push(r.createPercentTooltipData(g,c,1)),a[n.Tooltips]&&a[n.Tooltips].length&&a[n.Tooltips].filter(function(e){return e.source.groupName===t}).forEach(function(t){var e=t.values[u],n=t.source;f.push(r.createTooltipData(n,e))});var p=e.createSelectionIdBuilder().withSeries(a[n.GroupedValues],s[u]).withMeasure(l[u].source.queryName).createSelectionId();if(null!=c){o.push({category:0===t||t?t:r.Blank,series:t,value:c,percentValueForHeight:1,shiftValue:c>=0?0:-1,percentValue:1,selected:!1,identity:p,color:h,tooltips:f});var v=a[n.Value][u].highlights?a[n.Value][u].highlights[0]:null;if(null!=v){var m=f.slice();m.push(r.createPercentTooltipData(g,v,1,r.Highlighted)),o.push({category:0===t||t?t:r.Blank,series:t,value:v,percentValue:1,percentValueForHeight:1,shiftValue:v>=0?0:-1,selected:!1,identity:p,highlight:!0,color:h,tooltips:m})}}}),o},t.GetDataPointsForLegend=function(t,e,i){var r=this,a=this.GetGroupedValueColumns(t),o=[],l=a[n.Axis][0],s=a[n.GroupedValues],u=s.grouped?s.grouped():null;return l.values.forEach(function(t,c){var h=0,f=0,d=a[n.ColumnBy]&&a[n.ColumnBy][0].values[c],g=a[n.RowBy]&&a[n.RowBy][0].values[c],p=d3.sum(a[n.Value].map(function(t){return t.values[c]>=0?t.values[c]:-t.values[c]}));a[n.Legend].forEach(function(v,m){var y=a[n.Value][m].values[c],x=y/p,b=i[m],S=e.createSelectionIdBuilder().withCategory(l,c).withSeries(s,u[m]).withMeasure(s[m].source.queryName).createSelectionId();if(null!=y){var w=[],M=l.source,C=a[n.GroupedValues].source,T=a[n.Value][m].source;w.push(r.createTooltipData(M,t)),w.push(r.createTooltipData(C,v)),w.push(r.createPercentTooltipData(T,y,x)),a[n.Tooltips]&&a[n.Tooltips].length&&a[n.Tooltips].filter(function(t){return t.source.groupName===v}).forEach(function(t){var e=t.values[c],n=t.source;w.push(r.createTooltipData(n,e))}),o.push({category:0===t||t?t:\"(Blank)\",series:v,value:y,percentValue:x,percentValueForHeight:x>0?x:-x,shiftValue:y>0?h:f+x,selected:!1,identity:S,tooltips:w,color:b,columnBy:d,rowBy:g});var P=a[n.Value][m].highlights?a[n.Value][m].highlights[c]:null;if(null!=P){var D=P/p,A=w.slice();A.push(r.createPercentTooltipData(T,y,x,r.Highlighted)),o.push({category:0===t||t?t:\"(Blank)\",series:v,value:P,percentValue:D,percentValueForHeight:D>=0?D:-D,shiftValue:P>=0?h:f,selected:!1,identity:S,highlight:!0,tooltips:A,color:b,columnBy:d,rowBy:g})}h+=x>=0?x:0,f+=0>x?x:0}})}),o},t.GetDataPointsForMultipleValues=function(t,e,i){var r=this,a=this.GetColumnsForMultipleValues(t),o=[],l=a[n.Axis][0];return l.values.forEach(function(t,s){var u=0,c=0,h=d3.sum(a[n.Value].map(function(t){return t.values[s]>=0?t.values[s]:-t.values[s]}));a[n.Value].forEach(function(f,d){var g=f.values[s],p=i[d],v=g/h,m=a[n.ColumnBy]&&a[n.ColumnBy][0].values[s],y=a[n.RowBy]&&a[n.RowBy][0].values[s],x=e.createSelectionIdBuilder().withCategory(l,s).withMeasure(a.Value[d].source.queryName).createSelectionId();if(null!=g){var b=[],S=l.source,w=f.source;b.push(r.createTooltipData(S,t)),b.push(r.createPercentTooltipData(w,g,v)),a[n.Tooltips]&&a[n.Tooltips].length&&a[n.Tooltips].forEach(function(t){var e=t.values[s],n=t.source;b.push(r.createTooltipData(n,e))}),o.push({category:0===t||t?t:\"(Blank)\",value:v,percentValue:v,percentValueForHeight:v>0?v:-v,shiftValue:g>0?u:c+v,selected:!1,identity:x,tooltips:b,color:p,columnBy:m,rowBy:y});var M=f.highlights?f.highlights[s]:null;if(null!=M){var C=M/h,T=b.slice();T.push(r.createPercentTooltipData(w,M,C,r.Highlighted)),o.push({category:0===t||t?t:\"(Blank)\",value:C,percentValue:C,percentValueForHeight:C>=0?C:-C,shiftValue:C>=0?u:c+C,selected:!1,identity:x,highlight:!0,tooltips:b,color:p,columnBy:m,rowBy:y})}u+=v>=0?v:0,c+=0>v?v:0}})}),o},t.GetDataPointsWithoutLegend=function(t,e,i){var r=this,o=this.GetColumnsWithNoLegend(t),l=[],s=o[n.Axis][0],u=new a(e.colorPalette,{objectName:\"dataPoint\",propertyName:\"fill\"},i.dataPoint.fill);return s.values.forEach(function(t,i){var a=o[n.Value].values[i],c=o[n.Gradient],h=c&&c.values[i]?o[n.Gradient].values[i]:null,f=o[n.ColumnBy]&&o[n.ColumnBy][0].values[i],d=o[n.RowBy]&&o[n.RowBy][0].values[i],g=e.createSelectionIdBuilder().withCategory(s,i).createSelectionId();if(null!=a){var p=u.getColorForMeasure(s.objects&&s.objects[i],\"\"),v=[],m=s.source,y=o[n.Value].source;v.push(r.createTooltipData(m,t)),v.push(r.createPercentTooltipData(y,a,1)),o[n.Tooltips]&&o[n.Tooltips].length&&o[n.Tooltips].forEach(function(t){var e=t.values[i],n=t.source;v.push(r.createTooltipData(n,e))}),l.push({category:0===t||t?t:\"(Blank)\",value:a,percentValue:1,percentValueForHeight:1,shiftValue:a>=0?0:-1,colorSaturation:h,selected:!1,identity:g,color:p,tooltips:v,columnBy:f,rowBy:d});var x=o[n.Value].highlights?o[n.Value].highlights[i]:null;if(null!=x){var b=v.slice();b.push(r.createPercentTooltipData(y,x,1,r.Highlighted));var S=x/a;l.push({category:0===t||t?t:\"(Blank)\",value:x,percentValue:S,percentValueForHeight:S,shiftValue:x>=0?0:-S,selected:!1,identity:g,highlight:!0,color:p,tooltips:b,columnBy:f,rowBy:d})}}}),l},t.GetGroupedValueColumns=function(t){var i=t&&t.categorical,r=i&&i.categories||[],a=i&&i.values,o=i&&a.source&&this.getSeriesValues(t),l=a&&a.grouped(),s=new e.VisualColumns;if(l&&(s[n.GroupedValues]=a,l.forEach(function(t){var e=function(e){var n=t.values.filter(function(t){return t.source.roles[e]});n.length&&(s[e]?(i=s[e]).push.apply(i,n):s[e]=n);var i};for(var n in s)e(n)})),i){var u=function(t){var e=r.filter(function(e){return e.source.roles[t]});e.length&&(s[t]=e)};for(var c in s)u(c)}return o&&(s[n.Legend]=o.filter(function(t,e,n){return n.indexOf(t)===e})),s},t.GetColumnsForMultipleValues=function(t){var i=t&&t.categorical,r=i&&i.categories||[],a=i&&i.values,o=new e.VisualColumns;if(i&&a){var l=a.filter(function(t){return t.source.roles[n.Value]});l.length&&(o[n.Value]||(o[n.Value]=l));var s=a.filter(function(t){return t.source.roles[n.Tooltips]});s.length&&(o[n.Tooltips]||(o[n.Tooltips]=s));var u=function(t){var e=r.filter(function(e){return e.source.roles[t]});e.length&&(o[t]=e)};for(var c in o)u(c)}return o},t.GetColumnsWithNoLegend=function(t){var i=t&&t.categorical,r=i&&i.categories||[],a=i&&i.values,o=new e.VisualColumns;if(i&&a){var l=a.filter(function(t){return t.source.roles[n.Value]});l.length&&(o[n.Value]||(o[n.Value]=l[0]));var s=a.filter(function(t){return t.source.roles[n.Tooltips]});s.length&&(o[n.Tooltips]||(o[n.Tooltips]=s));var u=function(t){var e=r.filter(function(e){return e.source.roles[t]});e.length&&(o[t]=e)};for(var c in o)u(c)}return o},t.createTooltipData=function(t,e,n){return{displayName:n?n:t.displayName,value:this.getFormattedValue(t,e)}},t.createPercentTooltipData=function(t,e,n,i){return{displayName:i?i:t.displayName,value:this.getFormattedValue(t,e)+\" (\"+r.format(n,this.percentFormatString)+\")\"}},t.getSeriesValues=function(t){return t&&t.categorical&&t.categorical.values&&t.categorical.values.map(function(t){return i.getSeriesName(t.source)})},t.getFormattedValue=function(t,e){var n=this.getFormatStringFromColumn(t);return r.format(e,n)},t.getFormatStringFromColumn=function(t){if(t){var e=r.getFormatStringByColumn(t,!1);return e||t.format}return null},t}();o.Highlighted=\"Highlighted\",o.Blank=\"(Blank)\",o.percentFormatString=\"#,0.00%\",e.DataViewConverter=o}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){\"use strict\";var n=t.extensibility.utils.dataview.DataViewObjectsParser,i='\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif',r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectionSaveSettings={selection:[]},e.dataPoint=new u,e.smallMultiple=new b,e.legend=new p,e.categoryAxis=new v,e.valueAxis=new m,e.categoryLabels=new y,e.constantLine=new x,e}return __extends(e,t),\ne}(n);e.VisualSettings=r;var a;!function(t){t[t.Common=\"common\"]=\"Common\",t[t.Separate=\"separate\"]=\"Separate\",t[t.Custom=\"custom\"]=\"Custom\"}(a=e.AxisRangeType||(e.AxisRangeType={}));var o;!function(t){t[t.Flow=\"flow\"]=\"Flow\",t[t.Matrix=\"matrix\"]=\"Matrix\"}(o=e.LayoutMode||(e.LayoutMode={}));var l;!function(t){t[t.Auto=\"auto\"]=\"Auto\",t[t.InsideEnd=\"end\"]=\"InsideEnd\",t[t.InsideBase=\"base\"]=\"InsideBase\",t[t.InsideCenter=\"center\"]=\"InsideCenter\"}(l=e.LabelPosition||(e.LabelPosition={}));var s;!function(t){t[t.Vertical=\"vertical\"]=\"Vertical\",t[t.Horizontal=\"horizontal\"]=\"Horizontal\"}(s=e.LabelOrientation||(e.LabelOrientation={}));var u=function(){function t(){this.fill=\"#01b8aa\",this.showAllDataPoints=!0}return t}();e.dataPointSettings=u;var c;!function(t){t[t.Dashed=\"dashed\"]=\"Dashed\",t[t.Solid=\"solid\"]=\"Solid\",t[t.Dotted=\"dotted\"]=\"Dotted\"}(c=e.LineStyle||(e.LineStyle={}));var h;!function(t){t[t.Behind=\"behind\"]=\"Behind\",t[t.InFront=\"front\"]=\"InFront\"}(h=e.Position||(e.Position={}));var f;!function(t){t[t.Name=\"name\"]=\"Name\",t[t.Value=\"value\"]=\"Value\",t[t.NameAndValue=\"nameAndValue\"]=\"NameAndValue\"}(f=e.Text||(e.Text={}));var d;!function(t){t[t.Left=\"left\"]=\"Left\",t[t.Right=\"right\"]=\"Right\"}(d=e.HorizontalPosition||(e.HorizontalPosition={}));var g;!function(t){t[t.Top=\"top\"]=\"Top\",t[t.Bottom=\"bottom\"]=\"Bottom\"}(g=e.VerticalPosition||(e.VerticalPosition={}));var p=function(){function t(){this.show=!0,this.position=\"Top\",this.showTitle=!0,this.legendName=\"\",this.legendNameColor=\"\",this.fontFamily=i,this.fontSize=8}return t}();e.legendSettings=p;var v=function(){function t(){this.show=!0,this.position=\"top\",this.axisType=\"categorical\",this.axisScale=\"linear\",this.rangeType=a.Common,this.rangeTypeNoScalar=a.Common,this.start=null,this.end=null,this.axisColor=\"\",this.fontSize=11,this.fontFamily=i,this.displayUnits=0,this.precision=null,this.minCategoryWidth=20,this.maximumSize=25,this.innerPadding=20,this.showTitle=!1,this.titleStyle=\"showTitleOnly\",this.axisTitleColor=\"\",this.axisTitle=\"\",this.titleFontSize=11,this.titleFontFamily=i}return t}();e.categoryAxisSettings=v;var m=function(){function t(){this.show=!0,this.position=\"left\",this.axisScale=\"linear\",this.rangeType=a.Common,this.start=null,this.end=null,this.axisColor=\"\",this.fontSize=11,this.fontFamily=i,this.displayUnits=0,this.precision=null,this.showTitle=!1,this.titleStyle=\"showTitleOnly\",this.axisTitleColor=\"\",this.axisTitle=\"\",this.titleFontSize=11,this.titleFontFamily=i,this.showGridlines=!0,this.gridlinesColor=\"\",this.strokeWidth=1,this.lineStyle=\"solid\"}return t}();e.valueAxisSettings=m;var y=function(){function t(){this.show=!1,this.color=\"\",this.displayUnits=0,this.precision=0,this.orientation=s.Horizontal,this.labelPosition=l.Auto,this.overflowText=!1,this.fontSize=9,this.fontFamily=i,this.showBackground=!1,this.transparency=90,this.backgroundColor=\"\"}return t}();e.categoryLabelsSettings=y;var x=function(){function t(){this.show=!1,this.name=\"\",this.value=0,this.lineColor=\"#01b8aa\",this.transparency=90,this.lineStyle=c.Dotted,this.position=h.Behind,this.dataLabelShow=!1,this.fontColor=\"#01b8aa\",this.text=f.Name,this.horizontalPosition=d.Left,this.verticalPosition=g.Top,this.displayUnits=0,this.precision=null}return t}();e.constantLineSettings=x;var b=function(){function t(){this.layoutMode=o.Flow,this.minUnitWidth=150,this.minUnitHeight=120,this.maxRowWidth=4,this.showChartTitle=!0,this.textcolor=\"#000000\",this.fontFamily=i,this.fontSize=9,this.fontColor=\"#000000\",this.showSeparators=!0}return t}();e.smallMultipleSettings=b}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(t,e,n){var c,h,f=\"\",d=\"\",g=i(e,o),p=r(t,a),v=i(e,l);if(e&&e.length){var m=e[0];g>=0&&(c=m.values[g].source,f=m.values[g].source.displayName),p>=0&&(h=t[p].source,d=t[p].source.displayName)}return{idx:{category:p,value:g,gradient:v,columnBy:r(t,s),rowBy:r(t,u)},cols:{value:c,category:h},labels:{x:f,y:d},groupingColumn:n}}var i=t.extensibility.utils.dataview.DataRoleHelper.getMeasureIndexOfRole,r=t.extensibility.utils.dataview.DataRoleHelper.getCategoryIndexOfRole,a=\"Axis\",o=\"Value\",l=\"Gradient\",s=\"ColumnBy\",u=\"RowBy\";e.getMetadata=n}(n=e.metadataUtils||(e.metadataUtils={}))}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){var n;!function(t){t[t.Disable=\"disable\"]=\"Disable\",t[t.Enable=\"enable\"]=\"Enable\"}(n=e.ScrollbarState||(e.ScrollbarState={}));var i=function(){function e(t){this.settings={trackSize:10,trackMargin:10,minCategorySpace:25},this.allow=!0,this.enabled=!1,this.scrolling={active:!1,mousedownClientCoord:0,mousemoveStartCoord:0,currentCoord:0,positionsCount:0,currentPosition:0},this.track={el:null,left:0,top:0,width:0,height:0,availableScrollDistance:1},this.visual=t}return e.prototype.init=function(t){var e=this;this.htmlElement=d3.select(\"html\"),this.mainElement=t,this.track.el=this.mainElement.append(\"div\").classed(\"scrollbar-track\",!0),this.handle=this.track.el.append(\"button\").classed(\"scrollbar-handle\",!0),this.handle.on(\"mousedown\",function(){e.onMousedown()}),this.htmlElement.on(\"mousemove\",function(){e.onMousemove()}).on(\"mouseup\",function(){e.onMouseup()}),this.mainElement.on(\"wheel\",function(){e.onMousewheel()})},e.prototype.update=function(){this.enabled&&this.updateMeasurements()},e.prototype.updateData=function(e,i){this.settings.minCategorySpace=this.visual.getSettings().categoryAxis.minCategoryWidth;var r=this.visual.viewport.width-this.visual.visualMargin.left-this.visual.visualMargin.right;if(this.capacity=Math.floor(r/this.settings.minCategorySpace),this.scrolling.positionsCount=this.visual.categoriesCount-this.capacity,this.allow&&e===n.Enable&&this.scrolling.positionsCount>0){this.enable();var a=36;i===t.VisualUpdateType.Resize||i===a?this.correctScrollingPosition():this.updateScrollingPosition(0),this.updateHandlerTranslateY(!0),this.determineDataOfVisibleItems()}else this.disable()},e.prototype.isEnabled=function(){return this.enabled},e.prototype.getScrollPosition=function(){return this.scrolling.currentPosition},e.prototype.getVisibleDataPoints=function(){return this.visibleDataPoints},e.prototype.getIndexOfFirstVisibleDataPoint=function(){for(var t=this.visual.getAllDataPoints().filter(function(t){return!t.highlight}),e=this.visibleDataPoints[0],n=0;n<t.length;n++)if(t[n]===e)return n;return null},e.prototype.onMousedown=function(){if(this.enabled){this.scrolling.active=!0;var t=d3.event;this.scrolling.mousedownClientCoord=t.clientX,this.scrolling.mousemoveStartCoord=this.scrolling.currentCoord}},e.prototype.onMousemove=function(){if(this.scrolling.active){var t=d3.event;this.scrolling.currentCoord=this.scrolling.mousemoveStartCoord+(t.clientX-this.scrolling.mousedownClientCoord),this.updateHandlerTranslateY(),this.updateScrollingPosition(),this.determineDataOfVisibleItems(),this.visual.onScrollPosChanged()}},e.prototype.onMouseup=function(){this.scrolling.active&&(this.scrolling.active=!1,this.scrolling.mousemoveStartCoord=0)},e.prototype.onMousewheel=function(){if(this.enabled){var t=d3.event;t.deltaY>0?this.updateScrollingPosition(1,!0):this.updateScrollingPosition(-1,!0),this.updateHandlerTranslateY(!0),this.determineDataOfVisibleItems(),this.visual.onScrollPosChanged()}},e.prototype.enable=function(){this.enabled=!0,this.track.el.style(\"display\",\"block\")},e.prototype.disable=function(){this.enabled=!1,this.visibleDataPoints=this.visual.getAllDataPoints(),this.track.el.style(\"display\",\"\")},e.prototype.determineDataOfVisibleItems=function(){this.visibleDataPointsByCategories=[],this.visibleDataPoints=[];for(var t=this.visual.getDataPointsByCategories(),e=0;e<t.length;e++)if(!(e<this.scrolling.currentPosition)){if(e>=this.scrolling.currentPosition+this.capacity)break;this.visibleDataPointsByCategories.push(t[e]),(n=this.visibleDataPoints).push.apply(n,t[e].dataPoints)}var n},e.prototype.correctScrollingPosition=function(){this.scrolling.currentPosition<0?this.scrolling.currentPosition=0:this.scrolling.currentPosition>=this.scrolling.positionsCount&&(this.scrolling.currentPosition=this.scrolling.positionsCount)},e.prototype.updateScrollingPosition=function(t,e){null==t?this.scrolling.currentPosition=Math.round(this.scrolling.currentCoord/this.track.availableScrollDistance*this.scrolling.positionsCount):e?this.scrolling.currentPosition+=t:this.scrolling.currentPosition=t,this.correctScrollingPosition()},e.prototype.updateMeasurements=function(){var t=this.visual.getVisualTranslation(),e=this.track,n=\"left\"===this.visual.settings.valueAxis.position?this.visual.axesSize.yAxisWidth+this.visual.yTickOffset:0;e.height=this.settings.trackSize,e.width=this.visual.visualSize.width,e.left=t.x+n,e.top=this.visual.viewport.height-this.settings.trackSize;var i=this.visual.settings.legend.position;\"Left\"===i||\"LeftCenter\"===i?e.left+=this.visual.legendSize.width:\"Bottom\"!==i&&\"BottomCenter\"!==i||(e.top-=this.visual.legendSize.height),e.el.style({top:this.track.top+\"px\",left:this.track.left+\"px\",height:this.track.height+\"px\",width:this.track.width+\"px\"});var r,a=this.visibleDataPointsByCategories.length,o=this.visual.getDataPointsByCategories().length;r=e.width*(a/o),this.handle.style(\"width\",r+\"px\"),e.availableScrollDistance=e.width-r},e.prototype.updateHandlerTranslateY=function(t){t&&(this.scrolling.currentCoord=Math.round(this.scrolling.currentPosition/this.scrolling.positionsCount*this.track.availableScrollDistance)),this.scrolling.currentCoord<0?this.scrolling.currentCoord=0:this.scrolling.currentCoord>this.track.availableScrollDistance&&(this.scrolling.currentCoord=this.track.availableScrollDistance);var e=\"translateX(\"+this.scrolling.currentCoord+\"px)\";this.handle.style(\"transform\",e)},e}();e.ScrollBar=i}(n=e.visualUtils||(e.visualUtils={}))}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){var n={objectName:\"selectionSaveSettings\",selector:void 0,properties:{selection:JSON.stringify(t)}};e.persistProperties({replace:[n]})}t.saveSelection=e}(e=t.selectionSaveUtils||(t.selectionSaveUtils={}))}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){var n=function(){function n(t){this.selection={action:\"add\",active:!1,mousemoved:!1},this.selectionStates=[],this.visual=t}return n.prototype.init=function(t){var e=this;this.selection.rect||(this.selection.rect=t.append(\"div\").classed(\"selection-rect\",!0).classed(\"selection-rect-normal-chart\",!0),this.selection.rect_node=this.selection.rect.node()),d3.select(\".bar-chart-svg\").on(\"mousedown.selection\",function(){e.onMousedown()}),d3.select(\"html\").on(\"mousemove.selection\",function(){e.onMousemove()}).on(\"mouseup.selection\",function(){e.onMouseup()})},n.prototype.update=function(t){this.visibleBars=[];var e=this.visibleBars;t.each(function(t,n,i){e.push(this)})},n.prototype.disable=function(){this.emptySelection(),d3.select(\".bar-chart-svg\").on(\"mousedown.selection\",null),d3.select(\"html\").on(\"mousemove.selection\",null).on(\"mouseup.selection\",null)},n.prototype.getSelectionStates=function(){return this.selectionStates},n.prototype.onMousedown=function(){var t=d3.event;this.selection.active=!0,this.selection.clickEvent=t,e=[t.clientX,t.clientY],this.selection.startX=e[0],this.selection.startY=e[1],this.setRectPos(t.clientX,t.clientY),this.showRect(),t.ctrlKey||this.emptySelection(),this.indexOfFirstVisibleDataPoint=this.visual.scrollBar.getIndexOfFirstVisibleDataPoint();var e},n.prototype.onMousemove=function(){if(this.selection.active){var t=d3.event;if(this.selection.mousemoved||t.clientX!==this.selection.clickEvent.clientX||t.clientY!==this.selection.clickEvent.clientY){this.selection.mousemoved||(t.ctrlKey||(this.visual.webBehaviorSelectionHandler.handleClearSelection(),this.visual.saveSelection()),this.selection.mousemoved=!0),this.calculateRectDimensions({x:t.clientX,y:t.clientY}),this.setRectPos(this.selection.x,this.selection.y),this.setRectSize(this.selection.width,this.selection.height);for(var e=this.indexOfFirstVisibleDataPoint,n=0;n<this.visibleBars.length;n++){var i=this.detectCollision(this.visibleBars[n]),r=this.selectionStates[e+n];if(i){if((-1===this.selectionStates.indexOf(\"justSelected\")||this.selectionStates.indexOf(\"justRemoved\")>-1)&&\"selected\"===r){this.selection.action=\"remove\",this.selectionStates[e+n]=\"justRemoved\";continue}\"add\"===this.selection.action&&\"selected\"!==r&&\"justSelected\"!==r?this.selectionStates[e+n]=\"justSelected\":\"remove\"===this.selection.action&&\"selected\"==r&&null!=r&&(this.selectionStates[e+n]=\"justRemoved\")}else\"add\"===this.selection.action&&\"justSelected\"===r&&(this.selectionStates[e+n]=null)}this.isEntireCategorySelection()&&this.selectEntireCategories(),this.updateFillOpacity()}}},n.prototype.onMouseup=function(){if(!this.selection.active)return void this.deactivateRect();if(!this.selection.mousemoved){var t=this.selection.clickEvent.target,e=this.indexOfFirstVisibleDataPoint;if(d3.select(t).classed(this.visual.barClassName)){var n=this.visibleBars.indexOf(t);this.selection.clickEvent.ctrlKey&&null!=this.selectionStates[e+n]?this.selectionStates[e+n]=\"justRemoved\":this.selectionStates[e+n]=\"justSelected\",this.isEntireCategorySelection()&&this.selectEntireCategories()}}this.deactivateRect(),this.applySelectionToTheVisual()},n.prototype.isEntireCategorySelection=function(){var e=this.visual.getDataView();return t.DataViewConverter.IsMultipleValues(e)&&!t.DataViewConverter.IsLegendFilled(e)&&(-1!==this.selectionStates.indexOf(\"justSelected\")||-1!==this.selectionStates.indexOf(\"justRemoved\"))},n.prototype.selectEntireCategories=function(){for(var t=this.visual.getDataPointsByCategories(),e=0,n=0;n<t.length;n++){for(var i=t[n].dataPoints,r=e,a=[],o=0;o<i.length;o++){var l=this.selectionStates[e];a.push(l),e++}if(-1!==a.indexOf(\"justRemoved\"))for(var s=0;s<a.length;s++)this.selectionStates[r+s]=\"justRemoved\";else if(-1!==a.indexOf(\"selected\")||-1!==a.indexOf(\"justSelected\"))for(var s=0;s<a.length;s++)\"selected\"!==this.selectionStates[r+s]&&(this.selectionStates[r+s]=\"justSelected\")}},n.prototype.applySelectionToTheVisual=function(){if(this.selectionStates.indexOf(\"justSelected\")>-1&&-1!==this.selectionStates.indexOf(\"justRemoved\"))throw new Error('\"justSelected\" and \"justRemoved\" items can\\'t appear at the same time!');for(var t=this.visual.getAllDataPoints(),e=[],n=d3.event.ctrlKey,i=0;i<t.length;i++)switch(this.selectionStates[i]){case\"justSelected\":this.selectionStates[i]=\"selected\",e.push(t[i]);break;case\"justRemoved\":this.selectionStates[i]=null,e.push(t[i])}var r=this.getSelectedDataPoints();e.length>0?this.visual.webBehaviorSelectionHandler.handleSelection(e,n):0===r.length&&this.visual.webBehaviorSelectionHandler.handleClearSelection(),this.visual.saveSelection()},n.prototype.getSelectedDataPoints=function(){for(var t=this.visual.getAllDataPoints(),e=[],n=0;n<t.length;n++)\"selected\"===this.selectionStates[n]&&e.push(t[n]);return e},n.prototype.updateFillOpacity=function(){var t=this.indexOfFirstVisibleDataPoint;if(-1===this.selectionStates.indexOf(\"selected\")&&-1===this.selectionStates.indexOf(\"justSelected\"))for(var n=0;n<this.visibleBars.length;n++)d3.select(this.visibleBars[n]).style({\"fill-opacity\":e.DefaultOpacity});else for(var n=0;n<this.visibleBars.length;n++){var i=this.visibleBars[n],r=d3.select(i);\"selected\"===this.selectionStates[n+t]||\"justSelected\"===this.selectionStates[n+t]?r.style({\"fill-opacity\":e.DefaultOpacity}):r.style({\"fill-opacity\":e.DimmedOpacity})}},n.prototype.emptySelection=function(){this.selectionStates=[]},n.prototype.showRect=function(){this.selection.rect.classed(\"selection-rect-active\",!0)},n.prototype.hideRect=function(){this.selection.rect.classed(\"selection-rect-active\",!1)},n.prototype.setRectPos=function(t,e){this.selection.rect.style({left:t.toString()+\"px\",top:e.toString()+\"px\"})},n.prototype.setRectSize=function(t,e){this.selection.rect.style({width:t.toString()+\"px\",height:e.toString()+\"px\"})},n.prototype.calculateRectDimensions=function(t){var e=this.selection;e.startX<=t.x?(e.x=e.startX,e.width=t.x-e.startX,e.endX=e.x+e.width):(e.x=t.x,e.width=e.startX-e.x,e.endX=e.x),e.startY<=t.y?(e.y=e.startY,e.height=t.y-e.startY,e.endY=e.y+e.height):(e.y=t.y,e.height=e.startY-e.y,e.endY=e.y)},n.prototype.deactivateRect=function(){this.selection.mousemoved=!1,this.selection.active=!1,this.selection.action=\"add\",this.hideRect();var t=this.selection.rect_node.style.backgroundColor;this.selection.rect_node.setAttribute(\"style\",\"\"),this.selection.rect_node.style.backgroundColor=t},n.prototype.detectCollision=function(t){var e=t.getBoundingClientRect();return 0===e.height?!1:this.selection.x<=e.right&&this.selection.x+this.selection.width>=e.left&&this.selection.y<=e.bottom&&this.selection.y+this.selection.height>=e.top},n}();e.LassoSelection=n}(e=t.visualUtils||(t.visualUtils={}))}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t[t.Add=1]=\"Add\",t[t.Remove=2]=\"Remove\"}(e||(e={}));var n;!function(t){t.RectClass=\"selection-rect\",t.RectAdditionalClass=\"selection-rect-small-multiple\",t.EventNameSpace=\".selectionForSmallMultiple\"}(n||(n={}));var i=function(){function t(t,e){this.lasso=new o,this.domItems=new a,this.preselection=new r,this.barClassName=t.className,this.visual=e}return t.prototype.init=function(t){var e=t.append(\"div\").classed(n.RectClass,!0).classed(n.RectAdditionalClass,!0);this.lassoElement=new l(e)},t.prototype.update=function(t,e,i){var r=this;this.svgChart=t,this.domItems.update(e),this.legendBucketFilled=i,this.svgChart.on(\"mousedown\"+n.EventNameSpace,function(){r.lasso.init(d3.event)}),d3.select(\"html\").on(\"mousemove\"+n.EventNameSpace,this.onMousemove.bind(this)).on(\"mouseup\"+n.EventNameSpace,this.onMouseup.bind(this))},t.prototype.disable=function(){this.svgChart&&this.svgChart.on(\"mousedown\"+n.EventNameSpace,null),d3.select(\"html\").on(\"mousemove\"+n.EventNameSpace,null).on(\"mouseup\"+n.EventNameSpace,null)},t.prototype.onMousemove=function(){var t=d3.event;if(!this.lasso.started){if(!this.lasso.detectIfStarted(t))return;this.start()}this.lasso.calculateRectDimensions({x:t.clientX,y:t.clientY}),this.lassoElement.setPos(this.lasso.x,this.lasso.y),this.lassoElement.setSize(this.lasso.width,this.lasso.height),this.preselection.updatePreselectionData(this.lasso,this.domItems.get(),t.ctrlKey),this.legendBucketFilled||this.preselection.preSelectEntireCategories(this.svgChart),this.domItems.setPreviewStyles()},t.prototype.onMouseup=function(){this.lasso.active&&(this.lasso.started||(this.onClick(),this.legendBucketFilled||this.preselection.preSelectEntireCategories(this.svgChart)),this.performSelection(),this.domItems.setStyles(),this.end())},t.prototype.onClick=function(){var t=d3.select(this.lasso.mousedown.target);if(!t.classed(this.barClassName))return void(this.lasso.mousedown.ctrlKey||this.domItems.clearSelectionData());var e=t.datum();if(this.lasso.mousedown.ctrlKey)return e.preRemoved=a.dataPointIsPartOfSelection(e),void(e.preSelected=!e.preRemoved);if(!a.dataPointIsPartOfSelection(e))return this.domItems.clearSelectionData(),void(e.preSelected=!0);var n=this.domItems.countPreselectedOrSelected();this.domItems.clearSelectionData(),1!==n&&(e.preSelected=!0)},t.prototype.start=function(){this.lasso.started=!0,this.lasso.mousedown.ctrlKey||this.domItems.clearSelectionData(),this.lassoElement.show()},t.prototype.end=function(){this.lasso.reset(),this.preselection.reset(),this.lassoElement.deactivate()},t.prototype.performSelection=function(){var t=this.domItems.get(),e=[],n=[];t.each(function(t){t.preSelected?(t.selected=!0,e.push(t)):t.preRemoved&&(t.selected=!1,e.push(t)),t.selected&&n.push(t),t.preSelected=t.preRemoved=!1}),e.length>0?this.visual.webBehaviorSelectionHandler.handleSelection(e,this.lasso.mousedown.ctrlKey):this.lasso.mousedown.ctrlKey||this.domItems.hasHighlight()||this.visual.webBehaviorSelectionHandler.handleClearSelection(),this.visual.saveSelection()},t}();t.LassoSelectionForSmallMultiple=i;var r=function(){function t(){this.action=null}return t.prototype.reset=function(){this.action=null},t.prototype.updatePreselectionData=function(t,n,i){var r=this;i||(r.action=e.Add),n.each(function(n){var i=this,a=t.detectCollision(i);switch(null===r.action&&a&&(r.action=n.selected?e.Remove:e.Add),r.action){case e.Add:n.preSelected=a&&!n.selected;break;case e.Remove:n.preRemoved=a&&n.selected}})},t.prototype.preSelectEntireCategories=function(t){t.selectAll(\".bar-group\").each(function(){var t=d3.select(this).selectAll(\".bar\"),e=[],n=[];t.each(function(t){t.preSelected?e.push(t.category):t.preRemoved&&n.push(t.category)}),t.each(function(t){e.indexOf(t.category)>-1?t.preSelected=!0:n.indexOf(t.category)>-1&&(t.preRemoved=!0)})})},t}(),a=function(){function e(){}return e.prototype.update=function(t){this.bars=t},e.prototype.get=function(){return this.bars},e.prototype.setPreviewStyles=function(){this.countPreselectedOrSelected()>0?this.setOpacity(null,function(n){return e.dataPointIsPartOfSelection(n)?t.DefaultOpacity:t.DimmedOpacity}):this.hasHighlight()||this.setOpacity(t.DefaultOpacity)},e.prototype.countPreselectedOrSelected=function(){var t=this.bars.filter(function(t){return e.dataPointIsPartOfSelection(t)});return t.size()},e.prototype.setStyles=function(){this.countPreselectedOrSelected()>0?(this.setOpacity(null,function(e){return e.selected?t.DefaultOpacity:t.DimmedOpacity}),this.setStroke(!0)):this.hasHighlight()||(this.setOpacity(t.DefaultOpacity),this.setStroke(!1))},e.prototype.clearSelectionData=function(){this.bars.each(function(t){t.selected=t.preSelected=!1})},e.prototype.hasHighlight=function(){return this.bars.filter(function(t){return t.highlight}).size()>0},e.dataPointIsPartOfSelection=function(t){return!t.preRemoved&&(t.preSelected||t.selected)},e.prototype.setStroke=function(t){this.bars.each(function(e){var n=this;n.style.stroke=t?\"#000000\":e.color})},e.prototype.setOpacity=function(t,e){this.bars.each(function(n){var i=this,r=t?t:e(n);i.style.fillOpacity=r.toString(),i.style.strokeOpacity=r.toString()})},e}(),o=function(){function t(){this.active=!1,this.started=!1}return t.prototype.init=function(t){this.active=!0,this.mousedown=t,this.startX=t.clientX,this.startY=t.clientY},t.prototype.reset=function(){this.started=!1,this.active=!1},t.prototype.detectIfStarted=function(t){return this.active?t.clientX!==this.mousedown.clientX||t.clientY!==this.mousedown.clientY:!1},t.prototype.calculateRectDimensions=function(t){this.startX<=t.x?(this.x=this.startX,this.width=t.x-this.startX,this.endX=this.x+this.width):(this.x=t.x,this.width=this.startX-this.x,this.endX=this.x),this.startY<=t.y?(this.y=this.startY,this.height=t.y-this.startY,this.endY=this.y+this.height):(this.y=t.y,this.height=this.startY-this.y,this.endY=this.y)},t.prototype.detectCollision=function(t){var e=t.getBoundingClientRect();return 0===e.width?!1:this.x<=e.right&&this.x+this.width>=e.left&&this.y<=e.bottom&&this.y+this.height>=e.top},t}(),l=function(){function t(t){this.d3_element=t,this.element=t.node()}return t.prototype.show=function(){this.d3_element.classed(\"selection-rect-active\",!0)},t.prototype.hide=function(){this.d3_element.classed(\"selection-rect-active\",!1)},t.prototype.deactivate=function(){this.hide(),this.resetStyleAttribute()},t.prototype.setPos=function(t,e){this.d3_element.style({left:t.toString()+\"px\",top:e.toString()+\"px\"})},t.prototype.setSize=function(t,e){this.d3_element.style({width:t.toString()+\"px\",height:e.toString()+\"px\"})},t.prototype.resetStyleAttribute=function(){this.element.setAttribute(\"style\",\"\")},t}()}(e=t.visualUtils||(t.visualUtils={}))}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(n){function i(t,e,n,i){void 0===i&&(i=!1);var r=t.dataPoints,a=t.axes;this.calculateBarCoordianates(r,a,e,n,i)}function r(t,n,i,r,l){void 0===l&&(l=!1);var s=n.xIsScalar&&\"categorical\"!==i.categoryAxis.axisType,u=l&&i.categoryAxis.rangeType!==e.AxisRangeType.Custom,c=(l&&i.valueAxis.rangeType!==e.AxisRangeType.Custom,s&&i.categoryAxis.start?i.categoryAxis.start:-Number.MAX_VALUE),h=s&&i.categoryAxis.end?i.categoryAxis.end:Number.MAX_VALUE,f=r;r=r>5?5:r,t.forEach(function(t){var e=0;if(n.xIsScalar&&s){var o=u?null:i.categoryAxis.start,l=u?null:i.categoryAxis.end;e=null!=o&&o>t.category||0>r?0:r,e=null!=l&&l<=t.category?0:r}else e=n.x.scale.rangeBand();if(s){var f=t.category>=c&&t.category<=h;if(!f)return void a(t)}var d=n.x.scale(t.category);if(t.shiftValue>n.y.dataDomain[1])return void a(t);var g=Math.max(t.shiftValue,n.y.dataDomain[0]),p=n.y.scale(g);if(p=n.y.scale(g),t.shiftValue+t.percentValueForHeight<n.y.dataDomain[0])return void a(t);var v=Math.max(t.shiftValue+t.percentValueForHeight,n.y.dataDomain[0]),m=n.y.scale(v);if(m=Math.max(m,n.y.dataDomain[0]),m>=p)return void a(t);var y=p-m;1>y&&0!==y&&(y=1),t.barCoordinates={height:y,width:e,x:d,y:m}}),n.xIsScalar&&\"categorical\"!==i.categoryAxis.axisType&&o(t,f)}function a(t){t.barCoordinates={height:0,width:0,x:0,y:0}}function o(t,e){for(var n=1.5,i=Number.MAX_VALUE,r=t.sort(function(t,e){return t.barCoordinates.x-e.barCoordinates.x}),a=r[0],o=1;o<r.length;++o)if(!r[o].category||!a.category||r[o].category!==a.category){var l=r[o].barCoordinates.x-a.barCoordinates.x;i=i>l?l:i,a=r[o]}n>i||(n=i>n&&e>i?i:e),e&&e!==n&&r.forEach(function(t){var i=n/100*20,r=t.barCoordinates.width?n-i:0;t.barCoordinates.width=r,t.barCoordinates.x=t.barCoordinates.x+e/2-r/2})}function l(t){for(var e=[],n=0,i=\"\",r=\"\",a=0;a<t.length;a++){if(r=i,i=t[a].category.toString(),a>0&&i!==r&&n++,!e[n]){var o={categoryName:i,dataPoints:[]};e[n]=o}e[n].dataPoints.push(t[a])}return e}function s(t,n,i,r,a){if(void 0===a&&(a=null),n.show){for(var o=a||t.dataPoints,l=e.formattingUtils.getTextProperties(n),s=e.formattingUtils.getTextPropertiesForHeightCalculation(n),u=n.precision,c=\"\",h=0;u>h;++h)c+=\"0\";var f=T.create({precision:u,format:\"0.\"+c+\"%;-0.\"+c+\"%;0.\"+c+\"%\"});o.forEach(function(t){var a=f.format(t.percentValue);s.text=a;var o=n.orientation===e.LabelOrientation.Horizontal,u=o?C.estimateSvgTextHeight(l):C.measureSvgTextWidth(l,a),c=o?C.measureSvgTextWidth(l,a):C.estimateSvgTextHeight(l),h=t.barCoordinates.width;if(n.overflowText||c+(n.showBackground?e.DataLabelHelper.labelBackgroundHeightPadding:0)<h){var d=t.barCoordinates.x+t.barCoordinates.width/2+(o?-c/2:c/3),g=e.DataLabelHelper.calculatePositionShift(n,u,t,i,r);null!==g?t.labelCoordinates={x:d,y:g,width:c,height:u}:t.labelCoordinates=null}else t.labelCoordinates=null})}}function u(t){var n=t.metadata.columns,i=0;for(var r in n){var a=n[r];a.roles&&a.roles[e.Field.Value]&&++i}return i}function c(t){var e;switch(t){case\"solid\":e=\"none\";break;case\"dashed\":e=\"7, 5\";break;case\"dotted\":e=\"2, 2\"}return e}function h(t){return t.formatter&&t.formatter.displayUnit&&t.formatter.displayUnit.value>D?t.formatter.displayUnit.title:null}function f(t,e,i){var r=n.getUnitType(i)||\"No unit\";switch(e){case\"showUnitOnly\":return r;case\"showTitleOnly\":return t;case\"showBoth\":return t+\" (\"+r+\")\"}}function d(t,e,i,r){return r&&!e||i&&!t?n.DimmedOpacity:n.DefaultOpacity}function g(t,n,i,r,a,o,l){void 0===o&&(o=!1),void 0===l&&(l=!1);var s=n.width/i,u=0;if(o||\"categorical\"===a.categoryAxis.axisType){var c=r/100;u=d3.min([L,d3.max([A,s])])*(1-c)}else{var h=t.slice(),f=l&&a.categoryAxis.rangeType!==e.AxisRangeType.Custom,d=f?null:a.categoryAxis.start,g=f?null:a.categoryAxis.end;null==d&&null==g||(h=h.filter(function(t){return null!=d?t.value>=d:null!=g?t.value<=g:!0}));var p=h.length;if(4>p){var v=3.75;u=n.width/v}else{var v=3.75+1.25*(p-3);u=n.width/v}}return u}function p(t){var e=[];return t.forEach(function(t){var n=t.getBoundingClientRect();e.push(d3.max([n.width,n.height]))}),0===t.length&&e.push(0),d3.max(e)}function v(t){var e=[];return t.forEach(function(t){var n=t.getBoundingClientRect();e.push(n.height)}),0===t.length&&e.push(0),d3.max(e)}function m(t){var e={fontFamily:t.titleFontFamily,fontSize:t.titleFontSize.toString()};return C.estimateSvgTextHeight(e)}function y(t){var e={fontFamily:t.titleFontFamily,fontSize:t.titleFontSize.toString()};return C.estimateSvgTextHeight(e)}function x(t,e,n,i){return!(i&&!e||n&&!t)}function b(t,e,n,i){var r=e,a=0;return t.selectAll(\"text\").each(function(){var t=this.getBoundingClientRect().width;a=Math.max(a,t>i?i:t)}),a>r}function S(t,e,n){var i=!1;return t.length>0&&e.length>0&&t.length===e.length?(i=!0,t.forEach(function(t,r){e.forEach(function(e,a){r===a&&(i=i&&t[n]===e[n])})})):0===t.length&&0===e.length&&(i=!0),i}function w(t){var e=P.getCategoryValueType(t),n=P.isOrdinal(e);return!n}function M(t){var e=P.getCategoryValueType(t.cols.category),n=P.isOrdinal(e);return!n}var C=t.extensibility.utils.formatting.textMeasurementService,T=t.extensibility.utils.formatting.valueFormatter,P=t.extensibility.utils.chart.axis,D=1;n.calculateBarCoordianatesByData=i,n.calculateBarCoordianates=r,n.recalculateThicknessForContinuous=o,n.buildDataPointsArayByCategories=l,n.calculateLabelCoordinates=s,n.getNumberOfValues=u,n.getLineStyleParam=c,n.getUnitType=h,n.getTitleWithUnitType=f,n.DimmedOpacity=.4,n.DefaultOpacity=1,n.getFillOpacity=d;var A=1,L=450;n.calculateDataPointThickness=g,n.getLabelsMaxWidth=p,n.getLabelsMaxHeight=v,n.GetYAxisTitleHeight=m,n.GetXAxisTitleHeight=y,n.isSelected=x,n.smallMultipleLabelRotationIsNeeded=b,n.compareObjects=S,n.isScalar=w,n.categoryIsScalar=M}(n=e.visualUtils||(e.visualUtils={}))}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(n){function i(t,e,n,i,r,a,o){var l=new h(e.colorPalette,{objectName:\"dataPoint\",propertyName:\"fill\"}),s=[],u=t.grouped(),f=v.getFormatStringByColumn(i);if(o)for(var d=0,g=u.length;g>d;d++){var p=u[d],y=void 0,x=void 0;x=l.getColorForSeriesValue(p.objects,p.name),y=e.createSelectionIdBuilder().withSeries(t,p).createSelectionId(),s.push({color:x,icon:c.LegendIcon.Circle,label:v.format(p.name,f),identity:y,selected:m})}var b=t&&i?i.displayName:n.legendName;return void 0!==n.legendName&&0!==n.legendName.toString().length||(n.legendName=b),b||(b=r&&r[a]&&r[a].source&&r[a].source.displayName?r[a].source.displayName:n.legendName),{title:b,dataPoints:s}}function r(t,i,r){var a,o=e.visualUtils.getNumberOfValues(t);\nreturn e.DataViewConverter.IsLegendFilled(t)?a=n.buildLegendData(t.categorical.values,i,r,t.categorical.values.source,t.categorical.categories||[],e.metadataUtils.getMetadata(t.categorical.categories,t.categorical.values.grouped(),t.metadata.columns[0]).idx.category,!!t.categorical.values.source):o>1&&(a=n.buildLegendDataForMultipleValues(i,t,o)),a}function a(t){var e=[];return t.forEach(function(t){return e.push(t.color)}),e}function o(t,e,n){for(var i=new h(t.colorPalette,{objectName:\"dataPoint\",propertyName:\"fill\"}),r=[],a=e.categorical.values,o=0;n>o;o++){var l=void 0,s=void 0;l=i.getColorForMeasure(a[o].source.objects,o+\"value\"),s=t.createSelectionIdBuilder().withMeasure(a[o].source.queryName).createSelectionId(),r.push({color:l,icon:c.LegendIcon.Circle,label:a[o].source.displayName,identity:s,selected:m})}return i=null,{title:\"Values:\",dataPoints:r}}function l(t,e,i,r,a){var o={title:\"\",dataPoints:[]},l=r.legendObject,s=r.data;o.labelColor=l.legendNameColor,o.title=l.titleText;var u=t,c=l.fontFamily.toString()||n.DefaultFontFamily;if(s&&(o.dataPoints=s.dataPoints?s.dataPoints:[],o.fontSize=l.fontSize?l.fontSize:n.LegendLabelFontSizeDefault,u.__proto__.constructor.DefaultTitleFontFamily=u.__proto__.constructor.DefaultFontFamily=c,o.grouped=!!s.grouped),r){f.update(o,l);var h=r.legendObject[g.position];h&&u.changeOrientation(p[h])}else u.changeOrientation(p.Top);var v=d3.select(\"#legendGroup\").node();v.style.fontFamily=c,u.drawLegend(o,{height:i.height,width:i.width}),d.positionChartArea(e,u)}function s(t){var e;return e={show:t.show,position:t.position,showTitle:t.showTitle,titleText:t.legendName,legendNameColor:t.legendNameColor,fontSize:t.fontSize,fontFamily:t.fontFamily}}function u(t,e,i){var r=n.getLegendProperties(i),a=n.getSuitableLegendData(t,e,i),o=void 0===a?!1:a.dataPoints.length>0,l=o?n.getLegendColors(a.dataPoints):[];return{legendObject:r,data:a,colors:l}}var c=t.extensibility.utils.chart.legend,h=t.extensibility.utils.color.ColorHelper,f=t.extensibility.utils.chart.legend.data,d=t.extensibility.utils.chart.legend,g=t.extensibility.utils.chart.legend.legendProps,p=t.extensibility.utils.chart.legend.LegendPosition,v=t.extensibility.utils.formatting.valueFormatter;n.MinAmountOfDataPointsInTheLegend=1,n.LegendLabelFontSizeDefault=9,n.DefaultFontFamily='\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif',n.DefaultLegendTitleText=\"Type\",n.DefaultLegendPosition=\"Top\";var m=!1;n.buildLegendData=i,n.getSuitableLegendData=r,n.getLegendColors=a,n.buildLegendDataForMultipleValues=o,n.renderLegend=l,n.getLegendProperties=s,n.setLegendProperties=u}(n=e.legendUtils||(e.legendUtils={}))}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){t.getXAxisMaxWidth=function(t,e){return t/100*e.categoryAxis.maximumSize}}(e=t.xAxisUtils||(t.xAxisUtils={}))}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(t){return!t.format&&t.type.numeric?\"0.00\":l.getFormatStringByColumn(t)}function i(t,e,n,i){return l.create({value:0===t&&i?i:t,value2:0,precision:e,format:this.getFormatStringByColumn(n)})}function r(t){return t.axes.x.axis.tickValues()[1]}function a(t){var e=s.fromPoint(t.fontSize),n=t.fontFamily?t.fontFamily:u.LabelTextProperties.fontFamily;return{fontSize:e.toString(),fontFamily:n}}function o(t){var e=t.fontFamily?t.fontFamily:u.LabelTextProperties.fontFamily;return{fontSize:t.fontSize.toString(),fontFamily:e}}var l=t.extensibility.utils.formatting.valueFormatter,s=t.extensibility.utils.type.PixelConverter,u=t.extensibility.utils.chart.dataLabel.utils;e.getFormatStringByColumn=n,e.createFormatter=i,e.getValueForFormatter=r,e.getTextProperties=a,e.getTextPropertiesForHeightCalculation=o}(n=e.formattingUtils||(e.formattingUtils={}))}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){}return e.canOverflow=function(e){return e.labelPosition===t.LabelPosition.InsideCenter||e.labelPosition===t.LabelPosition.InsideBase?!1:e.labelPosition===t.LabelPosition.Auto?!0:!!e.overflowText},e.calculateShiftForLegend=function(t,n,i,r){var a=i.y,o=i.height,l=r.showBackground?e.labelBackgroundYShift:0,s=t-n+l,u=t-l,c=a,h=a+o,f=2;return u+f>h&&(t=h-f+l,c>t-n)?null:c>s&&(t=a+n-l,t+f>h)?null:t},e.calculateShiftForNoLegend=function(t,n,i,r,a){var o=r.y,l=r.height,s=a.showBackground?e.labelBackgroundYShift:0,u=t-n+s,c=t-s,h=e.canOverflow(a),f=h?0:o,d=o+l;if(c>d){if(t=d+s,f>t-n)return null}else if(f>u&&(t=o+n-s,t>d))return null;return t},e.calculatePositionShift=function(t,e,n,i,r){var a=n.barCoordinates,o=n.value>=0?this.calculateLabelPositionShift(t,e,a):this.calculateLabelPositionShiftForNegativeValues(t,e,a);return r?this.calculateShiftForLegend(o,e,a,t):this.calculateShiftForNoLegend(o,e,i,a,t)},e.calculateLabelPositionShift=function(e,n,i){var r=e.showBackground?2:0,a=i.y,o=i.height;switch(e.labelPosition){case t.LabelPosition.InsideEnd:return a+n+r+this.dataLabelMargin;case t.LabelPosition.InsideBase:return a+o-this.dataLabelMargin-r;case t.LabelPosition.InsideCenter:return a+o/2+n/2;default:return a+o/2+n/2}},e.calculateLabelPositionShiftForNegativeValues=function(e,n,i){var r=e.showBackground?2:0,a=i.y,o=i.height;switch(e.labelPosition){case t.LabelPosition.InsideEnd:return a+o-r-this.dataLabelMargin;case t.LabelPosition.InsideBase:return a+this.dataLabelMargin+r-n;case t.LabelPosition.InsideCenter:return a+o/2+n/2;default:return a+o/2+n/2}},e}();e.labelBackgroundWidthPadding=16.2,e.labelBackgroundHeightPadding=2,e.labelBackgroundXShift=7.5,e.labelBackgroundYShift=-2,e.dataLabelMargin=6,t.DataLabelHelper=e}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(t){this.visual=t}return e.prototype.bindEvents=function(t,e){this.options=t,this.visual.webBehaviorSelectionHandler=e},e.prototype.renderSelection=function(e){var n=this.visual.getAllDataPoints().filter(function(t){return t.highlight}).length>0,i=this.visual.getAllDataPoints();i.filter(function(t){return t.selected});this.options.bars.style({\"fill-opacity\":function(i){return t.visualUtils.getFillOpacity(i.selected,i.highlight,!i.highlight&&e,!i.selected&&n)},stroke:function(i){return e&&t.visualUtils.isSelected(i.selected,i.highlight,!i.highlight&&e,!i.selected&&n)?t.Visual.DefaultStrokeSelectionColor:i.color},\"stroke-width\":function(i){return e&&t.visualUtils.isSelected(i.selected,i.highlight,!i.highlight&&e,!i.selected&&n)?t.Visual.DefaultStrokeSelectionWidth:t.Visual.DefaultStrokeWidth}})},e}();t.WebBehavior=e}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){this.saveSelection=t}return t.prototype.bindEvents=function(t,e){var n=this,i=t.legendItems;this.legendIcons=t.legendIcons;var r=t.clearCatcher;i.on(\"click\",function(t){e.handleSelection(t,d3.event.ctrlKey),n.saveSelection()}),r.on(\"click\",function(){e.handleClearSelection(),n.saveSelection()})},t.prototype.renderSelection=function(e){e?this.legendIcons.style({fill:function(e){return e.selected?e.color:t.dimmedLegendColor}}):this.legendIcons.style({fill:function(t){return t.color}})},t}();e.dimmedLegendColor=\"#A6A6A6\",t.CustomLegendBehavior=e}(e=t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(t.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.svg,r=i.CssConstants,a=t.extensibility.utils.type.PixelConverter,o=t.extensibility.utils.chart.axis,l=t.extensibility.utils.chart.axis.createAxis,s=t.extensibility.utils.formatting.valueFormatter,u=t.extensibility.utils.formatting.textMeasurementService;!function(t){t.AxisLabelSelector=r.createClassAndSelector(\"axisLabel\")}(n||(n={}));var c=function(){function t(){}return t.createD3Axes=function(n,i,r,c,h,f,d,g){void 0===f&&(f=!1),void 0===d&&(d=null),void 0===g&&(g=null);var p=null,v=c.valueAxis.axisScale,m=\"#,0.##%\",y=f&&c.valueAxis.rangeType!==e.AxisRangeType.Custom,x=y?null:c.valueAxis.start,b=y?null:c.valueAxis.end;p=l({pixelSpan:i.height,dataDomain:n.yAxisDomain,metaDataColumn:r.cols.value,formatString:m,outerPadding:0,innerPadding:0,isScalar:!0,isVertical:!0,isCategoryAxis:!1,scaleType:v,disableNice:null!=x||null!=b,useTickIntervalForDisplayUnits:!0}),p.axis.innerTickSize(-i.width).tickPadding(t.DefaultAxisXTickPadding).orient(c.valueAxis.position).outerTickSize(1),p.axisLabel=c.valueAxis.showTitle?r.labels.x:\"\";var S=null,w=s.getFormatStringByColumn(r.cols.category)||s.getFormatStringByColumn(r.groupingColumn),M=o.getCategoryValueType(r.cols.category),C=o.isOrdinal(M),T=!C,P=\"categorical\"===c.categoryAxis.axisType?\"linear\":c.categoryAxis.axisScale,D=T?c.categoryAxis.axisType:\"categorical\",A=null;r.cols.category?A=s.create({format:s.getFormatStringByColumn(r.cols.category,!0)||r.cols.category.format,cultureSelector:h.locale}):r.groupingColumn&&(A=s.create({format:s.getFormatStringByColumn(r.groupingColumn,!0)||r.groupingColumn.format,cultureSelector:h.locale}));var L=c.categoryAxis.innerPadding/100,E=T&&\"continuous\"===D?d/2:0,F=a.toString(c.categoryAxis.fontSize),k=c.categoryAxis.fontFamily,N=f&&c.categoryAxis.rangeType!==e.AxisRangeType.Custom,_=N?null:c.categoryAxis.start,I=N?null:c.categoryAxis.end;return S=l({pixelSpan:i.width,dataDomain:n.xAxisDomain,metaDataColumn:r.cols.category||r.groupingColumn,formatString:w,outerPadding:E,innerPadding:L,scaleType:T?P:void 0,isScalar:T&&\"continuous\"===D,isVertical:!1,isCategoryAxis:!0,useTickIntervalForDisplayUnits:!0,disableNice:\"continuous\"===D&&(null!=_||null!=I),getValueFn:function(t,e){if(e.dateTime&&A){var n={};n=T&&\"continuous\"===D?{month:\"short\",year:\"numeric\"}:{day:\"numeric\",month:\"numeric\",year:\"numeric\"};var i=A.format(new Date(t).toLocaleString(\"en-US\",n));if(g){var r={text:i,fontFamily:k,fontSize:F};return u.getTailoredTextOrDefault(r,g)}return i}if(g&&g!==Number.MAX_VALUE){var r={text:t.toString(),fontFamily:k,fontSize:F};return u.getTailoredTextOrDefault(r,g)}return t}}),S.axis.tickPadding(t.DefaultAxisYTickPadding).orient(\"bottom\").innerTickSize(0).outerTickSize(0),S.axisLabel=c.categoryAxis.showTitle?r.labels.y:\"\",{x:S,y:p,xIsScalar:T}},t.rotateXAxisTickLabels=function(t,e){var n=e.selectAll(\"g\").selectAll(\"text\");t?(n.attr({transform:\"rotate(-90)\",dx:\"-5.5px\",dy:\"-0.5em\"}),n.style({\"text-anchor\":\"end\"})):(n.attr({transform:\"rotate(0)\",dx:\"0\"}),n.style({\"text-anchor\":\"middle\"}))},t.render=function(t,n,i,r,o){if(void 0===o&&(o=null),t.valueAxis.show){i.call(r.y.axis);var l=i.selectAll(\"g\").selectAll(\"text\"),s=i.selectAll(\"g\").selectAll(\"line\"),u=t.valueAxis,c=u.axisColor.toString(),h=a.toString(u.fontSize),f=u.fontFamily,d=u.gridlinesColor.toString(),g=a.toString(u.strokeWidth),p=u.showGridlines,v=u.lineStyle,m=e.visualUtils.getLineStyleParam(v);l.style({fill:c,\"font-size\":h,\"font-family\":f}),s.style({stroke:d,\"stroke-width\":g,\"stroke-dasharray\":m}),p?s.style(\"opacity\",\"1\"):s.style(\"opacity\",\"0\")}else i.selectAll(\"*\").remove();if(t.categoryAxis.show){n.call(r.x.axis);var l=n.selectAll(\"g\").selectAll(\"text\"),y=t.categoryAxis,c=y.axisColor.toString(),h=a.toString(y.fontSize),f=y.fontFamily;l.style({fill:c,stroke:\"none\",\"font-size\":h,\"font-family\":f})}else n.selectAll(\"*\").remove()},t.renderLabels=function(r,o,l,s,u,c,h,f,d){var g=o,p=r.width,v=r.height,m=\"right\",y=m===u.valueAxis.position,x=u.categoryAxis.show&&u.categoryAxis.showTitle,b=u.valueAxis.show&&u.valueAxis.showTitle;x||(s[0]=null),b||(s[1]=null),h=f.selectAll(\"*\").data(s),h.enter().append(\"text\").attr(\"class\",n.AxisLabelSelector.className),h.exit().remove();var S=u.categoryAxis.axisTitleColor,w=a.fromPointToPixel(u.categoryAxis.titleFontSize),M=a.toString(u.categoryAxis.titleFontSize),C=u.categoryAxis.axisTitle,T=u.categoryAxis.titleStyle,P=u.categoryAxis.titleFontFamily,D=u.valueAxis.axisTitleColor,A=parseInt(u.valueAxis.titleFontSize.toString()),L=a.toString(A),E=u.valueAxis.axisTitle,F=u.valueAxis.titleStyle,k=u.valueAxis.titleFontFamily;h.style({\"text-anchor\":\"middle\"}).text(function(t){return t}).call(function(n){var r=d3.select(n[0][0]);if(r.attr({transform:i.translate(p/t.AxisLabelOffset,(v+l.height+w+g.top)/2),dy:\".8em\"}),x&&C&&C.toString().length>0&&r.text(C),x&&T){var a=e.visualUtils.getTitleWithUnitType(r.text(),T,c.x);r.text(a)}r.style({fill:S,\"font-size\":M,\"font-family\":P});var o=d3.select(n[0][1]);if(o.attr({transform:y?t.YAxisLabelTransformRotate:t.YAxisLabelTransformRotate,y:y?p-g.right-A:0,x:-((l.height+g.top+g.bottom)/t.AxisLabelOffset),dy:(y?\"-\":\"\")+t.DefaultDY}),b&&E&&E.toString().length>0&&o.text(E),b){var a=e.visualUtils.getTitleWithUnitType(o.text(),F,c.y);o.text(a)}o.style({fill:D,\"font-size\":L,\"font-family\":k})})},t.calculateAxesDomains=function(t,e,n,i,r){return void 0===r&&(r=!1),{xAxisDomain:this.calculateCategoryDomain(e,n,i,r),yAxisDomain:this.calculateValueDomain(t,n,r)}},t.calculateValueDomain=function(t,n,i){void 0===i&&(i=!1);var r=d3.min(t.filter(function(t){return t.value<0}),function(t){return t.shiftValue}),a=d3.max(t.filter(function(t){return t.value>0}),function(t){return t.value+t.shiftValue});r=0>r?r:0,a=a>0?a:0,r=-1>r?-1:r,a=a>1?1:a;var o=r,l=a,s=n.constantLine.value;(s||0===s)&&(o=o>s?s:o,l=s>l?s:l);var u=i&&n.valueAxis.rangeType!==e.AxisRangeType.Custom,c=u?null:n.valueAxis.start,h=u?null:n.valueAxis.end;return[null!=c?c:o,null!=h?h:l]},t.calculateCategoryDomain=function(t,n,i,r){var a=this;void 0===r&&(r=!1);var l=o.getCategoryValueType(i.cols.category),s=o.isOrdinal(l),u=t.map(function(t){return t.category}),c=!s,h=c?n.categoryAxis.axisType:\"categorical\";if(c&&\"continuous\"===h){u=u.filter(function(t){return t!==a.Blank});var f=t.filter(function(t){return t.category!==a.Blank}),d=d3.min(f,function(t){return t.category}),g=d3.max(f,function(t){return t.category}),p=r&&n.categoryAxis.rangeType!==e.AxisRangeType.Custom,v=p?null:n.categoryAxis.start,m=p?null:n.categoryAxis.end;u=[null!=v?n.categoryAxis.start:d,null!=m?m:g]}return u},t}();c.DefaultAxisXTickPadding=10,c.DefaultAxisYTickPadding=10,c.AxisLabelOffset=2,c.TickLabelAndTitleGap=5,c.YAxisLabelTransformRotate=\"rotate(-90)\",c.DefaultDY=\"1em\",c.Blank=\"(Blank)\",e.RenderAxes=c}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,i=t.extensibility.utils.svg,r=i.CssConstants,a=t.extensibility.utils.chart.dataLabel.utils,o=t.extensibility.utils.type.PixelConverter,l=t.extensibility.utils.formatting.valueFormatter,s=t.extensibility.utils.svg.translate,u=t.extensibility.utils.svg.CssConstants.createClassAndSelector,c=t.extensibility.utils.formatting.textMeasurementService;!function(t){t.BarSelect=r.createClassAndSelector(\"bar\"),t.BarGroupSelect=r.createClassAndSelector(\"bar-group\"),t.AxisLabelSelector=r.createClassAndSelector(\"axisLabel\")}(n||(n={}));var h=function(){function t(){}return t.render=function(t,i,r,a,o,l,s,u,c){var h=i.selectAll(n.BarGroupSelect.selectorName).data([t.dataPoints]);h.enter().append(\"g\").attr(\"class\",n.BarGroupSelect.className),h.exit().remove();var f=h.selectAll(n.BarSelect.selectorName).data(t.dataPoints);f.enter().append(\"rect\").attr(\"class\",n.BarSelect.className),f.exit().remove(),f.attr({height:function(t){return t.barCoordinates.height},width:function(t){return t.barCoordinates.width},x:function(t){return t.barCoordinates.x},y:function(t){return t.barCoordinates.y},fill:function(t){return t.color}});var d=a,g=d.hasSelection();if(f.style({\"fill-opacity\":function(n){return e.visualUtils.getFillOpacity(n.selected,n.highlight,!n.highlight&&g,!n.selected&&t.hasHighlight)},stroke:function(t){return(u||g)&&e.visualUtils.isSelected(t.selected,t.highlight,!t.highlight&&g,!t.selected&&u)?e.Visual.DefaultStrokeSelectionColor:t.color},\"stroke-width\":function(t){return(u||g)&&e.visualUtils.isSelected(t.selected,t.highlight,!t.highlight&&g,!t.selected&&u)?e.Visual.DefaultStrokeSelectionWidth:e.Visual.DefaultStrokeWidth}}),d){d.applySelectionStateToData(t.dataPoints);var p={bars:f,clearCatcher:r,interactivityService:a,host:s,selectionSaveSettings:c.selectionSaveSettings};d.bind(t.dataPoints,o,p)}this.renderTooltip(f,l)},t.renderDataLabelsBackground=function(n,i,r){var a=i.categoryLabels,o=a.orientation===e.LabelOrientation.Horizontal;if(r.selectAll(\"*\").remove(),a.showBackground){var l=r.selectAll(t.Label.selectorName).data(n);l.enter().append(\"svg:rect\"),l.attr({height:function(t){return t.labelCoordinates.height+e.DataLabelHelper.labelBackgroundHeightPadding*(o?1:2)},width:function(t){return t.labelCoordinates.width+e.DataLabelHelper.labelBackgroundWidthPadding},x:function(t){return t.labelCoordinates.x-(o?e.DataLabelHelper.labelBackgroundXShift:t.labelCoordinates.width)},y:function(t){return t.labelCoordinates.y-t.labelCoordinates.height+(o?-e.DataLabelHelper.labelBackgroundYShift:e.DataLabelHelper.labelBackgroundYShift)},rx:4,ry:4,fill:i.categoryLabels.backgroundColor}),l.style({\"fill-opacity\":(100-i.categoryLabels.transparency)/100,\"pointer-events\":\"none\"}),l.exit().remove()}},t.renderDataLabelsBackgroundForSmallMultiple=function(n,i,r,a){void 0===a&&(a=null);var o=i.categoryLabels;if(r.selectAll(\"*\").remove(),o.showBackground){var l=this.filterData(a||n.dataPoints),s=r.selectAll(t.Label.selectorName).data(l);s.enter().append(\"svg:rect\"),s.attr({height:function(t){return t.labelCoordinates.height+e.DataLabelHelper.labelBackgroundHeightPadding},width:function(t){return t.labelCoordinates.width+e.DataLabelHelper.labelBackgroundWidthPadding},x:function(t){return t.labelCoordinates.x-e.DataLabelHelper.labelBackgroundXShift},y:function(t){return t.labelCoordinates.y-t.labelCoordinates.height-e.DataLabelHelper.labelBackgroundYShift},rx:4,ry:4,fill:i.categoryLabels.backgroundColor}),s.style({\"fill-opacity\":(100-i.categoryLabels.transparency)/100,\"pointer-events\":\"none\"}),s.exit().remove()}},t.renderDataLabels=function(n,i,r){var u=i.categoryLabels;if(r.selectAll(\"*\").remove(),u.show){for(var c=r.selectAll(t.Label.selectorName).data(n),h=u.precision,f=\"\",d=0;h>d;++d)f+=\"0\";var g=l.create({precision:h,format:\"0.\"+f+\"%;-0.\"+f+\"%;0.\"+f+\"%\"});c.enter().append(\"svg:text\");var p=o.fromPoint(u.fontSize),v=u.fontFamily?u.fontFamily:a.LabelTextProperties.fontFamily;c.attr(\"transform\",function(t){return s(t.labelCoordinates.x,t.labelCoordinates.y)+(u.orientation===e.LabelOrientation.Horizontal?\"\":\"rotate(-90)\")}),c.style({fill:u.color,\"font-size\":p,\"font-family\":v,\"pointer-events\":\"none\"}).text(function(t){return g.format(t.percentValue)}),c.exit().remove()}},t.renderDataLabelsForSmallMultiple=function(n,i,r,l,u){void 0===u&&(u=null);var c=i.categoryLabels;if(r.selectAll(\"*\").remove(),c.show){var h=this.filterData(u||n.dataPoints),f=r.selectAll(t.Label.selectorName).data(h),d=e.formattingUtils.createFormatter(c.displayUnits,c.precision,l.cols.value,e.formattingUtils.getValueForFormatter(n));f.enter().append(\"svg:text\");var g=o.fromPoint(c.fontSize),p=c.fontFamily?c.fontFamily:a.LabelTextProperties.fontFamily;f.attr(\"transform\",function(t){return s(t.labelCoordinates.x,t.labelCoordinates.y)}),f.style({fill:c.color,\"font-size\":g,\"font-family\":p,\"pointer-events\":\"none\"}).text(function(t){return d.format(t.value)}),f.exit().remove()}},t.renderSmallMultipleTopTitle=function(t,e){var r=t.columns,a=t.index,l=t.chartSize,s=t.chartElement,u=t.leftSpace,h=t.topSpace,f=t.textHeight,d=o.fromPoint(e.fontSize),g=e.fontFamily,p=s.append(\"svg\"),v=p.selectAll(\"*\").data([r[a]]);v.enter().append(\"text\").attr(\"class\",n.AxisLabelSelector.className),v.exit().remove();var m={fontFamily:g,fontSize:d};v.style({\"text-anchor\":\"middle\",\"font-size\":d,\"font-family\":g,fill:e.fontColor}).attr({dy:\"0.3em\"}).text(function(t){return t||0===t?(m.text=t.toString(),c.getTailoredTextOrDefault(m,l.width-10)):null}).call(function(t){var e=d3.select(t[0][0]),n=u+l.width/2;e.attr({transform:i.translate(n,h+f/2)})})},t.filterData=function(t){var e=[],n=t.filter(function(t){return t.labelCoordinates&&!isNaN(t.percentValue)});for(var i in n){var r=n[i],a=r.labelCoordinates,o=!1;for(var l in e){var s=e[l],u=s.labelCoordinates;if(a.x<u.x+u.width+8&&a.x+a.width>u.x+8&&a.y<u.y+u.height+2&&a.y+a.height>u.y+2){o=!0;break}}o||e.push(r)}return e},t.renderTooltip=function(t,e){e.addTooltip(t,function(t){return t.data.tooltips},null,!0)},t.renderConstantLine=function(t,n,i,r){var a=n.select(\".const-line\"),o=t.value;o<i.y.dataDomain[0]?o=i.y.dataDomain[0]:o>i.y.dataDomain[1]&&(o=i.y.dataDomain[1]);var l=i.y.scale(o),s=i.x.scale(i.x.dataDomain[0]);a[0][0]&&n.selectAll(\"line\").remove(),a=t.position===e.Position.InFront?n.append(\"line\"):n.insert(\"line\",\".bar-group\"),a.classed(\"const-line\",!0).style({display:t.show?\"unset\":\"none\",stroke:t.lineColor,\"stroke-opacity\":1-t.transparency/100,\"stroke-width\":\"3px\"}).attr({y2:l,x2:r,y1:l}),t.lineStyle===e.LineStyle.Dotted?a.style({\"stroke-dasharray\":\"1, 5\",\"stroke-linecap\":\"round\"}):t.lineStyle===e.LineStyle.Dashed&&a.style({\"stroke-dasharray\":\"5, 5\"});var u={fontFamily:\"wf_standard-font, helvetica, arial, sans-serif\",fontSize:\"10px\"},h=this.getLineText(t),f=c.measureSvgTextWidth(u,h),d=c.estimateSvgTextHeight(u),g=n.select(\".const-label\");g[0][0]&&n.selectAll(\"text\").remove(),t.show&&t.dataLabelShow&&(g=n.append(\"text\").classed(\"const-label\",!0),g.attr({transform:this.getTranslateForStaticLineLabel(s,l,f,d,t,i,r)}),g.text(h).style({\"font-family\":\"wf_standard-font, helvetica, arial, sans-serif\",\"font-size\":\"10px\",fill:t.fontColor}))},t.getLineText=function(t){var n=t.displayUnits,i=t.precision,r=l.create({value:n,value2:0,precision:i,format:\"0\"});switch(t.text){case e.Text.Name:return t.name;case e.Text.Value:return r.format(t.value);case e.Text.NameAndValue:return t.name+\" \"+r.format(t.value)}},t.getTranslateForStaticLineLabel=function(t,n,i,r,a,o,l){var u,c=8;u=a.horizontalPosition===e.HorizontalPosition.Left?c:l-i-c;var h,f=5;h=a.verticalPosition===e.VerticalPosition.Top?n-(f+r):n+(f+r);var d=o.y.scale(o.y.dataDomain[1]),g=o.y.scale(o.y.dataDomain[0]);return d>=h?h=d+f:h>=g&&(h=g-(r+f)),s(u,h)},t.renderSmallMultipleLines=function(t,n){for(var i=t.rows,r=t.columns,a=t.chartSize,o=t.chartElement,l=t.leftSpace,s=t.topSpace,u=t.rowsInFlow,c=1;c<i.length;++c){var h=0;h=n.layoutMode===e.LayoutMode.Matrix?2*s+c*a.height+this.gapBetweenCharts*(c-1):s*c*u+c*a.height*u+this.gapBetweenCharts*(c*u-1)+this.gapBetweenCharts/2;var f=o.append(\"line\").style({stroke:\"#aaa\",\"stroke-width\":1});f.attr({x1:0,x2:l+r.length*a.width+this.gapBetweenCharts*r.length,y1:h,y2:h})}if(n.layoutMode===e.LayoutMode.Matrix)for(var d=1;d<r.length;++d){var g=l+d*a.width+this.gapBetweenCharts*d,f=o.append(\"line\").style({stroke:\"#aaa\",\"stroke-width\":1});f.attr({x1:g,x2:g,y1:0,y2:s+i.length*a.height+this.gapBetweenCharts*i.length})}},t.renderSmallMultipleTitles=function(t,r){var a=this,l=t.columns,s=t.rows,u=t.chartSize,h=t.chartElement,f=t.leftSpace,d=t.topSpace,g=o.fromPoint(r.fontSize),p=r.fontFamily,v=t.rowsInFlow;if(r.layoutMode===e.LayoutMode.Matrix){var m=h.append(\"svg\"),y=m.selectAll(\"*\").data(l);y.enter().append(\"text\").attr(\"class\",n.AxisLabelSelector.className),y.exit().remove();var x={fontFamily:p,fontSize:g};y.style({\"text-anchor\":\"middle\",\"font-size\":g,\"font-family\":p,fill:r.fontColor}).attr({dy:\"1em\"}).text(function(t){return t||0===t?(x.text=t.toString(),c.getTailoredTextOrDefault(x,u.width-10)):null}).call(function(t){for(var e=0;e<l.length;++e){var n=d3.select(t[0][e]),r=f+e*u.width+u.width/2+a.gapBetweenCharts*e;n.attr({transform:i.translate(r,d/2)})}})}var b=120,S={fontFamily:p,fontSize:g},w=h.append(\"svg\"),M=w.selectAll(\"*\").data(s);M.enter().append(\"text\").attr(\"class\",n.AxisLabelSelector.className),M.exit().remove(),M.style({\"text-anchor\":\"middle\",\"font-size\":g,\"font-family\":p,fill:r.fontColor}).text(function(t){return t||0===t?(S.text=t.toString(),c.getTailoredTextOrDefault(S,b)):null}).call(function(t){for(var n=0;n<s.length;++n){var o=d3.select(t[0][n]),l=0;if(r.layoutMode===e.LayoutMode.Flow){var c=n*v*u.height+a.gapBetweenCharts*n*v+d*v*n;l=c+v*u.height/2+d}else l=n*u.height+u.height/2+2*d+a.gapBetweenCharts*n;o.attr({transform:i.translate(f/2,l)})}})},t}();h.Label=u(\"label\"),h.gapBetweenCharts=10,e.RenderVisual=h}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n=t.extensibility.utils.color.ColorHelper,i=function(){function t(){}return t.fillDataPointInstancesForLegend=function(t,e){for(var i in t.legendData.dataPoints){var r=t.legendData.dataPoints[i];e.push({objectName:\"dataPoint\",displayName:r.label,selector:n.normalizeSelector(r.identity.getSelector(),!1),properties:{fill:{solid:{color:r.color}}}})}},t.fillDataPointInstancesForNoLegend=function(t,e){for(var i in t.dataPoints){var r=t.dataPoints[i];e.push({objectName:\"dataPoint\",displayName:r.category.toString(),selector:n.normalizeSelector(r.identity.getSelector(),!1),properties:{fill:{solid:{color:r.color}}}})}},t.setInstances=function(t,n,i,r){var a=n.instances,o=a[0],l=r.isSmallMultiple,s=\"categorical\"===t.categoryAxis.axisType;switch(o.objectName){case\"dataPoint\":r&&r.legendData&&r.legendData.dataPoints&&r.legendData.dataPoints.length?(this.fillDataPointInstancesForLegend(r,a),delete o.properties.fill,delete o.properties.showAllDataPoints):r&&r.dataPoints&&t.dataPoint.showAllDataPoints&&this.fillDataPointInstancesForNoLegend(r,a);break;case\"categoryLabels\":t.categoryLabels.showBackground||(delete o.properties.transparency,delete o.properties.backgroundColor);break;case\"categoryAxis\":t.categoryAxis.showTitle||(delete o.properties.titleStyle,delete o.properties.axisTitleColor,delete o.properties.axisTitle,delete o.properties.titleFontSize,delete o.properties.titleFontFamily),l?i&&!s?delete o.properties.rangeTypeNoScalar:delete o.properties.rangeType:(delete o.properties.rangeType,delete o.properties.rangeTypeNoScalar),i?\"categorical\"===t.categoryAxis.axisType?(delete o.properties.axisScale,delete o.properties.axisStyle,delete o.properties.displayUnits,delete o.properties.precision,delete o.properties.start,delete o.properties.end):\"continuous\"===t.categoryAxis.axisType&&(delete o.properties.minCategoryWidth,delete o.properties.maximumSize,delete o.properties.innerPadding):(delete o.properties.axisType,delete o.properties.axisScale,delete o.properties.axisStyle,delete o.properties.displayUnits,delete o.properties.precision,delete o.properties.start,delete o.properties.end);break;case\"valueAxis\":l?t.valueAxis.rangeType!==e.AxisRangeType.Custom&&(delete o.properties.start,delete o.properties.end):delete o.properties.rangeType,t.valueAxis.showTitle||(delete o.properties.titleStyle,delete o.properties.axisTitleColor,delete o.properties.axisTitle,delete o.properties.titleFontSize,delete o.properties.titleFontFamily),t.valueAxis.showGridlines||(delete o.properties.gridlinesColor,delete o.properties.strokeWidth,delete o.properties.lineStyle);break;case\"constantLine\":t.constantLine.dataLabelShow||(delete o.properties.fontColor,delete o.properties.text,delete o.properties.horizontalPosition,delete o.properties.verticalPosition,delete o.properties.displayUnits,delete o.properties.precision);break;case\"smallMultiple\":t.smallMultiple.layoutMode===e.LayoutMode.Matrix&&delete o.properties.maxRowWidth,t.smallMultiple.showChartTitle||(delete o.properties.fontFamily,delete o.properties.fontSize,delete o.properties.fontColor)}},t}();e.EnumerateObject=i}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){\"use strict\";var n,i=t.extensibility.utils.svg,r=i.CssConstants,a=t.extensibility.utils.interactivity.createInteractivityService,o=t.extensibility.utils.tooltip.createTooltipServiceWrapper,l=t.extensibility.utils.chart.axis,s=e.visualUtils.ScrollbarState,u=t.extensibility.utils.type.PixelConverter,c=t.extensibility.utils.formatting.valueFormatter,h=t.extensibility.utils.formatting.textMeasurementService,f=t.extensibility.utils.chart.legend.createLegend;!function(t){t.MainSvg=r.createClassAndSelector(\"bar-chart-svg\"),t.VisualSvg=r.createClassAndSelector(\"bar-chart-visual\"),t.BarSelect=r.createClassAndSelector(\"bar\"),t.BarGroupSelect=r.createClassAndSelector(\"bar-group\"),t.AxisGraphicsContext=r.createClassAndSelector(\"axisGraphicsContext\"),t.AxisLabelSelector=r.createClassAndSelector(\"axisLabel\"),t.LabelGraphicsContext=r.createClassAndSelector(\"labelGraphicsContext\"),t.LabelBackgroundContext=r.createClassAndSelector(\"labelBackgroundContext\")}(n||(n={}));var d=function(){function r(t){this.barClassName=n.BarSelect.className,this.scrollBar=new e.visualUtils.ScrollBar(this),this.dataPointThickness=0,this.isSelectionRestored=!1,this.lassoSelection=new e.visualUtils.LassoSelection(this),this.LassoSelectionForSmallMultiple=new e.visualUtils.LassoSelectionForSmallMultiple(n.BarSelect,this),this.skipScrollbarUpdate=!1,this.axesSize={xAxisHeight:10,yAxisWidth:15},this.mainElement=d3.select(t.element),this.mainHtmlElement=t.element,this.host=t.host,this.tooltipServiceWrapper=o(t.host.tooltipService,t.element),this.interactivityService=a(this.host);var i=new e.CustomLegendBehavior(this.saveSelection.bind(this));this.legend=f(this.mainHtmlElement,!1,this.interactivityService,!0,null,i),this.behavior=new e.WebBehavior(this),this.legendElementRoot=this.mainElement.selectAll(\"svg.legend\"),this.legendElement=this.mainElement.selectAll(\"svg.legend\").selectAll(\"g\")}return r.prototype.saveSelection=function(){var t=this.mainElement.selectAll(\".legendItem, \"+n.BarSelect.selectorName).filter(function(t){return t.selected}).each(function(t){t.identity=t.identity}),i=t.data();e.selectionSaveUtils.saveSelection(i,this.host)},r.prototype.clearAll=function(){this.isSmallMultiple()?(this.mainElement.selectAll(\".selection-rect\").remove(),this.mainDivElement.selectAll(\"*\").remove()):(this.barGroup&&this.barGroup.selectAll(n.BarGroupSelect.selectorName).remove(),this.xAxisSvgGroup&&this.xAxisSvgGroup.selectAll(\"*\").remove(),this.yAxisSvgGroup&&this.yAxisSvgGroup.selectAll(\"*\").remove(),this.legendElement&&this.legendElement.selectAll(\"*\").remove(),\nthis.labelGraphicsContext&&this.labelGraphicsContext.selectAll(\"*\").remove(),this.labelBackgroundContext&&this.labelBackgroundContext.selectAll(\"*\").remove())},r.prototype.optionsAreValid=function(n){var i=n&&n.dataViews&&n.dataViews[0];if(i&&n.type!==t.VisualUpdateType.ResizeEnd)return e.DataViewConverter.IsCategoryFilled(i,e.Field.Axis)&&e.DataViewConverter.IsCategoryFilled(i,e.Field.Axis)?!0:void this.clearAll()},r.prototype.isSmallMultiple=function(){return!!this.metadata&&(this.metadata.idx.columnBy>-1||this.metadata.idx.rowBy>-1)},r.prototype.normalChartProcess=function(t){this.maxXLabelsWidth=null,this.dataPointsByCategories=this.buildDataPointsByCategoriesArray(),this.hasHighlight=this.allDataPoints.filter(function(t){return t.highlight}).length>0,this.categoriesCount=this.dataPointsByCategories.length,this.createNormalChartElements(),this.lassoSelection.init(this.mainElement),this.isLegendNeeded?e.legendUtils.renderLegend(this.legend,this.mainSvgElement,t.viewport,this.legendProperties,this.legendElement):(this.legendElement&&this.legendElement.selectAll(\"*\").remove(),this.mainSvgElement&&this.mainSvgElement.style({\"margin-top\":0,\"margin-bottom\":0,\"margin-left\":0,\"margin-right\":0})),this.calculateOffsets(),this.calculateVisualSizeAndPosition(),this.scrollBar.updateData(this.getScrollbarState(),t.type);var i=this.scrollBar.getVisibleDataPoints(),r=this.createAxes(i);this.data={dataPoints:i,size:this.visualSize,axes:r,categoriesCount:this.categoriesCount,legendData:this.legendProperties.data,hasHighlight:this.hasHighlight,isLegendNeeded:this.isLegendNeeded,isSmallMultiple:this.isSmallMultiple()},this.renderAxes(),this.legendSize=this.isLegendNeeded?this.calculateLegendSize(this.settings.legend,this.legendElementRoot):null,this.calculateOffsets(),this.calculateVisualSizeAndPosition(this.legendSize),this.calculateDataPointThickness(),r=this.createAxes(i),this.data.size=this.visualSize,this.data.axes=r,this.interactivityService.applySelectionStateToData(this.data.dataPoints),this.calculateDataPointThickness(),r=this.createAxes(i),this.data.axes=r,this.renderAxes(),e.RenderAxes.rotateXAxisTickLabels(this.isNeedToRotate,this.xAxisSvgGroup),this.finalRendering(),this.scrollBar.update();var a=this.barGroup.selectAll(n.BarSelect.selectorName).data(i);if(this.LassoSelectionForSmallMultiple.disable(),this.lassoSelection.update(a),this.settings.constantLine.show&&this.settings.constantLine.value){var o=this.yAxisSvgGroup.selectAll(\"line\").node().getBoundingClientRect().width;e.RenderVisual.renderConstantLine(this.settings.constantLine,this.barGroup,r,o)}},r.prototype.createNormalChartElements=function(){this.prepareMainSvgElementForNormalChart(),this.chartsContainer=this.mainSvgElement.append(\"g\").attr(\"id\",\"chartsContainer\"),this.xAxisSvgGroup=this.chartsContainer.append(\"g\").attr(\"id\",\"xAxisSvgGroup\"),this.yAxisSvgGroup=this.chartsContainer.append(\"g\").attr(\"id\",\"yAxisSvgGroup\"),this.barGroup=this.chartsContainer.append(\"g\").attr(\"id\",\"barGroup\"),this.axisGraphicsContext=this.chartsContainer.append(\"g\").attr(\"class\",n.AxisGraphicsContext.className),this.labelBackgroundContext=this.chartsContainer.append(\"g\").classed(n.LabelBackgroundContext.className,!0),this.labelGraphicsContext=this.chartsContainer.append(\"g\").classed(n.LabelGraphicsContext.className,!0),this.mainElement.select(\".scrollbar-track\").remove(),this.scrollBar.init(this.mainElement)},r.prototype.prepareMainSvgElementForNormalChart=function(){this.mainDivElement&&(this.mainDivElement.remove(),this.mainDivElement=null),this.mainSvgElement?this.mainSvgElement.selectAll(\"*\").remove():this.mainSvgElement=this.mainElement.append(\"svg\").classed(n.MainSvg.className,!0).attr({width:\"100%\",height:\"100%\"})},r.prototype.update=function(t){if(this.optionsAreValid(t)){var n=t&&t.dataViews&&t.dataViews[0];this.dataView=n,this.viewport=t.viewport,this.isLegendNeeded=e.DataViewConverter.IsLegendNeeded(n),this.updateMetaData(),this.settings=r.parseSettings(n),this.updateSettings(this.settings,n),this.legendProperties=e.legendUtils.setLegendProperties(n,this.host,this.settings.legend),this.allDataPoints=e.DataViewConverter.Convert(n,this.host,this.settings,this.legendProperties.colors),this.isSmallMultiple()?this.smallMultipleProcess(t.viewport):this.normalChartProcess(t),this.isSelectionRestored||(this.restoreSelection(),this.isSelectionRestored=!0)}},r.prototype.restoreSelection=function(){var t=this.settings.selectionSaveSettings.selection,e=this.mainElement.selectAll(\".legendItem, \"+n.BarSelect.selectorName).data().filter(function(e){return t.some(function(t){return t.identity.key===e.identity.key})});e.length>0&&this.webBehaviorSelectionHandler.handleSelection(e,!1)},r.prototype.calculateLabelsSize=function(t){return t.showChartTitle?120:0},r.prototype.calculateTopSpace=function(t){if(!t.showChartTitle)return 0;var n={fontFamily:t.fontFamily,fontSize:u.toString(t.fontSize)},i=h.measureSvgTextHeight(n),r=t.layoutMode===e.LayoutMode.Flow?15:0;return i+r},r.prototype.calculateYAxisSize=function(){return 35},r.prototype.calculateXAxisSize=function(t){var e=u.toString(t.categoryAxis.fontSize),n=t.categoryAxis.fontFamily,i={fontFamily:n,fontSize:e},r=h.measureSvgTextHeight(i);return r+8},r.prototype.calculateXAxisSizeForCategorical=function(t,e,n,i){var r;n.cols.category?r=c.create({format:c.getFormatStringByColumn(n.cols.category,!0)||n.cols.category.format,cultureSelector:this.host.locale}):n.groupingColumn&&(r=c.create({format:c.getFormatStringByColumn(n.groupingColumn,!0)||n.groupingColumn.format,cultureSelector:this.host.locale}));var a=u.toString(e.categoryAxis.fontSize),o=e.categoryAxis.fontFamily,l=0;return t.forEach(function(t){var e={text:r.format(t),fontFamily:o,fontSize:a},n=h.measureSvgTextWidth(e);l=n>l?n:l}),l>=i?l+4:-1},r.prototype.prepareMainDiv=function(t){this.mainSvgElement&&(this.mainSvgElement.remove(),this.mainSvgElement=null),this.mainDivElement?this.mainDivElement.selectAll(\"*\").remove():this.mainDivElement=t.append(\"div\")},r.prototype.calculateChartSize=function(t,n,i,r,a,o,l){var s=22,u=20,c=10,h=n.minUnitHeight,f=n.minUnitWidth,d=0,g=0;if(n.layoutMode===e.LayoutMode.Matrix){var p=t.height-r-s-l.height,v=t.width-i-u-l.width;d=(p-c*a)/a,g=(v-c*o)/o}else{var p=t.height-s-l.height,v=t.width-i-u-l.width;d=(p-c*a-r*a)/a,g=(v-c*o)/o}var m=h-u/a>d,y=f-s/o>g;return m||(g+=s/o),y||(d+=u/a),{height:m?h:d,width:y?f:g,isHorizontalSliderNeeded:y,isVerticalSliderNeeded:m}},r.prototype.createSmallMultipleAxesByDomains=function(t,n,i,r){var a={yAxisDomain:n,xAxisDomain:t},o=e.RenderAxes.createD3Axes(a,i,this.metadata,this.settings,this.host,!0,null,r);return o},r.prototype.renderSmallMultipleAxes=function(t,n,i,r,a){e.visualUtils.calculateBarCoordianates(t,n,this.settings,a,!0),e.RenderAxes.render(this.settings,i,r,n)},r.prototype.smallMultipleProcess=function(t){var a=this.allDataPoints.map(function(t){return t.columnBy}).filter(function(t,e,n){return n.indexOf(t)===e}),o=this.allDataPoints.map(function(t){return t.rowBy}).filter(function(t,e,n){return n.indexOf(t)===e}),l=this.allDataPoints.map(function(t){return t.category}).filter(function(t,e,n){return n.indexOf(t)===e}),s=o&&1===o.length&&null===o[0]?0:this.calculateLabelsSize(this.settings.smallMultiple),u=this.calculateTopSpace(this.settings.smallMultiple),c=this.allDataPoints.filter(function(t){return t.highlight}).length>0,h=10,f=10;this.prepareMainDiv(this.mainElement),this.mainElement.select(\".scrollbar-track\").remove();var d={width:0,height:0};this.isLegendNeeded?(e.legendUtils.renderLegend(this.legend,this.mainDivElement,this.viewport,this.legendProperties,this.legendElement),d=this.calculateLegendSize(this.settings.legend,this.legendElementRoot)):(this.legendElement&&this.legendElement.selectAll(\"*\").remove(),this.mainDivElement&&this.mainDivElement.style({\"margin-top\":0,\"margin-bottom\":0,\"margin-left\":0,\"margin-right\":0}),d={height:0,width:0});var g=this.settings.smallMultiple.layoutMode,p=this.settings.smallMultiple.maxRowWidth,v=a.length<=p?1:Math.floor(a.length/p)+(a.length%p>0?1:0),m=g===e.LayoutMode.Matrix?a.length:Math.min(a.length,p),y=g===e.LayoutMode.Matrix?o.length:v*o.length,x=this.calculateChartSize(t,this.settings.smallMultiple,s,u,y,m,d),b=this.calculateYAxisSize(),S={height:x.height-f,width:x.width-b-2*f},w=e.visualUtils.isScalar(this.metadata.cols.category),M=w&&\"categorical\"!==this.settings.categoryAxis.axisType?0:e.visualUtils.calculateDataPointThickness(null,S,l.length,this.settings.categoryAxis.innerPadding,this.settings,!w),C=\"categorical\"!==this.settings.categoryAxis.axisType&&w?-1:this.calculateXAxisSizeForCategorical(l,this.settings,this.metadata,M),T=C>0?C:this.calculateXAxisSize(this.settings);S.height-=T,this.mainDivElement.style({width:t.width-d.width+\"px\",height:t.height-d.height+\"px\",\"overflow-x\":x.isHorizontalSliderNeeded?\"auto\":\"hidden\",\"overflow-y\":x.isVerticalSliderNeeded?\"auto\":\"hidden\"});var P=x.height/100*this.settings.categoryAxis.maximumSize,D=C>0;this.settings.categoryAxis.maximumSize&&(T>P?(S.height+=T,T=P,S.height-=T,D=!0):P=Number.MAX_VALUE);var A,L=this.settings.categoryAxis.rangeType===e.AxisRangeType.Separate,E=this.settings.valueAxis.rangeType===e.AxisRangeType.Separate,F=this.settings.valueAxis.rangeType===e.AxisRangeType.Custom,k=this.settings.categoryAxis.rangeType===e.AxisRangeType.Custom,N=e.RenderAxes.calculateValueDomain(this.allDataPoints,this.settings,!0),_=e.RenderAxes.calculateCategoryDomain(this.allDataPoints,this.settings,this.metadata,!0),I=this.createSmallMultipleAxesByDomains(_,N,S,P),O=[],B=[];E||L?(E||(B=N),L||(O=_)):A=I,this.data={axes:A,dataPoints:this.allDataPoints,hasHighlight:c,isLegendNeeded:this.isLegendNeeded,legendData:this.legendProperties.data,categoriesCount:null,isSmallMultiple:this.isSmallMultiple()};var z=0,R=0;g===e.LayoutMode.Matrix?(z=u+y*x.height+f*y,R=s+m*x.width+f*m):(z=u*y+y*x.height+f*(y-1),R=s+m*x.width+f*m);for(var V=this.mainDivElement.append(\"svg\").classed(\"chart\",!0).style({width:R+\"px\",height:z+\"px\"}),U=function(t){for(var d=function(d){var m=0,y=0;if(g===e.LayoutMode.Matrix)m=f/2+d*x.width+f*d,y=u+t*x.height+f*t;else{var M=Math.floor(d%p),C=Math.floor(d/p)+t*v;m=M*x.width+f*M,y=C*x.height+f*C+u*C+f/2}var z=W.allDataPoints.filter(function(e){return e.rowBy===o[t]}).filter(function(t){return t.columnBy===a[d]}),R=V.append(\"g\").attr({transform:i.translate(s+m,y+u)}),U=R.append(\"g\"),H=R.append(\"g\"),G=W.settings.valueAxis.show&&\"right\"===W.settings.valueAxis.position;U.attr(\"transform\",i.translate(h+(G?0:b),S.height)),H.attr(\"transform\",i.translate(h+(G?S.width:b),0)),(E||L)&&(z&&z.length||(A=I),E&&(B=z&&z.length?e.RenderAxes.calculateValueDomain(z,W.settings,!0):N),L&&(O=z&&z.length?e.RenderAxes.calculateCategoryDomain(z,W.settings,W.metadata,!0):_),A=E||L?W.createSmallMultipleAxesByDomains(O,B,S,P):I),W.data.axes||(W.data.axes=I);var j=w&&\"categorical\"!==W.settings.categoryAxis.axisType?e.visualUtils.calculateDataPointThickness(z,S,l.length,W.settings.categoryAxis.innerPadding,W.settings,!w):A.x.scale.rangeBand();if(W.renderSmallMultipleAxes(z,A,U,H,j),k){for(var q=1,Y=U.selectAll(\"text\")[0],X=Y.parentNode.getBBox().width,Q=e.visualUtils.getLabelsMaxWidth(Y),K=0;K<Y.length;++K){var $=Q*Y.length/q;if(!($>X))break;q+=1}for(var Z=0;Z<Y.length;++Z)Z%q>0&&d3.select(Y[Z]).remove()}if(F){for(var q=1,J=H.selectAll(\"text\")[0],X=J.parentNode.getBBox().height,Q=e.visualUtils.getLabelsMaxHeight(J),tt=0;tt<J.length;++tt){var $=Q*J.length/q;if(!($>X))break;q+=1}for(var et=0;et<J.length;++et)et%q>0&&d3.select(J[et]).remove()}var nt=D?!0:e.visualUtils.smallMultipleLabelRotationIsNeeded(U,j,W.settings.categoryAxis,P);nt&&e.RenderAxes.rotateXAxisTickLabels(!0,U);var it=R.append(\"g\").classed(\"bar-group\",!0).attr({transform:i.translate(h+(G?0:b),0)}),rt=W.interactivityService,at=rt.hasSelection();rt.applySelectionStateToData(z);var ot=it.selectAll(n.BarSelect.selectorName).data(z);ot.enter().append(\"rect\").attr(\"class\",n.BarSelect.className),ot.exit().remove(),ot.attr({height:function(t){return t.barCoordinates.height},width:function(t){return t.barCoordinates.width},x:function(t){return t.barCoordinates.x},y:function(t){return t.barCoordinates.y},fill:function(t){return t.color}}),ot.style({\"fill-opacity\":function(t){return e.visualUtils.getFillOpacity(t.selected,t.highlight,!t.highlight&&at,!t.selected&&c)},stroke:function(t){return at&&e.visualUtils.isSelected(t.selected,t.highlight,!t.highlight&&at,!t.selected&&c)?r.DefaultStrokeSelectionColor:t.color},\"stroke-width\":function(t){return at&&e.visualUtils.isSelected(t.selected,t.highlight,!t.highlight&&at,!t.selected&&c)?r.DefaultStrokeSelectionWidth:r.DefaultStrokeWidth}}),e.RenderVisual.renderTooltip(ot,W.tooltipServiceWrapper),e.visualUtils.calculateLabelCoordinates(W.data,W.settings.categoryLabels,x.width,W.isLegendNeeded,z);var lt=it.append(\"g\").classed(n.LabelGraphicsContext.className,!0);e.RenderVisual.renderDataLabelsForSmallMultiple(W.data,W.settings,lt,W.metadata,z);var st=it.append(\"g\").classed(n.LabelBackgroundContext.className,!0);if(e.RenderVisual.renderDataLabelsBackgroundForSmallMultiple(W.data,W.settings,st,z),W.settings.smallMultiple.showChartTitle&&g===e.LayoutMode.Flow&&e.RenderVisual.renderSmallMultipleTopTitle({chartElement:V,chartSize:x,columns:a,index:d,leftSpace:m+s,topSpace:y,textHeight:u,rows:o,xAxisLabelSize:T},W.settings.smallMultiple),W.settings.valueAxis.show){var ut=H.selectAll(\"line\").node().getBoundingClientRect().width;A.y.dataDomain[0]<=W.settings.constantLine.value&&W.settings.constantLine.value<=A.y.dataDomain[1]&&e.RenderVisual.renderConstantLine(W.settings.constantLine,it,A,ut)}},m=0;m<a.length;++m)d(m)},W=this,H=0;H<o.length;++H)U(H);this.settings.smallMultiple.showSeparators&&e.RenderVisual.renderSmallMultipleLines({chartElement:V,chartSize:x,columns:a,rows:o,leftSpace:s,topSpace:u,xAxisLabelSize:T,rowsInFlow:v},this.settings.smallMultiple),this.settings.smallMultiple.showChartTitle&&e.RenderVisual.renderSmallMultipleTitles({chartElement:V,chartSize:x,columns:a,leftSpace:s,topSpace:u,rows:o,xAxisLabelSize:T,rowsInFlow:v},this.settings.smallMultiple);var G=!!(this.dataView.categorical&&this.dataView.categorical.values&&this.dataView.categorical.values.source);if(this.lassoSelection.disable(),this.LassoSelectionForSmallMultiple.init(this.mainElement),this.LassoSelectionForSmallMultiple.update(V,V.selectAll(n.BarSelect.selectorName),G),this.interactivityService){this.interactivityService.applySelectionStateToData(this.allDataPoints);var j={bars:this.mainElement.selectAll(n.BarSelect.selectorName),clearCatcher:d3.select(document.createElement(\"div\")),interactivityService:this.interactivityService,host:this.host,selectionSaveSettings:this.settings.selectionSaveSettings};this.interactivityService.bind(this.allDataPoints,this.behavior,j)}},r.prototype.getSettings=function(){return this.settings},r.prototype.getVisualSize=function(){return this.visualSize},r.prototype.getDataView=function(){return this.dataView},r.prototype.getChartBoundaries=function(){return this.clearCatcher.node().getBoundingClientRect()},r.prototype.getVisualTranslation=function(){return this.visualTranslation},r.prototype.getAllDataPoints=function(){return this.allDataPoints},r.prototype.getDataPointsByCategories=function(){return this.dataPointsByCategories},r.prototype.buildDataPointsByCategoriesArray=function(){for(var t=[],e=0,n=\"\",i=\"\",r=0;r<this.allDataPoints.length;r++)if(null!=this.allDataPoints[r].category){if(i=n,n=this.allDataPoints[r].category.toString(),r>0&&n!==i&&e++,!t[e]){var a={categoryName:n,dataPoints:[]};t[e]=a}t[e].dataPoints.push(this.allDataPoints[r])}return t},r.prototype.onScrollPosChanged=function(){var t=this.scrollBar.getVisibleDataPoints(),n=this.createAxes(t),i=e.legendUtils.getSuitableLegendData(this.dataView,this.host,this.settings.legend);this.data={dataPoints:t,size:this.visualSize,axes:n,categoriesCount:this.categoriesCount,legendData:i,hasHighlight:this.hasHighlight,isLegendNeeded:this.isLegendNeeded,isSmallMultiple:this.isSmallMultiple()},this.renderAxes(),this.legendSize=this.isLegendNeeded?this.calculateLegendSize(this.settings.legend,this.legendElementRoot):null,this.calculateOffsets(),this.calculateVisualSizeAndPosition(this.legendSize),this.calculateDataPointThickness(),n=this.createAxes(t),this.data.size=this.visualSize,this.data.axes=n,this.interactivityService.applySelectionStateToData(this.data.dataPoints),this.renderAxes(),e.RenderAxes.rotateXAxisTickLabels(this.isNeedToRotate,this.xAxisSvgGroup),this.finalRendering()},r.prototype.updateMetaData=function(){var t=this.dataView.categorical.values.grouped(),n=this.dataView.metadata.columns[0],i=this.dataView.categorical.categories||[];this.metadata=e.metadataUtils.getMetadata(i,t,n)},r.prototype.getScrollbarState=function(){var t=l.getCategoryValueType(this.metadata.cols.category),e=l.isOrdinal(t);return\"continuous\"!==this.settings.categoryAxis.axisType||e?s.Enable:s.Disable},r.prototype.createAxes=function(t,n){void 0===n&&(n=!1);var i=e.RenderAxes.calculateAxesDomains(this.allDataPoints,t,this.settings,this.metadata,n),r=e.RenderAxes.createD3Axes(i,this.visualSize,this.metadata,this.settings,this.host,n,this.dataPointThickness,this.maxXLabelsWidth);return r},r.prototype.calculateDataPointThickness=function(){this.dataPointThickness=e.visualUtils.calculateDataPointThickness(this.data.dataPoints,this.visualSize,this.data.categoriesCount,this.settings.categoryAxis.innerPadding,this.settings)},r.prototype.renderAxes=function(){e.visualUtils.calculateBarCoordianates(this.data.dataPoints,this.data.axes,this.settings,this.dataPointThickness),e.RenderAxes.render(this.settings,this.xAxisSvgGroup,this.yAxisSvgGroup,this.data.axes)},r.prototype.finalRendering=function(){var t=e.visualUtils.getLabelsMaxHeight(this.xAxisSvgGroup.selectAll(\"text\")[0]);e.RenderAxes.renderLabels(this.viewport,this.visualMargin,this.visualSize,[this.data.axes.x.axisLabel,this.data.axes.y.axisLabel],this.settings,this.data.axes,this.axisLabelsGroup,this.axisGraphicsContext,t),e.visualUtils.calculateBarCoordianates(this.data.dataPoints,this.data.axes,this.settings,this.dataPointThickness),e.RenderVisual.render(this.data,this.barGroup,this.clearCatcher,this.interactivityService,this.behavior,this.tooltipServiceWrapper,this.host,this.hasHighlight,this.settings);var n=this.barGroup.node().getBoundingClientRect().height;e.visualUtils.calculateLabelCoordinates(this.data,this.settings.categoryLabels,n,this.isLegendNeeded);var i=e.RenderVisual.filterData(this.data.dataPoints);e.RenderVisual.renderDataLabelsBackground(i,this.settings,this.labelBackgroundContext),e.RenderVisual.renderDataLabels(i,this.settings,this.labelGraphicsContext);var r=this.yAxisSvgGroup.selectAll(\"line\").node().getBoundingClientRect().width;e.RenderVisual.renderConstantLine(this.settings.constantLine,this.barGroup,this.data.axes,r)},r.prototype.calculateLegendSize=function(t,e){switch(t.position){case\"Top\":case\"TopCenter\":case\"Bottom\":case\"BottomCenter\":return{width:0,height:e.node().getBBox().height};case\"Left\":case\"LeftCenter\":case\"Right\":case\"RightCenter\":return{width:e.node().getBBox().width,height:0};default:return{width:0,height:0}}},r.prototype.updateSettings=function(t,n){var i=50,r=180,a=20,o=50,l=15;0===this.settings.legend.legendName.length&&n.categorical.values.source&&(t.legend.legendName=n.categorical.values.source.displayName),!this.isSmallMultiple()||e.visualUtils.categoryIsScalar(this.metadata)&&\"categorical\"!==this.settings.categoryAxis.axisType||(t.categoryAxis.rangeType=t.categoryAxis.rangeTypeNoScalar);var s=t.categoryAxis;if(s.innerPadding>i&&(s.innerPadding=i),s.minCategoryWidth<a&&(s.minCategoryWidth=a),s.minCategoryWidth>r&&(s.minCategoryWidth=r),s.maximumSize<l&&(s.maximumSize=l),s.maximumSize>o&&(s.maximumSize=o),s.showTitle&&0===s.axisTitle.length){var u=n.categorical.categories;s.axisTitle=u?u[0].source.displayName:n.categorical.values.source.displayName}s.showTitle||(s.axisTitle=\"\"),\"string\"==typeof t.selectionSaveSettings.selection&&(t.selectionSaveSettings.selection=JSON.parse(t.selectionSaveSettings.selection))},r.prototype.calculateOffsets=function(){var t=this.xAxisSvgGroup.selectAll(\"text\")[0],n=this.yAxisSvgGroup.selectAll(\"text\")[0],i=this.settings.categoryAxis.show&&this.settings.categoryAxis.showTitle,r=this.settings.valueAxis.show&&this.settings.valueAxis.showTitle;this.yTickOffset=e.visualUtils.getLabelsMaxWidth(n)+(r?parseInt(this.settings.valueAxis.titleFontSize.toString()):0);var a=e.visualUtils.getLabelsMaxWidth(t),o=this.data&&this.data.axes?this.data.axes.x.axis.tickPadding():0,l=!1;!this.data||this.data.axes.xIsScalar&&\"continuous\"===this.settings.categoryAxis.axisType||(l=!!this.maxXLabelsWidth||a>(this.data.axes.x.scale.rangeBand?this.data.axes.x.scale.rangeBand():0+o));var s=i?u.fromPointToPixel(this.settings.categoryAxis.titleFontSize)+5:0;this.xTickOffset=(l?a:e.visualUtils.getLabelsMaxHeight(t))+s,this.isNeedToRotate=l},r.prototype.calculateVisualSizeAndPosition=function(t){void 0===t&&(t=null),this.mainSvgElement&&this.mainSvgElement.attr(\"width\",this.viewport.width).attr(\"height\",this.viewport.height),this.calculateVisualMargin();var n=this.settings.categoryAxis.show&&this.settings.categoryAxis.showTitle,i=n?e.visualUtils.GetXAxisTitleHeight(this.settings.categoryAxis)+5:0;this.calculateVisualSize(t,i);var r=e.xAxisUtils.getXAxisMaxWidth(this.visualSize.height+this.xTickOffset,this.settings);this.xTickOffset>r+i&&(this.xTickOffset=r+i,this.maxXLabelsWidth=r),this.calculateVisualPosition()},r.prototype.calculateVisualMargin=function(){var t=this.settings.valueAxis.show&&\"right\"===this.settings.valueAxis.position,e=t||!this.settings.categoryAxis.show,n=!t||!this.settings.categoryAxis.show;this.visualMargin={top:5,bottom:5,left:e?15:5,right:n?15:5}},r.prototype.calculateVisualSize=function(t,n){var i={width:this.viewport.width-this.visualMargin.left-this.visualMargin.right-this.axesSize.yAxisWidth-(null===t?0:t.width)-this.yTickOffset,height:this.viewport.height-this.visualMargin.top-this.visualMargin.bottom-this.axesSize.xAxisHeight-(null===t?0:t.height)-this.xTickOffset-(this.scrollBar.isEnabled()?this.scrollBar.settings.trackSize:0)},r=e.xAxisUtils.getXAxisMaxWidth(i.height+this.xTickOffset,this.settings);this.xTickOffset>r+n&&(i.height=i.height+this.xTickOffset-r-n,this.xTickOffset=r+n,this.maxXLabelsWidth=r),this.visualSize=i},r.prototype.calculateVisualPosition=function(){this.chartsContainer.attr(\"transform\",\"translate(\"+this.visualMargin.left+\", \"+this.visualMargin.top+\")\"),this.visualTranslation={x:this.visualMargin.left,y:this.visualMargin.top};var t=this.settings.valueAxis.show&&\"left\"===this.settings.valueAxis.position,e=t?this.axesSize.yAxisWidth+this.yTickOffset:0;this.xAxisSvgGroup.attr(\"transform\",i.translate(e,this.visualMargin.top+this.visualSize.height)),this.yAxisSvgGroup.attr(\"transform\",i.translate(t?this.axesSize.yAxisWidth+this.yTickOffset:this.visualSize.width,this.visualMargin.top)),this.barGroup.attr(\"transform\",i.translate(e,this.visualMargin.top)),this.labelGraphicsContext.attr(\"transform\",i.translate(e,this.visualMargin.top)),this.labelBackgroundContext.attr(\"transform\",i.translate(e,this.visualMargin.top))},r.prototype.yAxisHasRightPosition=function(){return this.settings.valueAxis.show&&\"right\"===this.settings.valueAxis.position},r.parseSettings=function(t){return e.VisualSettings.parse(t)},r.prototype.enumerateObjectInstances=function(t){var n=e.VisualSettings.enumerateObjectInstances(this.settings||e.VisualSettings.getDefault(),t),i=n.instances,r=i[0];return(\"legend\"!==r.objectName||this.isLegendNeeded)&&(\"smallMultiple\"!==r.objectName||this.isSmallMultiple())?(e.EnumerateObject.setInstances(this.settings,n,this.data.axes.xIsScalar,this.data),n):null},r}();d.DefaultColor=\"#777777\",d.DefaultStrokeSelectionColor=\"#000\",d.DefaultStrokeWidth=1,d.DefaultStrokeSelectionWidth=1,e.Visual=d}(n=e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1||(e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){e.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1={name:\"PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1\",displayName:\"100% Stacked Column Chart by Akvelon 1.2.3\",\"class\":\"Visual\",version:\"1.2.3\",apiVersion:\"1.13.0\",create:function(e){return new t.extensibility.visual.PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1.Visual(e)},custom:!0}}(n=e.plugins||(e.plugins={}))}(e=t.visuals||(t.visuals={}))}(powerbi||(powerbi={}));",
    "css": ".visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .clearCatcher{fill-opacity:0}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .legend .navArrow{fill:#333333;cursor:pointer;stroke:#FFF;stroke-width:2px}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .data-labels{font-size:12px;text-anchor:middle;font-family:helvetica,arial,sans-serif;pointer-events:none}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .overflowingText{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .bar-chart-svg{position:absolute}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 p{font-size:20px;font-weight:bold}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 p em{background:yellow;padding:5px}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 path.domain{display:none;fill:none}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .tick{font-size:11px;fill:#777777}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .tick line{stroke:#e9e9e9}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .scrollbar-track{position:absolute;background:#ccc;cursor:default;display:none}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .scrollbar-handle{position:absolute;top:0;left:0;height:100%;background:#666;border:0;outline:0;box-sizing:border-box;padding:0}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .scrollbar-handle:hover{background:#333}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .scrollbar-handle:active{background:#000}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .selection-rect{opacity:0;border:solid #000 1px;position:absolute;width:0;height:0;box-sizing:border-box;background:#555;z-index:100}.visual-PercentStackedColumnChartByAkvelonF99290E0E9AE4CA6B8D5284FC0723FE1 .selection-rect.selection-rect-active{opacity:.5}",
    "iconBase64": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMjHxIGmVAAAAO0lEQVQ4T2NYs2bNfyBgoBbGNHBt838MTIL8qIGENRCSHzUQKHD13H90jCw/Ag0kKD9q4EgxkHp4zX8Agwagb4KuY+gAAAAASUVORK5CYII="
  }
}